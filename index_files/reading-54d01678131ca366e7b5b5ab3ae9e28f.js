function noty(t){var e=0,n={animateOpen:"animation.open",animateClose:"animation.close",easing:"animation.easing",speed:"animation.speed",onShow:"callback.onShow",onShown:"callback.afterShow",onClose:"callback.onClose",onClosed:"callback.afterClose"};return jQuery.each(t,function(i,o){if(n[i]){e++;var r=n[i].split(".");t[r[0]]||(t[r[0]]={}),t[r[0]][r[1]]=o?o:function(){},delete t[i]}}),t.closeWith||(t.closeWith=jQuery.noty.defaults.closeWith),t.hasOwnProperty("closeButton")&&(e++,t.closeButton&&t.closeWith.push("button"),delete t.closeButton),t.hasOwnProperty("closeOnSelfClick")&&(e++,t.closeOnSelfClick&&t.closeWith.push("click"),delete t.closeOnSelfClick),t.hasOwnProperty("closeOnSelfOver")&&(e++,t.closeOnSelfOver&&t.closeWith.push("hover"),delete t.closeOnSelfOver),t.hasOwnProperty("custom")&&(e++,"null"!=t.custom.container&&(t.custom=t.custom.container)),t.hasOwnProperty("cssPrefix")&&(e++,delete t.cssPrefix),"noty_theme_default"==t.theme&&(e++,t.theme="defaultTheme"),t.hasOwnProperty("dismissQueue")||(t.dismissQueue=jQuery.noty.defaults.dismissQueue),t.buttons&&jQuery.each(t.buttons,function(t,n){n.click&&(e++,n.onClick=n.click,delete n.click),n.type&&(e++,n.addClass=n.type,delete n.type)}),e&&"undefined"!=typeof console&&console.warn&&console.warn("You are using noty v2 with v1.x.x options. @deprecated until v2.2.0 - Please update your options."),jQuery.notyRenderer.init(t)}!function(t,e){t.rails!==e&&t.error("jquery-ujs has already been loaded!");var n;t.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",buttonClickSelector:"button[data-remote]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(e){var n=t('meta[name="csrf-token"]').attr("content");n&&e.setRequestHeader("X-CSRF-Token",n)},fire:function(e,n,i){var o=t.Event(n);return e.trigger(o,i),o.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t.attr("href")},handleRemote:function(i){var o,r,s,a,l,c,u,h;if(n.fire(i,"ajax:before")){if(a=i.data("cross-domain"),l=a===e?null:a,c=i.data("with-credentials")||null,u=i.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,i.is("form")){o=i.attr("method"),r=i.attr("action"),s=i.serializeArray();var d=i.data("ujs:submit-button");d&&(s.push(d),i.data("ujs:submit-button",null))}else i.is(n.inputChangeSelector)?(o=i.data("method"),r=i.data("url"),s=i.serialize(),i.data("params")&&(s=s+"&"+i.data("params"))):i.is(n.buttonClickSelector)?(o=i.data("method")||"get",r=i.data("url"),s=i.serialize(),i.data("params")&&(s=s+"&"+i.data("params"))):(o=i.data("method"),r=n.href(i),s=i.data("params")||null);h={type:o||"GET",data:s,dataType:u,beforeSend:function(t,o){return o.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+o.accepts.script),n.fire(i,"ajax:beforeSend",[t,o])},success:function(t,e,n){i.trigger("ajax:success",[t,e,n])},complete:function(t,e){i.trigger("ajax:complete",[t,e])},error:function(t,e,n){i.trigger("ajax:error",[t,e,n])},crossDomain:l},c&&(h.xhrFields={withCredentials:c}),r&&(h.url=r);var p=n.ajax(h);return i.trigger("ajax:send",p),p}return!1},handleMethod:function(i){var o=n.href(i),r=i.data("method"),s=i.attr("target"),a=t("meta[name=csrf-token]").attr("content"),l=t("meta[name=csrf-param]").attr("content"),c=t('<form method="post" action="'+o+'"></form>'),u='<input name="_method" value="'+r+'" type="hidden" />';l!==e&&a!==e&&(u+='<input name="'+l+'" value="'+a+'" type="hidden" />'),s&&c.attr("target",s),c.hide().append(u).appendTo("body"),c.submit()},disableFormElements:function(e){e.find(n.disableSelector).each(function(){var e=t(this),n=e.is("button")?"html":"val";e.data("ujs:enable-with",e[n]()),e[n](e.data("disable-with")),e.prop("disabled",!0)})},enableFormElements:function(e){e.find(n.enableSelector).each(function(){var e=t(this),n=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[n](e.data("ujs:enable-with")),e.prop("disabled",!1)})},allowAction:function(t){var e,i=t.data("confirm"),o=!1;return i?(n.fire(t,"confirm")&&(o=n.confirm(i),e=n.fire(t,"confirm:complete",[o])),o&&e):!0},blankInputs:function(e,n,i){var o,r,s=t(),a=n||"input,textarea",l=e.find(a);return l.each(function(){if(o=t(this),r=o.is("input[type=checkbox],input[type=radio]")?o.is(":checked"):o.val(),!r==!i){if(o.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+o.attr("name")+'"]').length)return!0;s=s.add(o)}}),s.length?s:!1},nonBlankInputs:function(t,e){return n.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){t.data("ujs:enable-with",t.html()),t.html(t.data("disable-with")),t.bind("click.railsDisable",function(t){return n.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},n.fire(t(document),"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,i){t.crossDomain||n.CSRFProtection(i)}),t(document).delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(t(this))}),t(document).delegate(n.linkClickSelector,"click.rails",function(i){var o=t(this),r=o.data("method"),s=o.data("params");if(!n.allowAction(o))return n.stopEverything(i);if(o.is(n.linkDisableSelector)&&n.disableElement(o),o.data("remote")!==e){if(!(!i.metaKey&&!i.ctrlKey||r&&"GET"!==r||s))return!0;var a=n.handleRemote(o);return a===!1?n.enableElement(o):a.error(function(){n.enableElement(o)}),!1}return o.data("method")?(n.handleMethod(o),!1):void 0}),t(document).delegate(n.buttonClickSelector,"click.rails",function(e){var i=t(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(e)}),t(document).delegate(n.inputChangeSelector,"change.rails",function(e){var i=t(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(e)}),t(document).delegate(n.formSubmitSelector,"submit.rails",function(i){var o=t(this),r=o.data("remote")!==e,s=n.blankInputs(o,n.requiredInputSelector),a=n.nonBlankInputs(o,n.fileInputSelector);if(!n.allowAction(o))return n.stopEverything(i);if(s&&o.attr("novalidate")==e&&n.fire(o,"ajax:aborted:required",[s]))return n.stopEverything(i);if(r){if(a){setTimeout(function(){n.disableFormElements(o)},13);var l=n.fire(o,"ajax:aborted:file",[a]);return l||setTimeout(function(){n.enableFormElements(o)},13),l}return n.handleRemote(o),!1}setTimeout(function(){n.disableFormElements(o)},13)}),t(document).delegate(n.formInputClickSelector,"click.rails",function(e){var i=t(this);if(!n.allowAction(i))return n.stopEverything(e);var o=i.attr("name"),r=o?{name:o,value:i.val()}:null;i.closest("form").data("ujs:submit-button",r)}),t(document).delegate(n.formSubmitSelector,"ajax:beforeSend.rails",function(e){this==e.target&&n.disableFormElements(t(this))}),t(document).delegate(n.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&n.enableFormElements(t(this))}),t(function(){var e=t("meta[name=csrf-token]").attr("content"),n=t("meta[name=csrf-param]").attr("content");t('form input[name="'+n+'"]').val(e)}))}(jQuery),String.prototype.encodeHTML=function(){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},e=/&(?!#?\w+;)|<|>|"|'|\//g;return function(){return this?this.replace(e,function(e){return t[e]||e}):this}}(),function(t){function e(e,i,o){var r=this;return this.on("click.pjax",e,function(e){var s=t.extend({},d(i,o));s.container||(s.container=t(this).attr("data-pjax")||r),n(e,s)})}function n(e,n,i){i=d(n,i);var r=e.currentTarget;if("A"!==r.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";if(!(e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||location.protocol!==r.protocol||location.hostname!==r.hostname||r.hash&&r.href.replace(r.hash,"")===location.href.replace(location.hash,"")||r.href===location.href+"#")){var s={url:r.href,container:t(r).attr("data-pjax"),target:r},a=t.extend({},s,i),l=t.Event("pjax:click");t(r).trigger(l,[a]),l.isDefaultPrevented()||(o(a),e.preventDefault(),t(r).trigger("pjax:clicked",[a]))}}function i(e,n,i){i=d(n,i);var r=e.currentTarget;if("FORM"!==r.tagName.toUpperCase())throw"$.pjax.submit requires a form element";var s={type:r.method.toUpperCase(),url:r.action,data:t(r).serializeArray(),container:t(r).attr("data-pjax"),target:r};o(t.extend({},s,i)),e.preventDefault()}function o(e){function n(e,n){var o=t.Event(e,{relatedTarget:i});return a.trigger(o,n),!o.isDefaultPrevented()}e=t.extend(!0,{},t.ajaxSettings,o.defaults,e),t.isFunction(e.url)&&(e.url=e.url());var i=e.target,r=h(e.url).hash,a=e.context=p(e.container);e.data||(e.data={}),e.data._pjax=a.selector;var l;e.beforeSend=function(t,i){return"GET"!==i.type&&(i.timeout=0),t.setRequestHeader("X-PJAX","true"),t.setRequestHeader("X-PJAX-Container",a.selector),n("pjax:beforeSend",[t,i])?(i.timeout>0&&(l=setTimeout(function(){n("pjax:timeout",[t,e])&&t.abort("timeout")},i.timeout),i.timeout=0),void(e.requestUrl=h(i.url).href)):!1},e.complete=function(t,i){l&&clearTimeout(l),n("pjax:complete",[t,i,e]),n("pjax:end",[t,e])},e.error=function(t,i,o){var r=g("",t,e),a=n("pjax:error",[t,i,o,e]);"GET"==e.type&&"abort"!==i&&a&&s(r.url)},e.success=function(i,l,u){var d="function"==typeof t.pjax.defaults.version?t.pjax.defaults.version():t.pjax.defaults.version,p=u.getResponseHeader("X-PJAX-Version"),f=g(i,u,e);if(d&&p&&d!==p)return void s(f.url);if(!f.contents)return void s(f.url);o.state={id:e.id||c(),url:f.url,title:f.title,container:a.selector,fragment:e.fragment,timeout:e.timeout},(e.push||e.replace)&&window.history.replaceState(o.state,f.title,f.url);try{document.activeElement.blur()}catch(m){}f.title&&(document.title=f.title),a.html(f.contents);var y=a.find("input[autofocus], textarea[autofocus]").last()[0];if(y&&document.activeElement!==y&&y.focus(),v(f.scripts),"number"==typeof e.scrollTo&&t(window).scrollTop(e.scrollTo),""!==r){var b=h(f.url);b.hash=r,o.state.url=b.href,window.history.replaceState(o.state,f.title,b.href);var _=t(b.hash);_.length&&t(window).scrollTop(_.offset().top)}n("pjax:success",[i,l,u,e])},o.state||(o.state={id:c(),url:window.location.href,title:document.title,container:a.selector,fragment:e.fragment,timeout:e.timeout},window.history.replaceState(o.state,document.title));var d=o.xhr;d&&d.readyState<4&&(d.onreadystatechange=t.noop,d.abort()),o.options=e;var d=o.xhr=t.ajax(e);return d.readyState>0&&(e.push&&!e.replace&&(y(o.state.id,a.clone().contents()),window.history.pushState(null,"",u(e.requestUrl))),n("pjax:start",[d,e]),n("pjax:send",[d,e])),o.xhr}function r(e,n){var i={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return o(t.extend(i,d(e,n)))}function s(t){window.history.replaceState(null,"","#"),window.location.replace(t)}function a(e){var n=e.state;if(n&&n.container){if(C&&x==n.url)return;if(o.state&&o.state.id===n.id)return;var i=t(n.container);if(i.length){var r,a=T[n.id];o.state&&(r=o.state.id<n.id?"forward":"back",b(r,o.state.id,i.clone().contents()));var l=t.Event("pjax:popstate",{state:n,direction:r});i.trigger(l);var c={id:n.id,url:n.url,container:i,push:!1,fragment:n.fragment,timeout:n.timeout,scrollTo:!1};a?(i.trigger("pjax:start",[null,c]),n.title&&(document.title=n.title),i.html(a),o.state=n,i.trigger("pjax:end",[null,c])):o(c),i[0].offsetHeight}else s(location.href)}C=!1}function l(e){var n=t.isFunction(e.url)?e.url():e.url,i=e.type?e.type.toUpperCase():"GET",o=t("<form>",{method:"GET"===i?"GET":"POST",action:n,style:"display:none"});"GET"!==i&&"POST"!==i&&o.append(t("<input>",{type:"hidden",name:"_method",value:i.toLowerCase()}));var r=e.data;if("string"==typeof r)t.each(r.split("&"),function(e,n){var i=n.split("=");o.append(t("<input>",{type:"hidden",name:i[0],value:i[1]}))});else if("object"==typeof r)for(key in r)o.append(t("<input>",{type:"hidden",name:key,value:r[key]}));t(document.body).append(o),o.submit()}function c(){return(new Date).getTime()}function u(t){return t.replace(/\?_pjax=[^&]+&?/,"?").replace(/_pjax=[^&]+&?/,"").replace(/[\?&]$/,"")}function h(t){var e=document.createElement("a");return e.href=t,e}function d(e,n){return e&&n?n.container=e:n=t.isPlainObject(e)?e:{container:e},n.container&&(n.container=p(n.container)),n}function p(e){if(e=t(e),e.length){if(""!==e.selector&&e.context===document)return e;if(e.attr("id"))return t("#"+e.attr("id"));throw"cant get selector for pjax container!"}throw"no pjax container for "+e.selector}function f(t,e){return t.filter(e).add(t.find(e))}function m(e){return t.parseHTML(e,document,!0)}function g(e,n,i){var o={};if(o.url=u(n.getResponseHeader("X-PJAX-URL")||i.requestUrl),/<html/i.test(e))var r=t(m(e.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0])),s=t(m(e.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]));else var r=s=t(m(e));if(0===s.length)return o;if(o.title=f(r,"title").last().text(),i.fragment){if("body"===i.fragment)var a=s;else var a=f(s,i.fragment).first();a.length&&(o.contents=a.contents(),o.title||(o.title=a.attr("title")||a.data("title")))}else/<html/i.test(e)||(o.contents=s);return o.contents&&(o.contents=o.contents.not(function(){return t(this).is("title")}),o.contents.find("title").remove(),o.scripts=f(o.contents,"script[src]").remove(),o.contents=o.contents.not(o.scripts)),o.title&&(o.title=t.trim(o.title)),o}function v(e){if(e){var n=t("script[src]");e.each(function(){var e=this.src,i=n.filter(function(){return this.src===e});if(!i.length){var o=document.createElement("script");o.type=t(this).attr("type"),o.src=t(this).attr("src"),document.head.appendChild(o)}})}}function y(t,e){for(T[t]=e,E.push(t);$.length;)delete T[$.shift()];for(;E.length>o.defaults.maxCacheLength;)delete T[E.shift()]}function b(t,e,n){var i,o;T[e]=n,"forward"===t?(i=E,o=$):(i=$,o=E),i.push(e),(e=o.pop())&&delete T[e]}function _(){return t("meta").filter(function(){var e=t(this).attr("http-equiv");return e&&"X-PJAX-VERSION"===e.toUpperCase()}).attr("content")}function w(){t.fn.pjax=e,t.pjax=o,t.pjax.enable=t.noop,t.pjax.disable=k,t.pjax.click=n,t.pjax.submit=i,t.pjax.reload=r,t.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:_},t(window).on("popstate.pjax",a)}function k(){t.fn.pjax=function(){return this},t.pjax=l,t.pjax.enable=w,t.pjax.disable=t.noop,t.pjax.click=t.noop,t.pjax.submit=t.noop,t.pjax.reload=function(){window.location.reload()},t(window).off("popstate.pjax",a)}var C=!0,x=window.location.href,S=window.history.state;S&&S.container&&(o.state=S),"state"in window.history&&(C=!1);var T={},$=[],E=[];t.inArray("state",t.event.props)<0&&t.event.props.push("state"),t.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]|WebApps\/.+CFNetwork)/),t.support.pjax?w():k()}(jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(t){return a.raw?t:encodeURIComponent(t)}function n(t){return a.raw?t:decodeURIComponent(t)}function i(t){return e(a.json?JSON.stringify(t):String(t))}function o(t){0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{t=decodeURIComponent(t.replace(s," "))}catch(e){return}try{return a.json?JSON.parse(t):t}catch(e){}}function r(e,n){var i=a.raw?e:o(e);return t.isFunction(n)?n(i):i}var s=/\+/g,a=t.cookie=function(o,s,l){if(void 0!==s&&!t.isFunction(s)){if(l=t.extend({},a.defaults,l),"number"==typeof l.expires){var c=l.expires,u=l.expires=new Date;u.setDate(u.getDate()+c)}return document.cookie=[e(o),"=",i(s),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var h=o?void 0:{},d=document.cookie?document.cookie.split("; "):[],p=0,f=d.length;f>p;p++){var m=d[p].split("="),g=n(m.shift()),v=m.join("=");if(o&&o===g){h=r(v,s);break}o||void 0===(v=r(v))||(h[g]=v)}return h};a.defaults={},t.removeCookie=function(e,n){return void 0!==t.cookie(e)?(t.cookie(e,"",t.extend({},n,{expires:-1})),!0):!1}}),function(){!function(t){return"function"==typeof define&&define.amd?define(["jquery"],t):t(window.jQuery)}(function(t){"use strict";var e,n,i,o,r,s,a,l,c,u,h;return u="caret",e=function(){function e(t){this.$inputor=t,this.domInputor=this.$inputor[0]}return e.prototype.setPos=function(){return this.domInputor},e.prototype.getIEPosition=function(){return t.noop()},e.prototype.getPosition=function(){return t.noop()},e.prototype.getOldIEPos=function(){var t,e;return e=a.selection.createRange(),t=a.body.createTextRange(),t.moveToElementText(this.domInputor),t.setEndPoint("EndToEnd",e),t.text.length},e.prototype.getPos=function(){var t,e,n;return(n=this.range())?(t=n.cloneRange(),t.selectNodeContents(this.domInputor),t.setEnd(n.endContainer,n.endOffset),e=t.toString().length,t.detach(),e):a.selection?this.getOldIEPos():void 0},e.prototype.getOldIEOffset=function(){var t,e;return t=a.selection.createRange().duplicate(),t.moveStart("character",-1),e=t.getBoundingClientRect(),{height:e.bottom-e.top,left:e.left,top:e.top}},e.prototype.getOffset=function(){var e,n,i,o;if(c.getSelection&&(i=this.range())){if(i.endOffset-1<0)return null;e=i.cloneRange(),e.setStart(i.endContainer,i.endOffset-1),e.setEnd(i.endContainer,i.endOffset),o=e.getBoundingClientRect(),n={height:o.height,left:o.left+o.width,top:o.top},e.detach()}else a.selection&&(n=this.getOldIEOffset());return n&&!l&&(n.top+=t(c).scrollTop(),n.left+=t(c).scrollLeft()),n},e.prototype.range=function(){var t;if(c.getSelection)return t=c.getSelection(),t.rangeCount>0?t.getRangeAt(0):null},e}(),n=function(){function e(t){this.$inputor=t,this.domInputor=this.$inputor[0]}return e.prototype.getIEPos=function(){var t,e,n,i,o,r,s;return e=this.domInputor,r=a.selection.createRange(),o=0,r&&r.parentElement()===e&&(i=e.value.replace(/\r\n/g,"\n"),n=i.length,s=e.createTextRange(),s.moveToBookmark(r.getBookmark()),t=e.createTextRange(),t.collapse(!1),o=s.compareEndPoints("StartToEnd",t)>-1?n:-s.moveStart("character",-n)),o},e.prototype.getPos=function(){return a.selection?this.getIEPos():this.domInputor.selectionStart},e.prototype.setPos=function(t){var e,n;return e=this.domInputor,a.selection?(n=e.createTextRange(),n.move("character",t),n.select()):e.setSelectionRange&&e.setSelectionRange(t,t),e},e.prototype.getIEOffset=function(t){var e,n,i,o;return n=this.domInputor.createTextRange(),t||(t=this.getPos()),n.move("character",t),i=n.boundingLeft,o=n.boundingTop,e=n.boundingHeight,{left:i,top:o,height:e}},e.prototype.getOffset=function(e){var n,i,o;return n=this.$inputor,a.selection?(i=this.getIEOffset(e),i.top+=t(c).scrollTop()+n.scrollTop(),i.left+=t(c).scrollLeft()+n.scrollLeft(),i):(i=n.offset(),o=this.getPosition(e),i={left:i.left+o.left-n.scrollLeft(),top:i.top+o.top-n.scrollTop(),height:o.height})},e.prototype.getPosition=function(t){var e,n,o,r,s,a;return e=this.$inputor,o=function(t){return t.replace(/</g,"&lt").replace(/>/g,"&gt").replace(/`/g,"&#96").replace(/"/g,"&quot").replace(/\r\n|\r|\n/g,"<br />")},void 0===t&&(t=this.getPos()),a=e.val().slice(0,t),r="<span>"+o(a)+"</span>",r+="<span id='caret'>|</span>",s=new i(e),n=s.create(r).rect()},e.prototype.getIEPosition=function(t){var e,n,i,o,r;return i=this.getIEOffset(t),n=this.$inputor.offset(),o=i.left-n.left,r=i.top-n.top,e=i.height,{left:o,top:r,height:e}},e}(),i=function(){function e(t){this.$inputor=t}return e.prototype.css_attr=["overflowY","height","width","paddingTop","paddingLeft","paddingRight","paddingBottom","marginTop","marginLeft","marginRight","marginBottom","fontFamily","borderStyle","borderWidth","wordWrap","fontSize","lineHeight","overflowX","text-align"],e.prototype.mirrorCss=function(){var e,n=this;return e={position:"absolute",left:-9999,top:0,zIndex:-2e4,"white-space":"pre-wrap"},t.each(this.css_attr,function(t,i){return e[i]=n.$inputor.css(i)}),e},e.prototype.create=function(e){return this.$mirror=t("<div></div>"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(e),this.$inputor.after(this.$mirror),this},e.prototype.rect=function(){var t,e,n;return t=this.$mirror.find("#caret"),e=t.position(),n={left:e.left,top:e.top,height:t.height()},this.$mirror.remove(),n},e}(),o={contentEditable:function(t){return!(!t[0].contentEditable||"true"!==t[0].contentEditable)}},s={pos:function(t){return t||0===t?this.setPos(t):this.getPos()},position:function(t){return a.selection?this.getIEPosition(t):this.getPosition(t)},offset:function(e){var n,i;return i=this.getOffset(e),l&&(n=t(l).offset(),i.top+=n.top,i.left+=n.left),i}},a=null,c=null,l=null,h=function(t){return l=t,c=t.contentWindow,a=t.contentDocument||c.document},r=function(e,n){var i,o;if(t.isPlainObject(n)&&(o=n.iframe))return e.data("caret-iframe",o),h(o);if(o=e.data("caret-iframe"))return h(o);a=e[0].ownerDocument,c=a.defaultView||a.parentWindow;try{return l=c.frameElement}catch(r){i=r}},t.fn.caret=function(i){var a;return"object"==typeof i?(r(this,i),this):s[i]?(r(this),a=o.contentEditable(this)?new e(this):new n(this),s[i].apply(a,Array.prototype.slice.call(arguments,1))):t.error("Method "+i+" does not exist on jQuery.caret")},t.fn.caret.EditableCaret=e,t.fn.caret.InputCaret=n,t.fn.caret.Utils=o,t.fn.caret.apis=s})}.call(this),function(){!function(t){return"function"==typeof define&&define.amd?define(["jquery"],t):t(window.jQuery)}(function(t){var e,n,i,o,r,s,a,l,c,u=[].slice;i=function(){function e(e){this.current_flag=null,this.controllers={},this.alias_maps={},this.$inputor=t(e),this.iframe=null,this.setIframe(),this.listen()}return e.prototype.setIframe=function(t){var e;if(t)return this.window=t.contentWindow,this.document=t.contentDocument||this.window.document,this.iframe=t,this;this.document=this.$inputor[0].ownerDocument,this.window=this.document.defaultView||this.document.parentWindow;try{return this.iframe=this.window.frameElement}catch(n){e=n}},e.prototype.controller=function(t){return this.controllers[this.alias_maps[t]||t||this.current_flag]},e.prototype.set_context_for=function(t){return this.current_flag=t,this},e.prototype.reg=function(t,e){var n,i;return n=(i=this.controllers)[t]||(i[t]=new r(this,t)),e.alias&&(this.alias_maps[e.alias]=t),n.init(e),this},e.prototype.listen=function(){return this.$inputor.on("keyup.atwhoInner",function(t){return function(e){return t.on_keyup(e)}}(this)).on("keydown.atwhoInner",function(t){return function(e){return t.on_keydown(e)}}(this)).on("scroll.atwhoInner",function(t){return function(){var e;return null!=(e=t.controller())?e.view.hide():void 0}}(this)).on("blur.atwhoInner",function(t){return function(){var e;return(e=t.controller())?e.view.hide(e.get_opt("display_timeout")):void 0}}(this))},e.prototype.shutdown=function(){var t,e,n;n=this.controllers;for(e in n)t=n[e],t.destroy(),delete this.controllers[e];return this.$inputor.off(".atwhoInner")},e.prototype.dispatch=function(){return t.map(this.controllers,function(t){return function(e){var n;return(n=e.get_opt("delay"))?(clearTimeout(t.delayedCallback),t.delayedCallback=setTimeout(function(){return e.look_up()?t.set_context_for(e.at):void 0},n)):e.look_up()?t.set_context_for(e.at):void 0}}(this))},e.prototype.on_keyup=function(e){var n;switch(e.keyCode){case a.ESC:e.preventDefault(),null!=(n=this.controller())&&n.view.hide();break;case a.DOWN:case a.UP:case a.CTRL:t.noop();break;case a.P:case a.N:e.ctrlKey||this.dispatch();break;default:this.dispatch()}},e.prototype.on_keydown=function(e){var n,i;if(n=null!=(i=this.controller())?i.view:void 0,n&&n.visible())switch(e.keyCode){case a.ESC:e.preventDefault(),n.hide();break;case a.UP:e.preventDefault(),n.prev();break;case a.DOWN:e.preventDefault(),n.next();break;case a.P:if(!e.ctrlKey)return;e.preventDefault(),n.prev();break;case a.N:if(!e.ctrlKey)return;e.preventDefault(),n.next();break;case a.TAB:case a.ENTER:if(!n.visible())return;e.preventDefault(),n.choose();break;default:t.noop()}},e}(),r=function(){function n(n,i){this.app=n,this.at=i,this.$inputor=this.app.$inputor,this.id=this.$inputor[0].id||this.uid(),this.setting=null,this.query=null,this.pos=0,this.cur_rect=null,this.range=null,e.append(this.$el=t("<div id='atwho-ground-"+this.id+"'></div>")),this.model=new l(this),this.view=new c(this)}return n.prototype.uid=function(){return(Math.random().toString(16)+"000000000").substr(2,8)+(new Date).getTime()},n.prototype.init=function(e){return this.setting=t.extend({},this.setting||t.fn.atwho["default"],e),this.view.init(),this.model.reload(this.setting.data)},n.prototype.destroy=function(){return this.trigger("beforeDestroy"),this.model.destroy(),this.view.destroy(),this.$el.remove()},n.prototype.call_default=function(){var e,n,i;i=arguments[0],e=2<=arguments.length?u.call(arguments,1):[];try{return s[i].apply(this,e)}catch(o){return n=o,t.error(""+n+" Or maybe At.js doesn't have function "+i)}},n.prototype.trigger=function(t,e){var n,i;return null==e&&(e=[]),e.push(this),n=this.get_opt("alias"),i=n?""+t+"-"+n+".atwho":""+t+".atwho",this.$inputor.trigger(i,e)},n.prototype.callbacks=function(t){return this.get_opt("callbacks")[t]||s[t]},n.prototype.get_opt=function(t){var e;try{return this.setting[t]}catch(n){return e=n,null}},n.prototype.content=function(){return this.$inputor.is("textarea, input")?this.$inputor.val():this.$inputor.text()},n.prototype.catch_query=function(){var t,e,n,i,o,r;return e=this.content(),t=this.$inputor.caret("pos"),r=e.slice(0,t),i=this.callbacks("matcher").call(this,this.at,r,this.get_opt("start_with_space")),"string"==typeof i&&i.length<=this.get_opt("max_len",20)?(o=t-i.length,n=o+i.length,this.pos=o,i={text:i,head_pos:o,end_pos:n},this.trigger("matched",[this.at,i.text])):(i=null,this.view.hide()),this.query=i},n.prototype.rect=function(){var t,e;if(t=this.$inputor.caret({iframe:this.app.iframe}).caret("offset",this.pos-1))return"true"===this.$inputor.attr("contentEditable")&&(t=this.cur_rect||(this.cur_rect=t)||t),e=this.app.document.selection?0:2,{left:t.left,top:t.top,bottom:t.top+t.height+e}},n.prototype.reset_rect=function(){return"true"===this.$inputor.attr("contentEditable")?this.cur_rect=null:void 0},n.prototype.mark_range=function(){return"true"===this.$inputor.attr("contentEditable")&&(this.app.window.getSelection&&(this.range=this.app.window.getSelection().getRangeAt(0)),this.app.document.selection)?this.ie8_range=this.app.document.selection.createRange():void 0},n.prototype.insert_content_for=function(e){var n,i,o;return i=e.data("value"),o=this.get_opt("insert_tpl"),this.$inputor.is("textarea, input")||!o?i:(n=t.extend({},e.data("item-data"),{"atwho-data-value":i,"atwho-at":this.at}),this.callbacks("tpl_eval").call(this,o,n))},n.prototype.insert=function(e,n){var i,o,r,s,a,l,c,u,h,d,p;return i=this.$inputor,"true"===i.attr("contentEditable")&&(r="atwho-view-flag atwho-view-flag-"+(this.get_opt("alias")||this.at),s=""+e+"<span contenteditable='false'>&nbsp;<span>",a="<span contenteditable='false' class='"+r+"'>"+s+"</span>",o=t(a,this.app.document).data("atwho-data-item",n.data("item-data")),this.app.document.selection&&(o=t("<span contenteditable='true'></span>",this.app.document).html(o))),i.is("textarea, input")?(e=""+e,h=i.val(),d=h.slice(0,Math.max(this.query.head_pos-this.at.length,0)),p=""+d+e+" "+h.slice(this.query.end_pos||0),i.val(p),i.caret("pos",d.length+e.length+1)):(c=this.range)?(l=c.startOffset-(this.query.end_pos-this.query.head_pos)-this.at.length,c.setStart(c.endContainer,Math.max(l,0)),c.setEnd(c.endContainer,c.endOffset),c.deleteContents(),c.insertNode(o[0]),c.collapse(!1),u=this.app.window.getSelection(),u.removeAllRanges(),u.addRange(c)):(c=this.ie8_range)&&(c.moveStart("character",this.query.end_pos-this.query.head_pos-this.at.length),c.pasteHTML(s),c.collapse(!1),c.select()),i.is(":focus")||i.focus(),i.change()},n.prototype.render_view=function(t){var e;return e=this.get_opt("search_key"),t=this.callbacks("sorter").call(this,this.query.text,t.slice(0,1001),e),this.view.render(t.slice(0,this.get_opt("limit")))},n.prototype.look_up=function(){var e,n;if(e=this.catch_query())return n=function(t){return t&&t.length>0?this.render_view(t):this.view.hide()},this.model.query(e.text,t.proxy(n,this)),e},n}(),l=function(){function e(t){this.context=t,this.at=this.context.at,this.storage=this.context.$inputor}return e.prototype.destroy=function(){return this.storage.data(this.at,null)},e.prototype.saved=function(){return this.fetch()>0},e.prototype.query=function(t,e){var n,i,o;return n=this.fetch(),i=this.context.get_opt("search_key"),n=this.context.callbacks("filter").call(this.context,t,n,i)||[],o=this.context.callbacks("remote_filter"),n.length>0||!o&&0===n.length?e(n):o.call(this.context,t,e)},e.prototype.fetch=function(){return this.storage.data(this.at)||[]},e.prototype.save=function(t){return this.storage.data(this.at,this.context.callbacks("before_save").call(this.context,t||[]))},e.prototype.load=function(t){return!this.saved()&&t?this._load(t):void 0},e.prototype.reload=function(t){return this._load(t)},e.prototype._load=function(e){return"string"==typeof e?t.ajax(e,{dataType:"json"}).done(function(t){return function(e){return t.save(e)}}(this)):this.save(e)},e}(),c=function(){function e(e){this.context=e,this.$el=t("<div class='atwho-view'><ul class='atwho-view-ul'></ul></div>"),this.timeout_id=null,this.context.$el.append(this.$el),this.bind_event()}return e.prototype.init=function(){var t;return t=this.context.get_opt("alias")||this.context.at.charCodeAt(0),this.$el.attr({id:"at-view-"+t})},e.prototype.destroy=function(){return this.$el.remove()},e.prototype.bind_event=function(){var e;return e=this.$el.find("ul"),e.on("mouseenter.atwho-view","li",function(n){return e.find(".cur").removeClass("cur"),t(n.currentTarget).addClass("cur")}).on("click",function(t){return function(e){return t.choose(),e.preventDefault()}}(this))},e.prototype.visible=function(){return this.$el.is(":visible")},e.prototype.choose=function(){var t,e;return(t=this.$el.find(".cur")).length?(e=this.context.insert_content_for(t),this.context.insert(this.context.callbacks("before_insert").call(this.context,e,t),t),this.context.trigger("inserted",[t]),this.hide()):void 0},e.prototype.reposition=function(e){var n,i;return e.bottom+this.$el.height()-t(window).scrollTop()>t(window).height()&&(e.bottom=e.top-this.$el.height()),n={left:e.left,top:e.bottom},null!=(i=this.context.callbacks("before_reposition"))&&i.call(this.context,n),this.$el.offset(n),this.context.trigger("reposition",[n])},e.prototype.next=function(){var t,e;return t=this.$el.find(".cur").removeClass("cur"),e=t.next(),e.length||(e=this.$el.find("li:first")),e.addClass("cur")},e.prototype.prev=function(){var t,e;return t=this.$el.find(".cur").removeClass("cur"),e=t.prev(),e.length||(e=this.$el.find("li:last")),e.addClass("cur")},e.prototype.show=function(){var t;return this.context.mark_range(),this.visible()||(this.$el.show(),this.context.trigger("shown")),(t=this.context.rect())?this.reposition(t):void 0},e.prototype.hide=function(t){var e;return isNaN(t&&this.visible())?(this.context.reset_rect(),this.$el.hide(),this.context.trigger("hidden")):(e=function(t){return function(){return t.hide()}}(this),clearTimeout(this.timeout_id),this.timeout_id=setTimeout(e,t))},e.prototype.render=function(e){var n,i,o,r,s,a,l;if(!(t.isArray(e)&&e.length>0))return void this.hide();for(this.$el.find("ul").empty(),i=this.$el.find("ul"),s=this.context.get_opt("tpl"),a=0,l=e.length;l>a;a++)o=e[a],o=t.extend({},o,{"atwho-at":this.context.at}),r=this.context.callbacks("tpl_eval").call(this.context,s,o),n=t(this.context.callbacks("highlighter").call(this.context,r,this.context.query.text)),n.data("item-data",o),i.append(n);return this.show(),this.context.get_opt("highlight_first")?i.find("li:first").addClass("cur"):void 0},e}(),a={DOWN:40,UP:38,ESC:27,TAB:9,ENTER:13,CTRL:17,P:80,N:78},s={before_save:function(e){var n,i,o,r;if(!t.isArray(e))return e;for(r=[],i=0,o=e.length;o>i;i++)n=e[i],r.push(t.isPlainObject(n)?n:{name:n});return r},matcher:function(t,e,n){var i,o;return t=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),n&&(t="(?:^|\\s)"+t),o=new RegExp(t+"([A-Za-z0-9_+-]*)$|"+t+"([^\\x00-\\xff]*)$","gi"),i=o.exec(e),i?i[2]||i[1]:null
},filter:function(t,e,n){var i,o,r,s;for(s=[],o=0,r=e.length;r>o;o++)i=e[o],~i[n].toLowerCase().indexOf(t.toLowerCase())&&s.push(i);return s},remote_filter:null,sorter:function(t,e,n){var i,o,r,s;if(!t)return e;for(s=[],o=0,r=e.length;r>o;o++)i=e[o],i.atwho_order=i[n].toLowerCase().indexOf(t.toLowerCase()),i.atwho_order>-1&&s.push(i);return s.sort(function(t,e){return t.atwho_order-e.atwho_order})},tpl_eval:function(t,e){var n;try{return t.replace(/\$\{([^\}]*)\}/g,function(t,n){return e[n]})}catch(i){return n=i,""}},highlighter:function(t,e){var n;return e?(n=new RegExp(">\\s*(\\w*)("+e.replace("+","\\+")+")(\\w*)\\s*<","ig"),t.replace(n,function(t,e,n,i){return"> "+e+"<strong>"+n+"</strong>"+i+" <"})):t},before_insert:function(t){return t}},n={load:function(t,e){var n;return(n=this.controller(t))?n.model.load(e):void 0},getInsertedItemsWithIDs:function(e){var n,i,o;return(n=this.controller(e))?(e&&(e="-"+(n.get_opt("alias")||n.at)),i=[],o=t.map(this.$inputor.find("span.atwho-view-flag"+(e||"")),function(e){var n;return n=t(e).data("atwho-data-item"),i.indexOf(n.id)>-1?void 0:(n.id&&(i.push=n.id),n)}),[i,o]):[null,null]},getInsertedItems:function(t){return n.getInsertedItemsWithIDs.apply(this,[t])[1]},getInsertedIDs:function(t){return n.getInsertedItemsWithIDs.apply(this,[t])[0]},setIframe:function(t){return this.setIframe(t)},run:function(){return this.dispatch()},destroy:function(){return this.shutdown(),this.$inputor.data("atwho",null)}},o={init:function(e){var n,o;return o=(n=t(this)).data("atwho"),o||n.data("atwho",o=new i(this)),o.reg(e.at,e),this}},e=t("<div id='atwho-container'></div>"),t.fn.atwho=function(i){var r,s;return s=arguments,t("body").append(e),r=null,this.filter("textarea, input, [contenteditable=true]").each(function(){var e;return"object"!=typeof i&&i?n[i]?(e=t(this).data("atwho"))?r=n[i].apply(e,Array.prototype.slice.call(s,1)):void 0:t.error("Method "+i+" does not exist on jQuery.caret"):o.init.apply(this,s)}),r||this},t.fn.atwho["default"]={at:void 0,alias:void 0,data:null,tpl:"<li data-value='${atwho-at}${name}'>${name}</li>",insert_tpl:"<span>${atwho-data-value}</span>",callbacks:s,search_key:"name",start_with_space:!0,highlight_first:!0,limit:5,max_len:20,display_timeout:300,delay:null}})}.call(this),!function(){"use strict";var Faye={VERSION:"1.0.0",BAYEUX_VERSION:"1.0",ID_LENGTH:160,JSONP_CALLBACK:"jsonpcallback",CONNECTION_TYPES:["long-polling","cross-origin-long-polling","callback-polling","websocket","eventsource","in-process"],MANDATORY_CONNECTION_TYPES:["long-polling","callback-polling","in-process"],ENV:"undefined"!=typeof window?window:global,extend:function(t,e,n){if(!e)return t;for(var i in e)e.hasOwnProperty(i)&&(t.hasOwnProperty(i)&&n===!1||t[i]!==e[i]&&(t[i]=e[i]));return t},random:function(t){return t=t||this.ID_LENGTH,csprng(t,36)},clientIdFromMessages:function(t){var e=this.filter([].concat(t),function(t){return"/meta/connect"===t.channel});return e[0]&&e[0].clientId},copyObject:function(t){var e,n,i;if(t instanceof Array){for(e=[],n=t.length;n--;)e[n]=Faye.copyObject(t[n]);return e}if("object"==typeof t){e=null===t?null:{};for(i in t)e[i]=Faye.copyObject(t[i]);return e}return t},commonElement:function(t,e){for(var n=0,i=t.length;i>n;n++)if(-1!==this.indexOf(e,t[n]))return t[n];return null},indexOf:function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1},map:function(t,e,n){if(t.map)return t.map(e,n);var i=[];if(t instanceof Array)for(var o=0,r=t.length;r>o;o++)i.push(e.call(n||null,t[o],o));else for(var s in t)t.hasOwnProperty(s)&&i.push(e.call(n||null,s,t[s]));return i},filter:function(t,e,n){if(t.filter)return t.filter(e,n);for(var i=[],o=0,r=t.length;r>o;o++)e.call(n||null,t[o],o)&&i.push(t[o]);return i},asyncEach:function(t,e,n,i){var o=t.length,r=-1,s=0,a=!1,l=function(){return s-=1,r+=1,r===o?n&&n.call(i):void e(t[r],u)},c=function(){if(!a){for(a=!0;s>0;)l();a=!1}},u=function(){s+=1,c()};u()},toJSON:function(t){return this.stringify?this.stringify(t,function(t,e){return this[t]instanceof Array?this[t]:e}):JSON.stringify(t)}};"undefined"!=typeof module?module.exports=Faye:"undefined"!=typeof window&&(window.Faye=Faye),Faye.Class=function(t,e){"function"!=typeof t&&(e=t,t=Object);var n=function(){return this.initialize?this.initialize.apply(this,arguments)||this:this},i=function(){};return i.prototype=t.prototype,n.prototype=new i,Faye.extend(n.prototype,e),n},function(){function t(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(e===t[n])return n;return-1}var e=Faye.EventEmitter=function(){},n="function"==typeof Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};e.prototype.emit=function(t){if("error"===t&&(!this._events||!this._events.error||n(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var e=this._events[t];if(!e)return!1;if("function"==typeof e){switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:var i=Array.prototype.slice.call(arguments,1);e.apply(this,i)}return!0}if(n(e)){for(var i=Array.prototype.slice.call(arguments,1),o=e.slice(),r=0,s=o.length;s>r;r++)o[r].apply(this,i);return!0}return!1},e.prototype.addListener=function(t,e){if("function"!=typeof e)throw Error("addListener only takes instances of Function");return this._events||(this._events={}),this.emit("newListener",t,e),this._events[t]?n(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,this},e.prototype.on=e.prototype.addListener,e.prototype.once=function(t,e){var n=this;return n.on(t,function i(){n.removeListener(t,i),e.apply(this,arguments)}),this},e.prototype.removeListener=function(e,i){if("function"!=typeof i)throw Error("removeListener only takes instances of Function");if(!this._events||!this._events[e])return this;var o=this._events[e];if(n(o)){var r=t(o,i);if(0>r)return this;o.splice(r,1),0==o.length&&delete this._events[e]}else this._events[e]===i&&delete this._events[e];return this},e.prototype.removeAllListeners=function(t){return 0===arguments.length?(this._events={},this):(t&&this._events&&this._events[t]&&(this._events[t]=null),this)},e.prototype.listeners=function(t){return this._events||(this._events={}),this._events[t]||(this._events[t]=[]),n(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]}}(),Faye.Namespace=Faye.Class({initialize:function(){this._used={}},exists:function(t){return this._used.hasOwnProperty(t)},generate:function(){for(var t=Faye.random();this._used.hasOwnProperty(t);)t=Faye.random();return this._used[t]=t},release:function(t){delete this._used[t]}}),function(){var t,e=setTimeout;t="function"==typeof setImmediate?function(t){setImmediate(t)}:"object"==typeof process&&process.nextTick?function(t){process.nextTick(t)}:function(t){e(t,0)};var n=0,i=1,o=2,r=function(t){return t},s=function(t){throw t},a=function(t){if(this._state=n,this._callbacks=[],this._errbacks=[],"function"==typeof t){var e=this;t(function(t){h(e,t)},function(t){d(e,t)})}};a.prototype.then=function(t,e){var n=this;return new a(function(i,o){var r={fulfill:i,reject:o};l(n,t,r),c(n,e,r)})};var l=function(e,o,s){"function"!=typeof o&&(o=r);var a=function(t){u(o,t,s)};e._state===n?e._callbacks.push(a):e._state===i&&t(function(){a(e._value)})},c=function(e,i,r){"function"!=typeof i&&(i=s);var a=function(t){u(i,t,r)};e._state===n?e._errbacks.push(a):e._state===o&&t(function(){a(e._reason)})},u=function(t,e,n){try{var i=t(e);i&&"function"==typeof i.then?i.then(n.fulfill,n.reject):n.fulfill(i)}catch(o){n.reject(o)}},h=a.fulfill=function(t,e){if(t._state===n){t._state=i,t._value=e,t._errbacks=[];for(var o,r=t._callbacks;o=r.shift();)o(e)}},d=a.reject=function(t,e){if(t._state===n){t._state=o,t._reason=e,t._callbacks=[];for(var i,r=t._errbacks;i=r.shift();)i(e)}};a.defer=t,a.pending=function(){var t={};return t.promise=new a(function(e,n){t.fulfill=e,t.reject=n}),t},a.fulfilled=function(t){return new a(function(e){e(t)})},a.rejected=function(t){return new a(function(e,n){n(t)})},void 0===Faye?module.exports=a:Faye.Promise=a}(),Faye.Set=Faye.Class({initialize:function(){this._index={}},add:function(t){var e=void 0!==t.id?t.id:t;return this._index.hasOwnProperty(e)?!1:(this._index[e]=t,!0)},forEach:function(t,e){for(var n in this._index)this._index.hasOwnProperty(n)&&t.call(e,this._index[n])},isEmpty:function(){for(var t in this._index)if(this._index.hasOwnProperty(t))return!1;return!0},member:function(t){for(var e in this._index)if(this._index[e]===t)return!0;return!1},remove:function(t){var e=void 0!==t.id?t.id:t,n=this._index[e];return delete this._index[e],n},toArray:function(){var t=[];return this.forEach(function(e){t.push(e)}),t}}),Faye.URI={isURI:function(t){return t&&t.protocol&&t.host&&t.path},isSameOrigin:function(t){var e=Faye.ENV.location;return t.protocol===e.protocol&&t.hostname===e.hostname&&t.port===e.port},parse:function(t){if("string"!=typeof t)return t;var e,n,i,o,r,s,a={},l=function(e,n){t=t.replace(n,function(t){return a[e]=t,""}),a[e]=a[e]||""};for(l("protocol",/^[a-z]+\:/i),l("host",/^\/\/[^\/\?#]+/),/^\//.test(t)||a.host||(t=Faye.ENV.location.pathname.replace(/[^\/]*$/,"")+t),l("pathname",/^[^\?#]*/),l("search",/^\?[^#]*/),l("hash",/^#.*/),a.protocol=a.protocol||Faye.ENV.location.protocol,a.host?(a.host=a.host.substr(2),e=a.host.split(":"),a.hostname=e[0],a.port=e[1]||""):(a.host=Faye.ENV.location.host,a.hostname=Faye.ENV.location.hostname,a.port=Faye.ENV.location.port),a.pathname=a.pathname||"/",a.path=a.pathname+a.search,n=a.search.replace(/^\?/,""),i=n?n.split("&"):[],s={},o=0,r=i.length;r>o;o++)e=i[o].split("="),s[decodeURIComponent(e[0]||"")]=decodeURIComponent(e[1]||"");return a.query=s,a.href=this.stringify(a),a},stringify:function(t){var e=t.protocol+"//"+t.hostname;return t.port&&(e+=":"+t.port),e+=t.pathname+this.queryString(t.query)+(t.hash||"")},queryString:function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return 0===e.length?"":"?"+e.join("&")}},Faye.Error=Faye.Class({initialize:function(t,e,n){this.code=t,this.params=Array.prototype.slice.call(e),this.message=n},toString:function(){return this.code+":"+this.params.join(",")+":"+this.message}}),Faye.Error.parse=function(t){if(t=t||"",!Faye.Grammar.ERROR.test(t))return new this(null,[],t);var e=t.split(":"),n=parseInt(e[0]),i=e[1].split(","),t=e[2];return new this(n,i,t)},Faye.Error.versionMismatch=function(){return""+new this(300,arguments,"Version mismatch")},Faye.Error.conntypeMismatch=function(){return""+new this(301,arguments,"Connection types not supported")},Faye.Error.extMismatch=function(){return""+new this(302,arguments,"Extension mismatch")},Faye.Error.badRequest=function(){return""+new this(400,arguments,"Bad request")},Faye.Error.clientUnknown=function(){return""+new this(401,arguments,"Unknown client")},Faye.Error.parameterMissing=function(){return""+new this(402,arguments,"Missing required parameter")},Faye.Error.channelForbidden=function(){return""+new this(403,arguments,"Forbidden channel")},Faye.Error.channelUnknown=function(){return""+new this(404,arguments,"Unknown channel")},Faye.Error.channelInvalid=function(){return""+new this(405,arguments,"Invalid channel")},Faye.Error.extUnknown=function(){return""+new this(406,arguments,"Unknown extension")},Faye.Error.publishFailed=function(){return""+new this(407,arguments,"Failed to publish")},Faye.Error.serverError=function(){return""+new this(500,arguments,"Internal server error")},Faye.Deferrable={then:function(t,e){var n=this;return this._promise||(this._promise=new Faye.Promise(function(t,e){n._fulfill=t,n._reject=e})),0===arguments.length?this._promise:this._promise.then(t,e)},callback:function(t,e){return this.then(function(n){t.call(e,n)})},errback:function(t,e){return this.then(null,function(n){t.call(e,n)})},timeout:function(t,e){this.then();var n=this;this._timer=Faye.ENV.setTimeout(function(){n._reject(e)},1e3*t)},setDeferredStatus:function(t,e){this._timer&&Faye.ENV.clearTimeout(this._timer),this.then(),"succeeded"===t?this._fulfill(e):"failed"===t?this._reject(e):delete this._promise}},Faye.Publisher={countListeners:function(t){return this.listeners(t).length},bind:function(t,e,n){var i=Array.prototype.slice,o=function(){e.apply(n,i.call(arguments))};return this._listeners=this._listeners||[],this._listeners.push([t,e,n,o]),this.on(t,o)},unbind:function(t,e,n){this._listeners=this._listeners||[];for(var i,o=this._listeners.length;o--;)i=this._listeners[o],i[0]===t&&(!e||i[1]===e&&i[2]===n)&&(this._listeners.splice(o,1),this.removeListener(t,i[3]))}},Faye.extend(Faye.Publisher,Faye.EventEmitter.prototype),Faye.Publisher.trigger=Faye.Publisher.emit,Faye.Timeouts={addTimeout:function(t,e,n,i){if(this._timeouts=this._timeouts||{},!this._timeouts.hasOwnProperty(t)){var o=this;this._timeouts[t]=Faye.ENV.setTimeout(function(){delete o._timeouts[t],n.call(i)},1e3*e)}},removeTimeout:function(t){this._timeouts=this._timeouts||{};var e=this._timeouts[t];e&&(clearTimeout(e),delete this._timeouts[t])}},Faye.Logging={LOG_LEVELS:{fatal:4,error:3,warn:2,info:1,debug:0},writeLog:function(t,e){if(Faye.logger){var t=Array.prototype.slice.apply(t),n="[Faye",i=this.className,o=t.shift().replace(/\?/g,function(){try{return Faye.toJSON(t.shift())}catch(e){return"[Object]"}});for(var r in Faye)i||"function"==typeof Faye[r]&&this instanceof Faye[r]&&(i=r);i&&(n+="."+i),n+="] ","function"==typeof Faye.logger[e]?Faye.logger[e](n+o):"function"==typeof Faye.logger&&Faye.logger(n+o)}}},function(){for(var t in Faye.Logging.LOG_LEVELS)(function(t){Faye.Logging[t]=function(){this.writeLog(arguments,t)}})(t,Faye.Logging.LOG_LEVELS[t])}(),Faye.Grammar={CHANNEL_NAME:/^\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+(\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+)*$/,CHANNEL_PATTERN:/^(\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+)*\/\*{1,2}$/,ERROR:/^([0-9][0-9][0-9]:(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*(,(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*)*:(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*|[0-9][0-9][0-9]::(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*)$/,VERSION:/^([0-9])+(\.(([a-z]|[A-Z])|[0-9])(((([a-z]|[A-Z])|[0-9])|\-|\_))*)*$/},Faye.Extensible={addExtension:function(t){this._extensions=this._extensions||[],this._extensions.push(t),t.added&&t.added(this)},removeExtension:function(t){if(this._extensions)for(var e=this._extensions.length;e--;)this._extensions[e]===t&&(this._extensions.splice(e,1),t.removed&&t.removed(this))},pipeThroughExtensions:function(t,e,n,i,o){if(this.debug("Passing through ? extensions: ?",t,e),!this._extensions)return i.call(o,e);var r=this._extensions.slice(),s=function(e){if(!e)return i.call(o,e);var a=r.shift();if(!a)return i.call(o,e);var l=a[t];return l?void(l.length>=3?a[t](e,n,s):a[t](e,s)):s(e)};s(e)}},Faye.extend(Faye.Extensible,Faye.Logging),Faye.Channel=Faye.Class({initialize:function(t){this.id=this.name=t},push:function(t){this.trigger("message",t)},isUnused:function(){return 0===this.countListeners("message")}}),Faye.extend(Faye.Channel.prototype,Faye.Publisher),Faye.extend(Faye.Channel,{HANDSHAKE:"/meta/handshake",CONNECT:"/meta/connect",SUBSCRIBE:"/meta/subscribe",UNSUBSCRIBE:"/meta/unsubscribe",DISCONNECT:"/meta/disconnect",META:"meta",SERVICE:"service",expand:function(t){var e=this.parse(t),n=["/**",t],i=e.slice();i[i.length-1]="*",n.push(this.unparse(i));for(var o=1,r=e.length;r>o;o++)i=e.slice(0,o),i.push("**"),n.push(this.unparse(i));return n},isValid:function(t){return Faye.Grammar.CHANNEL_NAME.test(t)||Faye.Grammar.CHANNEL_PATTERN.test(t)},parse:function(t){return this.isValid(t)?t.split("/").slice(1):null},unparse:function(t){return"/"+t.join("/")},isMeta:function(t){var e=this.parse(t);return e?e[0]===this.META:null},isService:function(t){var e=this.parse(t);return e?e[0]===this.SERVICE:null},isSubscribable:function(t){return this.isValid(t)?!this.isMeta(t)&&!this.isService(t):null},Set:Faye.Class({initialize:function(){this._channels={}},getKeys:function(){var t=[];for(var e in this._channels)t.push(e);return t},remove:function(t){delete this._channels[t]},hasSubscription:function(t){return this._channels.hasOwnProperty(t)},subscribe:function(t,e,n){if(e)for(var i,o=0,r=t.length;r>o;o++){i=t[o];var s=this._channels[i]=this._channels[i]||new Faye.Channel(i);s.bind("message",e,n)}},unsubscribe:function(t,e,n){var i=this._channels[t];return i?(i.unbind("message",e,n),i.isUnused()?(this.remove(t),!0):!1):!1},distributeMessage:function(t){for(var e=Faye.Channel.expand(t.channel),n=0,i=e.length;i>n;n++){var o=this._channels[e[n]];o&&o.trigger("message",t.data)}}})}),Faye.Envelope=Faye.Class({initialize:function(t,e){this.id=t.id,this.message=t,void 0!==e&&this.timeout(e/1e3,!1)}}),Faye.extend(Faye.Envelope.prototype,Faye.Deferrable),Faye.Publication=Faye.Class(Faye.Deferrable),Faye.Subscription=Faye.Class({initialize:function(t,e,n,i){this._client=t,this._channels=e,this._callback=n,this._context=i,this._cancelled=!1},cancel:function(){this._cancelled||(this._client.unsubscribe(this._channels,this._callback,this._context),this._cancelled=!0)},unsubscribe:function(){this.cancel()}}),Faye.extend(Faye.Subscription.prototype,Faye.Deferrable),Faye.Client=Faye.Class({UNCONNECTED:1,CONNECTING:2,CONNECTED:3,DISCONNECTED:4,HANDSHAKE:"handshake",RETRY:"retry",NONE:"none",CONNECTION_TIMEOUT:60,DEFAULT_RETRY:5,MAX_REQUEST_SIZE:2048,DEFAULT_ENDPOINT:"/bayeux",INTERVAL:0,initialize:function(t,e){this.info("New client created for ?",t),this._options=e||{},this.endpoint=Faye.URI.parse(t||this.DEFAULT_ENDPOINT),this.endpoints=this._options.endpoints||{},this.transports={},this.cookies=Faye.CookieJar&&new Faye.CookieJar,this.headers={},this.ca=this._options.ca,this._disabled=[],this._retry=this._options.retry||this.DEFAULT_RETRY;for(var n in this.endpoints)this.endpoints[n]=Faye.URI.parse(this.endpoints[n]);this.maxRequestSize=this.MAX_REQUEST_SIZE,this._state=this.UNCONNECTED,this._channels=new Faye.Channel.Set,this._messageId=0,this._responseCallbacks={},this._advice={reconnect:this.RETRY,interval:1e3*(this._options.interval||this.INTERVAL),timeout:1e3*(this._options.timeout||this.CONNECTION_TIMEOUT)},Faye.Event&&void 0!==Faye.ENV.onbeforeunload&&Faye.Event.on(Faye.ENV,"beforeunload",function(){Faye.indexOf(this._disabled,"autodisconnect")<0&&this.disconnect()},this)},disable:function(t){this._disabled.push(t)},setHeader:function(t,e){this.headers[t]=e},handshake:function(t,e){if(this._advice.reconnect!==this.NONE&&this._state===this.UNCONNECTED){this._state=this.CONNECTING;var n=this;this.info("Initiating handshake with ?",Faye.URI.stringify(this.endpoint)),this._selectTransport(Faye.MANDATORY_CONNECTION_TYPES),this._send({channel:Faye.Channel.HANDSHAKE,version:Faye.BAYEUX_VERSION,supportedConnectionTypes:[this._transport.connectionType]},function(i){i.successful?(this._state=this.CONNECTED,this._clientId=i.clientId,this._selectTransport(i.supportedConnectionTypes),this.info("Handshake successful: ?",this._clientId),this.subscribe(this._channels.getKeys(),!0),t&&Faye.Promise.defer(function(){t.call(e)})):(this.info("Handshake unsuccessful"),Faye.ENV.setTimeout(function(){n.handshake(t,e)},this._advice.interval),this._state=this.UNCONNECTED)},this)}},connect:function(t,e){if(this._advice.reconnect!==this.NONE&&this._state!==this.DISCONNECTED){if(this._state===this.UNCONNECTED)return this.handshake(function(){this.connect(t,e)},this);this.callback(t,e),this._state===this.CONNECTED&&(this.info("Calling deferred actions for ?",this._clientId),this.setDeferredStatus("succeeded"),this.setDeferredStatus("unknown"),this._connectRequest||(this._connectRequest=!0,this.info("Initiating connection for ?",this._clientId),this._send({channel:Faye.Channel.CONNECT,clientId:this._clientId,connectionType:this._transport.connectionType},this._cycleConnection,this)))}},disconnect:function(){this._state===this.CONNECTED&&(this._state=this.DISCONNECTED,this.info("Disconnecting ?",this._clientId),this._send({channel:Faye.Channel.DISCONNECT,clientId:this._clientId},function(t){t.successful&&(this._transport.close(),delete this._transport)},this),this.info("Clearing channel listeners for ?",this._clientId),this._channels=new Faye.Channel.Set)},subscribe:function(t,e,n){if(t instanceof Array)return Faye.map(t,function(t){return this.subscribe(t,e,n)},this);var i=new Faye.Subscription(this,t,e,n),o=e===!0,r=this._channels.hasSubscription(t);return r&&!o?(this._channels.subscribe([t],e,n),i.setDeferredStatus("succeeded"),i):(this.connect(function(){this.info("Client ? attempting to subscribe to ?",this._clientId,t),o||this._channels.subscribe([t],e,n),this._send({channel:Faye.Channel.SUBSCRIBE,clientId:this._clientId,subscription:t},function(o){if(!o.successful)return i.setDeferredStatus("failed",Faye.Error.parse(o.error)),this._channels.unsubscribe(t,e,n);var r=[].concat(o.subscription);this.info("Subscription acknowledged for ? to ?",this._clientId,r),i.setDeferredStatus("succeeded")},this)},this),i)},unsubscribe:function(t,e,n){if(t instanceof Array)return Faye.map(t,function(t){return this.unsubscribe(t,e,n)},this);var i=this._channels.unsubscribe(t,e,n);i&&this.connect(function(){this.info("Client ? attempting to unsubscribe from ?",this._clientId,t),this._send({channel:Faye.Channel.UNSUBSCRIBE,clientId:this._clientId,subscription:t},function(t){if(t.successful){var e=[].concat(t.subscription);this.info("Unsubscription acknowledged for ? from ?",this._clientId,e)}},this)},this)},publish:function(t,e){var n=new Faye.Publication;return this.connect(function(){this.info("Client ? queueing published message to ?: ?",this._clientId,t,e),this._send({channel:t,data:e,clientId:this._clientId},function(t){t.successful?n.setDeferredStatus("succeeded"):n.setDeferredStatus("failed",Faye.Error.parse(t.error))},this)},this),n},receiveMessage:function(t){var e,n=t.id;void 0!==t.successful&&(e=this._responseCallbacks[n],delete this._responseCallbacks[n]),this.pipeThroughExtensions("incoming",t,null,function(t){t&&(t.advice&&this._handleAdvice(t.advice),this._deliverMessage(t),e&&e[0].call(e[1],t))},this),this._transportUp!==!0&&(this._transportUp=!0,this.trigger("transport:up"))},messageError:function(t,e){for(var n,i,o=this._retry,r=this,s=0,a=t.length;a>s;s++)i=t[s],n=i.id,e?this._transportSend(i):Faye.ENV.setTimeout(function(){r._transportSend(i)},1e3*o);e||this._transportUp===!1||(this._transportUp=!1,this.trigger("transport:down"))},_selectTransport:function(t){Faye.Transport.get(this,t,this._disabled,function(t){this.debug("Selected ? transport for ?",t.connectionType,Faye.URI.stringify(t.endpoint)),t!==this._transport&&(this._transport&&this._transport.close(),this._transport=t)},this)},_send:function(t,e,n){this._transport&&(t.id=t.id||this._generateMessageId(),this.pipeThroughExtensions("outgoing",t,null,function(t){t&&(e&&(this._responseCallbacks[t.id]=[e,n]),this._transportSend(t))},this))},_transportSend:function(t){if(this._transport){var e=1.2*(this._advice.timeout||1e3*this._retry),n=new Faye.Envelope(t,e);n.errback(function(e){this.messageError([t],e)},this),this._transport.send(n)}},_generateMessageId:function(){return this._messageId+=1,this._messageId>=Math.pow(2,32)&&(this._messageId=0),this._messageId.toString(36)},_handleAdvice:function(t){Faye.extend(this._advice,t),this._advice.reconnect===this.HANDSHAKE&&this._state!==this.DISCONNECTED&&(this._state=this.UNCONNECTED,this._clientId=null,this._cycleConnection())},_deliverMessage:function(t){t.channel&&void 0!==t.data&&(this.info("Client ? calling listeners for ? with ?",this._clientId,t.channel,t.data),this._channels.distributeMessage(t))},_cycleConnection:function(){this._connectRequest&&(this._connectRequest=null,this.info("Closed connection for ?",this._clientId));var t=this;Faye.ENV.setTimeout(function(){t.connect()},this._advice.interval)}}),Faye.extend(Faye.Client.prototype,Faye.Deferrable),Faye.extend(Faye.Client.prototype,Faye.Publisher),Faye.extend(Faye.Client.prototype,Faye.Logging),Faye.extend(Faye.Client.prototype,Faye.Extensible),Faye.Transport=Faye.extend(Faye.Class({MAX_DELAY:0,batching:!0,initialize:function(t,e){this._client=t,this.endpoint=e,this._outbox=[]},close:function(){},encode:function(){return""},send:function(t){var e=t.message;return this.debug("Client ? sending message to ?: ?",this._client._clientId,Faye.URI.stringify(this.endpoint),e),this.batching?(this._outbox.push(t),e.channel===Faye.Channel.HANDSHAKE?this.addTimeout("publish",.01,this.flush,this):(e.channel===Faye.Channel.CONNECT&&(this._connectMessage=e),this.flushLargeBatch(),void this.addTimeout("publish",this.MAX_DELAY,this.flush,this))):this.request([t])},flush:function(){this.removeTimeout("publish"),this._outbox.length>1&&this._connectMessage&&(this._connectMessage.advice={timeout:0}),this.request(this._outbox),this._connectMessage=null,this._outbox=[]},flushLargeBatch:function(){var t=this.encode(this._outbox);if(!(t.length<this._client.maxRequestSize)){var e=this._outbox.pop();this.flush(),e&&this._outbox.push(e)}},receive:function(t,e){for(var n=t.length;n--;)t[n].setDeferredStatus("succeeded");e=[].concat(e),this.debug("Client ? received from ?: ?",this._client._clientId,Faye.URI.stringify(this.endpoint),e);for(var i=0,n=e.length;n>i;i++)this._client.receiveMessage(e[i])},handleError:function(t,e){for(var n=t.length;n--;)t[n].setDeferredStatus("failed",e)},_getCookies:function(){var t=this._client.cookies;return t?t.getCookies({domain:this.endpoint.hostname,path:this.endpoint.path,secure:"https:"===this.endpoint.protocol}).toValueString():""},_storeCookies:function(t){if(t&&this._client.cookies){t=[].concat(t);for(var e,n=0,i=t.length;i>n;n++)e=this._client.cookies.setCookie(t[n]),e=e[0]||e,e.domain=e.domain||this.endpoint.hostname}}}),{get:function(t,e,n,i,o){var r=t.endpoint;Faye.asyncEach(this._transports,function(s,a){var l=s[0],c=s[1],u=t.endpoints[l]||r;return Faye.indexOf(n,l)>=0?a():Faye.indexOf(e,l)<0?(c.isUsable(t,u,function(){}),a()):void c.isUsable(t,u,function(e){if(!e)return a();var n=c.hasOwnProperty("create")?c.create(t,u):new c(t,u);i.call(o,n)})},function(){throw Error("Could not find a usable connection type for "+Faye.URI.stringify(r))})},register:function(t,e){this._transports.push([t,e]),e.prototype.connectionType=t},_transports:[]}),Faye.extend(Faye.Transport.prototype,Faye.Logging),Faye.extend(Faye.Transport.prototype,Faye.Timeouts),Faye.Event={_registry:[],on:function(t,e,n,i){var o=function(){n.call(i)};t.addEventListener?t.addEventListener(e,o,!1):t.attachEvent("on"+e,o),this._registry.push({_element:t,_type:e,_callback:n,_context:i,_handler:o})},detach:function(t,e,n,i){for(var o,r=this._registry.length;r--;)o=this._registry[r],t&&t!==o._element||e&&e!==o._type||n&&n!==o._callback||i&&i!==o._context||(o._element.removeEventListener?o._element.removeEventListener(o._type,o._handler,!1):o._element.detachEvent("on"+o._type,o._handler),this._registry.splice(r,1),o=null)}},void 0!==Faye.ENV.onunload&&Faye.Event.on(Faye.ENV,"unload",Faye.Event.detach,Faye.Event),"object"!=typeof JSON&&(JSON={}),function(){function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,i,o,r,s,a=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?l+"":"null";case"boolean":case"null":return l+"";case"object":if(!l)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,n=0;r>n;n+=1)s[n]=str(n,l)||"null";return o=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,o}if(rep&&"object"==typeof rep)for(r=rep.length,n=0;r>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],o=str(i,l),o&&s.push(quote(i)+(gap?": ":":")+o));else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(o=str(i,l),o&&s.push(quote(i)+(gap?": ":":")+o));return o=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;Faye.stringify=function(t,e,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw Error("JSON.stringify");return str("",{"":t})},"function"!=typeof JSON.stringify&&(JSON.stringify=Faye.stringify),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,i,o=t[e];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(i=walk(o,n),void 0!==i?o[n]=i:delete o[n]);return reviver.call(t,e,o)}var j;if(text+="",cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),Faye.Transport.WebSocket=Faye.extend(Faye.Class(Faye.Transport,{UNCONNECTED:1,CONNECTING:2,CONNECTED:3,batching:!1,isUsable:function(t,e){this.callback(function(){t.call(e,!0)}),this.errback(function(){t.call(e,!1)}),this.connect()},request:function(t){this.callback(function(e){if(e){for(var n=0,i=t.length;i>n;n++)this._pending.add(t[n]);var o=Faye.map(t,function(t){return t.message});e.send(Faye.toJSON(o))}},this),this.connect()},connect:function(){if(!Faye.Transport.WebSocket._unloaded&&(this._state=this._state||this.UNCONNECTED,this._state===this.UNCONNECTED)){this._state=this.CONNECTING;var t=this._createSocket();if(!t)return this.setDeferredStatus("failed");var e=this;t.onopen=function(){t.headers&&e._storeCookies(t.headers["set-cookie"]),e._socket=t,e._pending=new Faye.Set,e._state=e.CONNECTED,e._everConnected=!0,e._ping(),e.setDeferredStatus("succeeded",t)};var n=!1;t.onclose=t.onerror=function(){if(!n){n=!0;var i=e._state===e.CONNECTED;t.onopen=t.onclose=t.onerror=t.onmessage=null,delete e._socket,e._state=e.UNCONNECTED,e.removeTimeout("ping"),e.setDeferredStatus("unknown");var o=e._pending?e._pending.toArray():[];delete e._pending,i?e.handleError(o,!0):e._everConnected?e.handleError(o):e.setDeferredStatus("failed")}},t.onmessage=function(t){var n,i=JSON.parse(t.data),o=[];if(i){i=[].concat(i);for(var r=0,s=i.length;s>r;r++)void 0!==i[r].successful&&(n=e._pending.remove(i[r]),n&&o.push(n));e.receive(o,i)}}}},close:function(){this._socket&&this._socket.close()},_createSocket:function(){var t=Faye.Transport.WebSocket.getSocketUrl(this.endpoint),e={headers:Faye.copyObject(this._client.headers),ca:this._client.ca};return e.headers.Cookie=this._getCookies(),Faye.WebSocket?new Faye.WebSocket.Client(t,[],e):Faye.ENV.MozWebSocket?new MozWebSocket(t):Faye.ENV.WebSocket?new WebSocket(t):void 0},_ping:function(){this._socket&&(this._socket.send("[]"),this.addTimeout("ping",this._client._advice.timeout/2e3,this._ping,this))}}),{PROTOCOLS:{"http:":"ws:","https:":"wss:"},create:function(t,e){var n=t.transports.websocket=t.transports.websocket||{};return n[e.href]=n[e.href]||new this(t,e),n[e.href]},getSocketUrl:function(t){return t=Faye.copyObject(t),t.protocol=this.PROTOCOLS[t.protocol],Faye.URI.stringify(t)},isUsable:function(t,e,n,i){this.create(t,e).isUsable(n,i)}}),Faye.extend(Faye.Transport.WebSocket.prototype,Faye.Deferrable),Faye.Transport.register("websocket",Faye.Transport.WebSocket),Faye.Event&&Faye.Event.on(Faye.ENV,"beforeunload",function(){Faye.Transport.WebSocket._unloaded=!0
}),Faye.Transport.EventSource=Faye.extend(Faye.Class(Faye.Transport,{initialize:function(t,e){if(Faye.Transport.prototype.initialize.call(this,t,e),!Faye.ENV.EventSource)return this.setDeferredStatus("failed");this._xhr=new Faye.Transport.XHR(t,e),e=Faye.copyObject(e),e.pathname+="/"+t._clientId;var n=new EventSource(Faye.URI.stringify(e)),i=this;n.onopen=function(){i._everConnected=!0,i.setDeferredStatus("succeeded")},n.onerror=function(){i._everConnected?i._client.messageError([]):(i.setDeferredStatus("failed"),n.close())},n.onmessage=function(t){i.receive([],JSON.parse(t.data))},this._socket=n},close:function(){this._socket&&(this._socket.onopen=this._socket.onerror=this._socket.onmessage=null,this._socket.close(),delete this._socket)},isUsable:function(t,e){this.callback(function(){t.call(e,!0)}),this.errback(function(){t.call(e,!1)})},encode:function(t){return this._xhr.encode(t)},request:function(t){this._xhr.request(t)}}),{isUsable:function(t,e,n,i){var o=t._clientId;return o?void Faye.Transport.XHR.isUsable(t,e,function(o){return o?void this.create(t,e).isUsable(n,i):n.call(i,!1)},this):n.call(i,!1)},create:function(t,e){var n=t.transports.eventsource=t.transports.eventsource||{},i=t._clientId;e=Faye.copyObject(e),e.pathname+="/"+(i||"");var o=Faye.URI.stringify(e);return n[o]=n[o]||new this(t,e),n[o]}}),Faye.extend(Faye.Transport.EventSource.prototype,Faye.Deferrable),Faye.Transport.register("eventsource",Faye.Transport.EventSource),Faye.Transport.XHR=Faye.extend(Faye.Class(Faye.Transport,{encode:function(t){var e=Faye.map(t,function(t){return t.message});return Faye.toJSON(e)},request:function(t){var e=this.endpoint.path,n=Faye.ENV.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest,i=this;n.open("POST",e,!0),n.setRequestHeader("Content-Type","application/json"),n.setRequestHeader("Pragma","no-cache"),n.setRequestHeader("X-Requested-With","XMLHttpRequest");var o=this._client.headers;for(var r in o)o.hasOwnProperty(r)&&n.setRequestHeader(r,o[r]);var s=function(){n.abort()};Faye.Event.on(Faye.ENV,"beforeunload",s),n.onreadystatechange=function(){if(n&&4===n.readyState){var e=null,o=n.status,r=n.responseText,a=o>=200&&300>o||304===o||1223===o;if(Faye.Event.detach(Faye.ENV,"beforeunload",s),n.onreadystatechange=function(){},n=null,!a)return i.handleError(t);try{e=JSON.parse(r)}catch(l){}e?i.receive(t,e):i.handleError(t)}},n.send(this.encode(t))}}),{isUsable:function(t,e,n,i){n.call(i,Faye.URI.isSameOrigin(e))}}),Faye.Transport.register("long-polling",Faye.Transport.XHR),Faye.Transport.CORS=Faye.extend(Faye.Class(Faye.Transport,{encode:function(t){var e=Faye.map(t,function(t){return t.message});return"message="+encodeURIComponent(Faye.toJSON(e))},request:function(t){var e,n=Faye.ENV.XDomainRequest?XDomainRequest:XMLHttpRequest,i=new n,o=this._client.headers,r=this;if(i.open("POST",Faye.URI.stringify(this.endpoint),!0),i.setRequestHeader){i.setRequestHeader("Pragma","no-cache");for(e in o)o.hasOwnProperty(e)&&i.setRequestHeader(e,o[e])}var s=function(){return i?(i.onload=i.onerror=i.ontimeout=i.onprogress=null,void(i=null)):!1};i.onload=function(){var e=null;try{e=JSON.parse(i.responseText)}catch(n){}s(),e?r.receive(t,e):r.handleError(t)},i.onerror=i.ontimeout=function(){s(),r.handleError(t)},i.onprogress=function(){},i.send(this.encode(t))}}),{isUsable:function(t,e,n,i){if(Faye.URI.isSameOrigin(e))return n.call(i,!1);if(Faye.ENV.XDomainRequest)return n.call(i,e.protocol===Faye.ENV.location.protocol);if(Faye.ENV.XMLHttpRequest){var o=new Faye.ENV.XMLHttpRequest;return n.call(i,void 0!==o.withCredentials)}return n.call(i,!1)}}),Faye.Transport.register("cross-origin-long-polling",Faye.Transport.CORS),Faye.Transport.JSONP=Faye.extend(Faye.Class(Faye.Transport,{encode:function(t){var e=Faye.map(t,function(t){return t.message}),n=Faye.copyObject(this.endpoint);return n.query.message=Faye.toJSON(e),n.query.jsonp="__jsonp"+Faye.Transport.JSONP._cbCount+"__",Faye.URI.stringify(n)},request:function(t){var e=Faye.map(t,function(t){return t.message}),n=document.getElementsByTagName("head")[0],i=document.createElement("script"),o=Faye.Transport.JSONP.getCallbackName(),r=Faye.copyObject(this.endpoint),s=this;r.query.message=Faye.toJSON(e),r.query.jsonp=o,Faye.ENV[o]=function(e){if(!Faye.ENV[o])return!1;Faye.ENV[o]=void 0;try{delete Faye.ENV[o]}catch(n){}i.parentNode.removeChild(i),s.receive(t,e)},i.type="text/javascript",i.src=Faye.URI.stringify(r),n.appendChild(i)}}),{_cbCount:0,getCallbackName:function(){return this._cbCount+=1,"__jsonp"+this._cbCount+"__"},isUsable:function(t,e,n,i){n.call(i,!0)}}),Faye.Transport.register("callback-polling",Faye.Transport.JSONP)}(),function(t){"undefined"==typeof t.fn.each2&&t.fn.extend({each2:function(e){for(var n=t([0]),i=-1,o=this.length;++i<o&&(n.context=n[0]=this[i])&&e.call(n[0],i,n)!==!1;);return this}})}(jQuery),function(t,e){"use strict";function n(t,e){var n,i=0,o=e.length;if("undefined"==typeof t)return-1;if(t.constructor===String){for(;o>i;i+=1)if(0===t.localeCompare(e[i]))return i}else for(;o>i;i+=1)if(n=e[i],n.constructor===String){if(0===n.localeCompare(t))return i}else if(n===t)return i;return-1}function i(t,n){return t===n?!0:t===e||n===e?!1:null===t||null===n?!1:t.constructor===String?0===t.localeCompare(n):n.constructor===String?0===n.localeCompare(t):!1}function o(e,n){var i,o,r;if(null===e||e.length<1)return[];for(i=e.split(n),o=0,r=i.length;r>o;o+=1)i[o]=t.trim(i[o]);return i}function r(t){return t.outerWidth(!1)-t.width()}function s(n){var i="keyup-change-value";n.bind("keydown",function(){t.data(n,i)===e&&t.data(n,i,n.val())}),n.bind("keyup",function(){var o=t.data(n,i);o!==e&&n.val()!==o&&(t.removeData(n,i),n.trigger("keyup-change"))})}function a(n){n.bind("mousemove",function(n){var i=I;(i===e||i.x!==n.pageX||i.y!==n.pageY)&&t(n.target).trigger("mousemove-filtered",n)})}function l(t,n,i){i=i||e;var o;return function(){var e=arguments;window.clearTimeout(o),o=window.setTimeout(function(){n.apply(i,e)},t)}}function c(t){var e,n=!1;return function(){return n===!1&&(e=t(),n=!0),e}}function u(t,e){var i=l(t,function(t){e.trigger("scroll-debounced",t)});e.bind("scroll",function(t){n(t.target,e.get())>=0&&i(t)})}function h(t){t.preventDefault(),t.stopPropagation()}function d(t){t.preventDefault(),t.stopImmediatePropagation()}function p(e){if(!E){var n=e[0].currentStyle||window.getComputedStyle(e[0],null);E=t("<div></div>").css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"}),t("body").append(E)}return E.text(e.val()),E.width()}function f(t,e,n,i){var o=t.toUpperCase().indexOf(e.toUpperCase()),r=e.length;return 0>o?void n.push(i(t)):(n.push(i(t.substring(0,o))),n.push("<span class='select2-match'>"),n.push(i(t.substring(o,o+r))),n.push("</span>"),void n.push(i(t.substring(o+r,t.length))))}function m(e){var n,i=0,o=null,r=e.quietMillis||100;return function(s){window.clearTimeout(n),n=window.setTimeout(function(){i+=1;var n=i,r=e.data,a=e.transport||t.ajax,l=e.traditional||!1,c=e.type||"GET";r=r.call(this,s.term,s.page,s.context),null!==o&&o.abort(),o=a.call(null,{url:"function"==typeof e.url?e.url():e.url,dataType:e.dataType,data:r,type:c,traditional:l,success:function(t){if(!(i>n)){var o=e.results(t,s.page);s.callback(o)}}})},r)}}function g(e){var n,i=e,o=function(t){return""+t.text};return t.isArray(i)||(o=i.text,t.isFunction(o)||(n=i.text,o=function(t){return t[n]}),i=i.results),function(e){var n,r=e.term,s={results:[]};return""===r?void e.callback({results:i}):(n=function(i,s){var a,l;if(i=i[0],i.children){a={};for(l in i)i.hasOwnProperty(l)&&(a[l]=i[l]);a.children=[],t(i.children).each2(function(t,e){n(e,a.children)}),(a.children.length||e.matcher(r,o(a)))&&s.push(a)}else e.matcher(r,o(i))&&s.push(i)},t(i).each2(function(t,e){n(e,s.results)}),void e.callback(s))}}function v(n){return t.isFunction(n)?n:function(i){var o=i.term,r={results:[]};t(n).each(function(){var t=this.text!==e,n=t?this.text:this;(""===o||i.matcher(o,n))&&r.results.push(t?this:{id:this,text:this})}),i.callback(r)}}function y(e){if(t.isFunction(e))return!0;if(!e)return!1;throw new Error("formatterName must be a function or a falsy value")}function b(e){return t.isFunction(e)?e():e}function _(e){var n=0;return t.each(e,function(t,e){e.children?n+=_(e.children):n++}),n}function w(t,n,o,r){var s,a,l,c,u,h=t,d=!1;if(!r.createSearchChoice||!r.tokenSeparators||r.tokenSeparators.length<1)return e;for(;;){for(a=-1,l=0,c=r.tokenSeparators.length;c>l&&(u=r.tokenSeparators[l],a=t.indexOf(u),!(a>=0));l++);if(0>a)break;if(s=t.substring(0,a),t=t.substring(a+u.length),s.length>0&&(s=r.createSearchChoice(s,n),s!==e&&null!==s&&r.id(s)!==e&&null!==r.id(s))){for(d=!1,l=0,c=n.length;c>l;l++)if(i(r.id(s),r.id(n[l]))){d=!0;break}d||o(s)}}return 0!=h.localeCompare(t)?t:void 0}function k(e,n){var i=function(){};return i.prototype=new e,i.prototype.constructor=i,i.prototype.parent=e.prototype,i.prototype=t.extend(i.prototype,n),i}if(window.Select2===e){var C,x,S,T,$,E,I,A;C={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(t){switch(t=t.which?t.which:t){case C.LEFT:case C.RIGHT:case C.UP:case C.DOWN:return!0}return!1},isControl:function(t){var e=t.which;switch(e){case C.SHIFT:case C.CTRL:case C.ALT:return!0}return t.metaKey?!0:!1},isFunctionKey:function(t){return t=t.which?t.which:t,t>=112&&123>=t}},A=t(document),$=function(){var t=1;return function(){return t++}}(),A.bind("mousemove",function(t){I={x:t.pageX,y:t.pageY}}),A.ready(function(){A.bind("mousedown touchend",function(n){var i,o=t(n.target).closest("div.select2-container").get(0),r=null;o&&(A.find("div.select2-container-active").each(function(){this!==o&&t(this).data("select2").blur()}),r=t(o).data("select2").dropdown.get(0)),o=r||t(n.target).closest("div.select2-drop").get(0),A.find("div.select2-drop-active").each(function(){this!==o&&t(this).data("select2").blur()}),o=t(n.target),i=o.attr("for"),"LABEL"===n.target.tagName&&i&&i.length>0&&(i=i.replace(/([\[\].])/g,"\\$1"),o=t("#"+i),o=o.data("select2"),o!==e&&(o.focus(),n.preventDefault()))})}),x=k(Object,{bind:function(t){var e=this;return function(){t.apply(e,arguments)}},init:function(n){var i,o,r=".select2-results";this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==e&&null!==n.element.data("select2")&&this.destroy(),this.enabled=!0,this.container=this.createContainer(),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+$()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=c(function(){return n.element.closest("body")}),n.element.attr("class")!==e&&this.container.addClass(n.element.attr("class").replace(/validate\[[\S ]+] ?/,"")),this.container.css(b(n.containerCss)),this.container.addClass(b(n.containerCssClass)),this.opts.element.data("select2",this).hide().before(this.container),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),this.dropdown.addClass(b(n.dropdownCssClass)),this.dropdown.data("select2",this),this.results=i=this.container.find(r),this.search=o=this.container.find("input.select2-input"),o.attr("tabIndex",this.opts.element.attr("tabIndex")),this.resultsPage=0,this.context=null,this.initContainer(),this.initContainerWidth(),a(this.results),this.dropdown.delegate(r,"mousemove-filtered",this.bind(this.highlightUnderEvent)),u(80,this.results),this.dropdown.delegate(r,"scroll-debounced",this.bind(this.loadMoreIfNeeded)),t.fn.mousewheel&&i.mousewheel(function(t,e,n,o){var r=i.scrollTop();o>0&&0>=r-o?(i.scrollTop(0),h(t)):0>o&&i.get(0).scrollHeight-i.scrollTop()+o<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),h(t))}),s(o),o.bind("keyup-change",this.bind(this.updateResults)),o.bind("focus",function(){o.addClass("select2-focused")," "===o.val()&&o.val("")}),o.bind("blur",function(){o.removeClass("select2-focused")}),this.dropdown.delegate(r,"mouseup",this.bind(function(e){t(e.target).closest(".select2-result-selectable:not(.select2-disabled)").length>0?(this.highlightUnderEvent(e),this.selectHighlighted(e)):this.focusSearch(),h(e)})),this.dropdown.bind("click mouseup mousedown",function(t){t.stopPropagation()}),t.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),(n.element.is(":disabled")||n.element.is("[readonly='readonly']"))&&this.disable()},destroy:function(){var t=this.opts.element.data("select2");t!==e&&(t.container.remove(),t.dropdown.remove(),t.opts.element.removeData("select2").unbind(".select2").show())},prepareOpts:function(n){var r,s,a,l;if(r=n.element,"select"===r.get(0).tagName.toLowerCase()&&(this.select=s=n.element),s&&t.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),n=t.extend({},{populateResults:function(i,o,r){var s,a=this.opts.id,l=this;(s=function(i,o,c){var u,h,d,p,f,m,g,v,y,b;for(i=n.sortResults(i,o,r),u=0,h=i.length;h>u;u+=1)d=i[u],f=d.disabled===!0,p=!f&&a(d)!==e,m=d.children&&d.children.length>0,g=t("<li></li>"),g.addClass("select2-results-dept-"+c),g.addClass("select2-result"),g.addClass(p?"select2-result-selectable":"select2-result-unselectable"),f&&g.addClass("select2-disabled"),m&&g.addClass("select2-result-with-children"),g.addClass(l.opts.formatResultCssClass(d)),v=t("<div></div>"),v.addClass("select2-result-label"),b=n.formatResult(d,v,r),b!==e&&v.html(b),g.append(v),m&&(y=t("<ul></ul>"),y.addClass("select2-result-sub"),s(d.children,y,c+1),g.append(y)),g.data("select2-data",d),o.append(g)})(o,i,0)}},t.fn.select2.defaults,n),"function"!=typeof n.id&&(a=n.id,n.id=function(t){return t[a]}),s?(n.query=this.bind(function(n){var o,s,a,l={results:[],more:!1},c=n.term;a=function(t,e){var o;t.is("option")?n.matcher(c,t.text(),t)&&e.push({id:t.attr("value"),text:t.text(),element:t.get(),css:t.attr("class"),disabled:i(t.attr("disabled"),"disabled")}):t.is("optgroup")&&(o={text:t.attr("label"),children:[],element:t.get(),css:t.attr("class")},t.children().each2(function(t,e){a(e,o.children)}),o.children.length>0&&e.push(o))},o=r.children(),this.getPlaceholder()!==e&&o.length>0&&(s=o[0],""===t(s).text()&&(o=o.not(s))),o.each2(function(t,e){a(e,l.results)}),n.callback(l)}),n.id=function(t){return t.id},n.formatResultCssClass=function(t){return t.css}):"query"in n||("ajax"in n?(l=n.element.data("ajax-url"),l&&l.length>0&&(n.ajax.url=l),n.query=m(n.ajax)):"data"in n?n.query=g(n.data):"tags"in n&&(n.query=v(n.tags),n.createSearchChoice===e&&(n.createSearchChoice=function(t){return{id:t,text:t}}),n.initSelection=function(e,r){var s=[];t(o(e.val(),n.separator)).each(function(){var e=this,o=this,r=n.tags;t.isFunction(r)&&(r=r()),t(r).each(function(){return i(this.id,e)?(o=this.text,!1):void 0}),s.push({id:e,text:o})}),r(s)})),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");return n},monitorSource:function(){this.opts.element.bind("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()}))},triggerChange:function(e){e=e||{},e=t.extend({},e,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(e),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},enable:function(){this.enabled||(this.enabled=!0,this.container.removeClass("select2-container-disabled"),this.opts.element.removeAttr("disabled"))},disable:function(){this.enabled&&(this.close(),this.enabled=!1,this.container.addClass("select2-container-disabled"),this.opts.element.attr("disabled","disabled"))},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var e,n,i,o=this.container.offset(),r=this.container.outerHeight(!1),s=this.container.outerWidth(!1),a=this.dropdown.outerHeight(!1),l=t(window).scrollLeft()+document.documentElement.clientWidth,c=t(window).scrollTop()+document.documentElement.clientHeight,u=o.top+r,h=o.left,d=c>=u+a,p=o.top-a>=this.body().scrollTop(),f=this.dropdown.outerWidth(!1),m=l>=h+f,g=this.dropdown.hasClass("select2-drop-above");"static"!==this.body().css("position")&&(e=this.body().offset(),u-=e.top,h-=e.left),g?(n=!0,!p&&d&&(n=!1)):(n=!1,!d&&p&&(n=!0)),m||(h=o.left+s-f),n?(u=o.top-a,this.container.addClass("select2-drop-above"),this.dropdown.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")),i=t.extend({top:u,left:h,width:s},b(this.opts.dropdownCss)),this.dropdown.css(i)},shouldOpen:function(){var e;return this.opened()?!1:(e=t.Event("open"),this.opts.element.trigger(e),!e.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(window.setTimeout(this.bind(this.opening),1),!0):!1},opening:function(){var e=this.containerId,n=this.containerSelector,i="scroll."+e,o="resize."+e;this.container.parents().each(function(){t(this).bind(i,function(){var e=t(n);0==e.length&&t(this).unbind(i),e.select2("close")})}),window.setTimeout(function(){t(window).bind(o,function(){var e=t(n);0==e.length&&t(window).unbind(o),e.select2("close")})},10),this.clearDropdownAlignmentPreference()," "===this.search.val()&&this.search.val(""),this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.updateResults(!0),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active"),this.ensureHighlightVisible(),this.focusSearch()},close:function(){if(this.opened()){var e=this;this.container.parents().each(function(){t(this).unbind("scroll."+e.containerId)}),t(window).unbind("resize."+this.containerId),this.clearDropdownAlignmentPreference(),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),this.clearSearch(),this.opts.element.trigger(t.Event("close"))}},clearSearch:function(){},ensureHighlightVisible:function(){var e,n,i,o,r,s,a,l=this.results;if(n=this.highlight(),!(0>n)){if(0==n)return void l.scrollTop(0);e=l.find(".select2-result-selectable"),i=t(e[n]),o=i.offset().top+i.outerHeight(!0),n===e.length-1&&(a=l.find("li.select2-more-results"),a.length>0&&(o=a.offset().top+a.outerHeight(!0))),r=l.offset().top+l.outerHeight(!0),o>r&&l.scrollTop(l.scrollTop()+(o-r)),s=i.offset().top-l.offset().top,0>s&&"none"!=i.css("display")&&l.scrollTop(l.scrollTop()+s)}},moveHighlight:function(e){for(var n=this.results.find(".select2-result-selectable"),i=this.highlight();i>-1&&i<n.length;){i+=e;var o=t(n[i]);if(o.hasClass("select2-result-selectable")&&!o.hasClass("select2-disabled")){this.highlight(i);break}}},highlight:function(e){var i=this.results.find(".select2-result-selectable").not(".select2-disabled");return 0===arguments.length?n(i.filter(".select2-highlighted")[0],i.get()):(e>=i.length&&(e=i.length-1),0>e&&(e=0),i.removeClass("select2-highlighted"),t(i[e]).addClass("select2-highlighted"),void this.ensureHighlightVisible())},countSelectableResults:function(){return this.results.find(".select2-result-selectable").not(".select2-disabled").length},highlightUnderEvent:function(e){var n=t(e.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var i=this.results.find(".select2-result-selectable");this.highlight(i.index(n))}else 0==n.length&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},loadMoreIfNeeded:function(){var t,e=this.results,n=e.find("li.select2-more-results"),i=this.resultsPage+1,o=this,r=this.search.val(),s=this.context;0!==n.length&&(t=n.offset().top-e.offset().top-e.height(),t<=this.opts.loadMorePadding&&(n.addClass("select2-active"),this.opts.query({term:r,page:i,context:s,matcher:this.opts.matcher,callback:this.bind(function(t){o.opened()&&(o.opts.populateResults.call(this,e,t.results,{term:r,page:i,context:s}),t.more===!0?(n.detach().appendTo(e).text(o.opts.formatLoadMore(i+1)),window.setTimeout(function(){o.loadMoreIfNeeded()},10)):n.remove(),o.positionDropdown(),o.resultsPage=i)})})))},tokenize:function(){},updateResults:function(n){function o(){c.scrollTop(0),l.removeClass("select2-active"),h.positionDropdown()}function r(t){c.html(t),o()}var s,a,l=this.search,c=this.results,u=this.opts,h=this;if(n===!0||this.showSearchInput!==!1&&this.opened()){if(l.addClass("select2-active"),u.maximumSelectionSize>=1&&(s=this.data(),t.isArray(s)&&s.length>=u.maximumSelectionSize&&y(u.formatSelectionTooBig,"formatSelectionTooBig")))return void r("<li class='select2-selection-limit'>"+u.formatSelectionTooBig(u.maximumSelectionSize)+"</li>");if(l.val().length<u.minimumInputLength)return void r(y(u.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+u.formatInputTooShort(l.val(),u.minimumInputLength)+"</li>":"");if(u.formatSearching()&&r("<li class='select2-searching'>"+u.formatSearching()+"</li>"),u.maximumInputLength&&l.val().length>u.maximumInputLength)return void r(y(u.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+u.formatInputTooLong(l.val(),u.maximumInputLength)+"</li>":"");a=this.tokenize(),a!=e&&null!=a&&l.val(a),this.resultsPage=1,u.query({term:l.val(),page:this.resultsPage,context:null,matcher:u.matcher,callback:this.bind(function(s){var a;if(this.opened()){if(this.context=s.context===e?null:s.context,this.opts.createSearchChoice&&""!==l.val()&&(a=this.opts.createSearchChoice.call(null,l.val(),s.results),a!==e&&null!==a&&h.id(a)!==e&&null!==h.id(a)&&0===t(s.results).filter(function(){return i(h.id(this),h.id(a))}).length&&s.results.unshift(a)),0===s.results.length&&y(u.formatNoMatches,"formatNoMatches"))return void r("<li class='select2-no-results'>"+u.formatNoMatches(l.val())+"</li>");c.empty(),h.opts.populateResults.call(this,c,s.results,{term:l.val(),page:this.resultsPage,context:null}),s.more===!0&&y(u.formatLoadMore,"formatLoadMore")&&(c.append("<li class='select2-more-results'>"+h.opts.escapeMarkup(u.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){h.loadMoreIfNeeded()},10)),this.postprocessResults(s,n),o()}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.dropdown.removeClass("select2-drop-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.opts.element.triggerHandler("blur")},focusSearch:function(){this.search.show(),this.search.focus(),window.setTimeout(this.bind(function(){this.search.show(),this.search.focus(),this.search.val(this.search.val())}),10)},selectHighlighted:function(t){var e=this.highlight(),n=this.results.find(".select2-highlighted").not(".select2-disabled"),i=n.closest(".select2-result-selectable").data("select2-data");i&&(n.addClass("select2-disabled"),this.highlight(e),this.onSelect(i,t))},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){function n(){var n,i,o,r,s;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(n=this.opts.element.attr("style"),n!==e)for(i=n.split(";"),r=0,s=i.length;s>r;r+=1)if(o=i[r].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/),null!==o&&o.length>=1)return o[1];return"resolve"===this.opts.width?(n=this.opts.element.css("width"),n.indexOf("%")>0?n:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return t.isFunction(this.opts.width)?this.opts.width():this.opts.width}var i=n.call(this);null!==i&&this.container.attr("style","width: "+i)}}),S=k(x,{createContainer:function(){var e=t("<div></div>",{"class":"select2-container"}).html(["    <a href='javascript:void(0)' onclick='return false;' class='select2-choice'>","   <span></span><abbr class='select2-search-choice-close' style='display:none;'></abbr>","   <div><b></b></div>","</a>","    <div class='select2-drop select2-offscreen'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return e},opening:function(){this.search.show(),this.parent.opening.apply(this,arguments),this.dropdown.removeClass("select2-offscreen")},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.dropdown.removeAttr("style").addClass("select2-offscreen").insertAfter(this.selection).show())},focus:function(){this.close(),this.selection.focus()},isFocused:function(){return this.selection[0]===document.activeElement},cancel:function(){this.parent.cancel.apply(this,arguments),this.selection.focus()},initContainer:function(){var t,e=this.container,n=this.dropdown,i=!1;this.selection=t=e.find(".select2-choice"),this.search.bind("keydown",this.bind(function(t){if(this.enabled){if(t.which===C.PAGE_UP||t.which===C.PAGE_DOWN)return void h(t);if(this.opened())switch(t.which){case C.UP:case C.DOWN:return this.moveHighlight(t.which===C.UP?-1:1),void h(t);case C.TAB:case C.ENTER:return this.selectHighlighted(),void h(t);case C.ESC:return this.cancel(t),void h(t)}else{if(t.which===C.TAB||C.isControl(t)||C.isFunctionKey(t)||t.which===C.ESC)return;if(this.opts.openOnEnter===!1&&t.which===C.ENTER)return;if(this.open(),t.which===C.ENTER)return}}})),this.search.bind("focus",this.bind(function(){this.selection.attr("tabIndex","-1")})),this.search.bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active"),window.setTimeout(this.bind(function(){var t=this.opts.element.attr("tabIndex")||0;t?this.selection.attr("tabIndex",t):this.selection.removeAttr("tabIndex")}),10)})),t.delegate("abbr","mousedown",this.bind(function(t){this.enabled&&(this.clear(),d(t),this.close(),this.triggerChange(),this.selection.focus())})),t.bind("mousedown",this.bind(function(){i=!0,this.opened()?(this.close(),this.selection.focus()):this.enabled&&this.open(),i=!1})),n.bind("mousedown",this.bind(function(){this.search.focus()})),t.bind("focus",this.bind(function(){this.container.addClass("select2-container-active"),this.search.attr("tabIndex","-1")})),t.bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active"),window.setTimeout(this.bind(function(){this.search.attr("tabIndex",this.opts.element.attr("tabIndex")||0)}),10)})),t.bind("keydown",this.bind(function(t){return this.enabled?t.which==C.DOWN||t.which==C.UP||t.which==C.ENTER&&this.opts.openOnEnter?(this.open(),void h(t)):t.which==C.DELETE||t.which==C.BACKSPACE?(this.opts.allowClear&&this.clear(),void h(t)):void 0:void 0})),t.bind("keypress",this.bind(function(t){var e=String.fromCharCode(t.which);this.search.val(e),this.open()})),this.setPlaceholder(),this.search.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")}))},clear:function(){this.opts.element.val(""),this.selection.find("span").empty(),this.selection.removeData("select2-data"),this.setPlaceholder()},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text())this.close(),this.setPlaceholder();else{var t=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==e&&null!==n&&(t.updateSelection(n),t.close(),t.setPlaceholder())})}},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments);return"select"===e.element.get(0).tagName.toLowerCase()&&(e.initSelection=function(e,n){var i=e.find(":selected");t.isFunction(n)&&n({id:i.attr("value"),text:i.text(),element:i})}),e},setPlaceholder:function(){var t=this.getPlaceholder();if(""===this.opts.element.val()&&t!==e){if(this.select&&""!==this.select.find("option:first").text())return;this.selection.find("span").html(this.opts.escapeMarkup(t)),this.selection.addClass("select2-default"),this.selection.find("abbr").hide()}},postprocessResults:function(e,n){var o=0,r=this,s=!0;this.results.find(".select2-result-selectable").each2(function(t,e){return i(r.id(e.data("select2-data")),r.opts.element.val())?(o=t,!1):void 0}),this.highlight(o),n===!0&&(s=this.showSearchInput=_(e.results)>=this.opts.minimumResultsForSearch,this.dropdown.find(".select2-search")[s?"removeClass":"addClass"]("select2-search-hidden"),t(this.dropdown,this.container)[s?"addClass":"removeClass"]("select2-with-searchbox"))},onSelect:function(t,e){var n=this.opts.element.val();this.opts.element.val(this.id(t)),this.updateSelection(t),this.close(),e&&e.noFocus||this.selection.focus(),i(n,this.id(t))||this.triggerChange()},updateSelection:function(t){var n,i=this.selection.find("span");this.selection.data("select2-data",t),i.empty(),n=this.opts.formatSelection(t,i),n!==e&&i.append(this.opts.escapeMarkup(n)),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==e&&this.selection.find("abbr").show()},val:function(){var t,n=null,i=this;if(0===arguments.length)return this.opts.element.val();if(t=arguments[0],this.select)this.select.val(t).find(":selected").each2(function(t,e){return n={id:e.attr("value"),text:e.text()},!1}),this.updateSelection(n),this.setPlaceholder(),this.triggerChange();else{if(this.opts.initSelection===e)throw new Error("cannot call val() if initSelection() is not defined");if(!t)return this.clear(),void this.triggerChange();this.opts.element.val(t),this.opts.initSelection(this.opts.element,function(t){i.opts.element.val(t?i.id(t):""),i.updateSelection(t),i.setPlaceholder(),i.triggerChange()})}},clearSearch:function(){this.search.val("")},data:function(t){var n;return 0===arguments.length?(n=this.selection.data("select2-data"),n==e&&(n=null),n):void(t&&""!==t?(this.opts.element.val(t?this.id(t):""),this.updateSelection(t)):this.clear())}}),T=k(x,{createContainer:function(){var e=t("<div></div>",{"class":"select2-container select2-container-multi"}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi' style='display:none;'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return e},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments);return"select"===e.element.get(0).tagName.toLowerCase()&&(e.initSelection=function(e,n){var i=[];e.find(":selected").each2(function(t,e){i.push({id:e.attr("value"),text:e.text(),element:e})}),t.isFunction(n)&&n(i)}),e},initContainer:function(){var e,n=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=e=this.container.find(n),this.search.bind("keydown",this.bind(function(t){if(this.enabled){if(t.which===C.BACKSPACE&&""===this.search.val()){this.close();var n,i=e.find(".select2-search-choice-focus");if(i.length>0)return this.unselect(i.first()),this.search.width(10),void h(t);n=e.find(".select2-search-choice:not(.select2-locked)"),n.length>0&&n.last().addClass("select2-search-choice-focus")}else e.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");if(this.opened())switch(t.which){case C.UP:case C.DOWN:return this.moveHighlight(t.which===C.UP?-1:1),void h(t);case C.ENTER:case C.TAB:return this.selectHighlighted(),void h(t);case C.ESC:return this.cancel(t),void h(t)}t.which===C.TAB||C.isControl(t)||C.isFunctionKey(t)||t.which===C.BACKSPACE||t.which===C.ESC||(this.opts.openOnEnter!==!1||t.which!==C.ENTER)&&(this.open(),(t.which===C.PAGE_UP||t.which===C.PAGE_DOWN)&&h(t))}})),this.search.bind("keyup",this.bind(this.resizeSearch)),this.search.bind("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.clearSearch(),t.stopImmediatePropagation()})),this.container.delegate(n,"mousedown",this.bind(function(e){this.enabled&&(t(e.target).closest(".select2-search-choice").length>0||(this.clearPlaceholder(),this.open(),this.focusSearch(),e.preventDefault()))
})),this.container.delegate(n,"focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.clearSearch()},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.search.removeAttr("disabled"))},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.search.attr("disabled",!0))},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var t=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==e&&null!==n&&(t.updateSelection(n),t.close(),t.clearSearch())})}},clearSearch:function(){var t=this.getPlaceholder();t!==e&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(t).addClass("select2-default"),this.resizeSearch()):this.search.val(" ").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")?this.search.val("").removeClass("select2-default"):" "===this.search.val()&&this.search.val("")},opening:function(){this.parent.opening.apply(this,arguments),this.clearPlaceholder(),this.resizeSearch(),this.focusSearch()},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(e){var i=[],o=[],r=this;t(e).each(function(){n(r.id(this),i)<0&&(i.push(r.id(this)),o.push(this))}),e=o,this.selection.find(".select2-search-choice").remove(),t(e).each(function(){r.addSelectedChoice(this)}),r.postprocessResults()},tokenize:function(){var t=this.search.val();t=this.opts.tokenizer(t,this.data(),this.bind(this.onSelect),this.opts),null!=t&&t!=e&&(this.search.val(t),t.length>0&&this.open())},onSelect:function(t,e){this.addSelectedChoice(t),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.positionDropdown()):this.close(),this.triggerChange({added:t}),e&&e.noFocus||this.focusSearch()},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var i,o=!n.locked,r=t("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),s=t("<li class='select2-search-choice select2-locked'><div></div></li>"),a=o?r:s,l=this.id(n),c=this.getVal();i=this.opts.formatSelection(n,a.find("div")),i!=e&&a.find("div").replaceWith("<div>"+this.opts.escapeMarkup(i)+"</div>"),o&&a.find(".select2-search-choice-close").bind("mousedown",h).bind("click dblclick",this.bind(function(e){this.enabled&&(t(e.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(t(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),h(e))})).bind("focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),a.data("select2-data",n),a.insertBefore(this.searchContainer),c.push(l),this.setVal(c)},unselect:function(t){var e,i,o=this.getVal();if(t=t.closest(".select2-search-choice"),0===t.length)throw"Invalid argument: "+t+". Must be .select2-search-choice";e=t.data("select2-data"),i=n(this.id(e),o),i>=0&&(o.splice(i,1),this.setVal(o),this.select&&this.postprocessResults()),t.remove(),this.triggerChange({removed:e})},postprocessResults:function(){var t=this.getVal(),e=this.results.find(".select2-result-selectable"),i=this.results.find(".select2-result-with-children"),o=this;e.each2(function(e,i){var r=o.id(i.data("select2-data"));n(r,t)>=0?i.addClass("select2-disabled").removeClass("select2-result-selectable"):i.removeClass("select2-disabled").addClass("select2-result-selectable")}),i.each2(function(t,e){e.is(".select2-result-selectable")||0!=e.find(".select2-result-selectable").length?e.removeClass("select2-disabled"):e.addClass("select2-disabled")}),-1==this.highlight()&&e.each2(function(t,e){return!e.hasClass("select2-disabled")&&e.hasClass("select2-result-selectable")?(o.highlight(0),!1):void 0})},resizeSearch:function(){var t,e,n,i,o,s=r(this.search);t=p(this.search)+10,e=this.search.offset().left,n=this.selection.width(),i=this.selection.offset().left,o=n-(e-i)-s,t>o&&(o=n-s),40>o&&(o=n-s),0>=o&&(o=t),this.search.width(o)},getVal:function(){var t;return this.select?(t=this.select.val(),null===t?[]:t):(t=this.opts.element.val(),o(t,this.opts.separator))},setVal:function(e){var i;this.select?this.select.val(e):(i=[],t(e).each(function(){n(this,i)<0&&i.push(this)}),this.opts.element.val(0===i.length?"":i.join(this.opts.separator)))},val:function(){var n,i=[],o=this;if(0===arguments.length)return this.getVal();if(n=arguments[0],!n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void this.triggerChange();if(this.setVal(n),this.select)this.select.find(":selected").each(function(){i.push({id:t(this).attr("value"),text:t(this).text()})}),this.updateSelection(i),this.triggerChange();else{if(this.opts.initSelection===e)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(e){var n=t(e).map(o.id);o.setVal(n),o.updateSelection(e),o.clearSearch(),o.triggerChange()})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var e=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){e.push(n.opts.id(t(this).data("select2-data")))}),this.setVal(e),this.triggerChange()},data:function(e){var n,i=this;return 0===arguments.length?this.selection.find(".select2-search-choice").map(function(){return t(this).data("select2-data")}).get():(e||(e=[]),n=t.map(e,function(t){return i.opts.id(t)}),this.setVal(n),this.updateSelection(e),this.clearSearch(),void 0)}}),t.fn.select2=function(){var i,o,r,s,a=Array.prototype.slice.call(arguments,0),l=["val","destroy","opened","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","disable","positionDropdown","data"];return this.each(function(){if(0===a.length||"object"==typeof a[0])i=0===a.length?{}:t.extend({},a[0]),i.element=t(this),"select"===i.element.get(0).tagName.toLowerCase()?s=i.element.attr("multiple"):(s=i.multiple||!1,"tags"in i&&(i.multiple=s=!0)),o=s?new T:new S,o.init(i);else{if("string"!=typeof a[0])throw"Invalid arguments to select2 plugin: "+a;if(n(a[0],l)<0)throw"Unknown method: "+a[0];if(r=e,o=t(this).data("select2"),o===e)return;if(r="container"===a[0]?o.container:o[a[0]].apply(o,a.slice(1)),r!==e)return!1}}),r===e?this:r},t.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(t,e,n){var i=[];return f(t.text,n.term,i,this.escapeMarkup),i.join("")},formatSelection:function(t){return t?t.text:e},sortResults:function(t){return t},formatResultCssClass:function(){return e},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(t,e){var n=e-t.length;return"Please enter "+n+" more character"+(1==n?"":"s")},formatInputTooLong:function(t,e){var n=t.length-e;return"Please enter "+n+" less character"+(1==n?"":"s")},formatSelectionTooBig:function(t){return"You can only select "+t+" item"+(1==t?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(t){return t.id},matcher:function(t,e){return e.toUpperCase().indexOf(t.toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:w,escapeMarkup:function(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;","/":"&#47;"};return String(t).replace(/[&<>"'/\\]/g,function(t){return e[t[0]]})},blurOnChange:!1,selectOnBlur:!1},window.Select2={query:{ajax:m,local:g,tags:v},util:{debounce:l,markMatch:f},"class":{"abstract":x,single:S,multi:T}}}}(jQuery),function(){var t,e,n,i,o,r,s={}.hasOwnProperty;r="undefined"!=typeof exports&&null!==exports?exports:this,e=function(t){this.message=t},e.prototype=new Error,o={prefix:"",default_url_options:{}},t={GROUP:1,CAT:2,SYMBOL:3,OR:4,STAR:5,LITERAL:6,SLASH:7,DOT:8},n={serialize:function(t,e){var n,i,o,a,l,c,u,h;if(null==e&&(e=null),!t)return"";if(!e&&"object"!==this.get_object_type(t))throw new Error("Url parameters should be a javascript hash");if(r.jQuery)return l=r.jQuery.param(t),l?l:"";switch(c=[],this.get_object_type(t)){case"array":for(i=u=0,h=t.length;h>u;i=++u)n=t[i],c.push(this.serialize(n,e+"[]"));break;case"object":for(o in t)s.call(t,o)&&(a=t[o],null!=a&&(null!=e&&(o=""+e+"["+o+"]"),c.push(this.serialize(a,o))));break;default:t&&c.push(""+encodeURIComponent(e.toString())+"="+encodeURIComponent(t.toString()))}return c.length?c.join("&"):""},clean_path:function(t){var e;return t=t.split("://"),e=t.length-1,t[e]=t[e].replace(/\/+/g,"/"),t.join("://")},set_default_url_options:function(t,e){var n,i,r,s,a;for(a=[],n=r=0,s=t.length;s>r;n=++r)i=t[n],!e.hasOwnProperty(i)&&o.default_url_options.hasOwnProperty(i)&&a.push(e[i]=o.default_url_options[i]);return a},extract_anchor:function(t){var e;return e="",t.hasOwnProperty("anchor")&&(e="#"+t.anchor,delete t.anchor),e},extract_trailing_slash:function(t){var e;return e=!1,o.default_url_options.hasOwnProperty("trailing_slash")&&(e=o.default_url_options.trailing_slash),t.hasOwnProperty("trailing_slash")&&(e=t.trailing_slash,delete t.trailing_slash),e},extract_options:function(t,e){var n;return n=e[e.length-1],e.length>t||null!=n&&"object"===this.get_object_type(n)&&!this.look_like_serialized_model(n)?e.pop():{}},look_like_serialized_model:function(t){return"id"in t||"to_param"in t},path_identifier:function(t){var e;return 0===t?"0":t?(e=t,"object"===this.get_object_type(t)&&(e="to_param"in t?t.to_param:"id"in t?t.id:t,"function"===this.get_object_type(e)&&(e=e.call(t))),e.toString()):""},clone:function(t){var e,n,i;if(null==t||"object"!==this.get_object_type(t))return t;n=t.constructor();for(i in t)s.call(t,i)&&(e=t[i],n[i]=e);return n},prepare_parameters:function(t,e,n){var i,o,r,s,a;for(o=this.clone(n)||{},i=s=0,a=t.length;a>s;i=++s)r=t[i],i<e.length&&(o[r]=e[i]);return o},build_path:function(t,e,i,o){var r,s,a,l,c,u,h;if(o=Array.prototype.slice.call(o),s=this.extract_options(t.length,o),o.length>t.length)throw new Error("Too many parameters provided for path");return a=this.prepare_parameters(t,o,s),this.set_default_url_options(e,a),r=this.extract_anchor(a),c=this.extract_trailing_slash(a),l=""+this.get_prefix()+this.visit(i,a),u=n.clean_path(""+l),c===!0&&(u=u.replace(/(.*?)[\/]?$/,"$1/")),(h=this.serialize(a)).length&&(u+="?"+h),u+=r},visit:function(n,i,o){var r,s,a,l,c,u;switch(null==o&&(o=!1),c=n[0],r=n[1],a=n[2],c){case t.GROUP:return this.visit(r,i,!0);case t.STAR:return this.visit_globbing(r,i,!0);case t.LITERAL:case t.SLASH:case t.DOT:return r;case t.CAT:return s=this.visit(r,i,o),l=this.visit(a,i,o),!o||s&&l?""+s+l:"";case t.SYMBOL:if(u=i[r],null!=u)return delete i[r],this.path_identifier(u);if(o)return"";throw new e("Route parameter missing: "+r);default:throw new Error("Unknown Rails node type")}},visit_globbing:function(t,e,n){var i,o,r,s;return r=t[0],i=t[1],o=t[2],i.replace(/^\*/i,"")!==i&&(t[1]=i=i.replace(/^\*/i,"")),s=e[i],null==s?this.visit(t,e,n):(e[i]=function(){switch(this.get_object_type(s)){case"array":return s.join("/");default:return s}}.call(this),this.visit(t,e,n))},get_prefix:function(){var t;return t=o.prefix,""!==t&&(t=t.match("/$")?t:""+t+"/"),t},_classToTypeCache:null,_classToType:function(){var t,e,n,i;if(null!=this._classToTypeCache)return this._classToTypeCache;for(this._classToTypeCache={},i="Boolean Number String Function Array Date RegExp Object Error".split(" "),e=0,n=i.length;n>e;e++)t=i[e],this._classToTypeCache["[object "+t+"]"]=t.toLowerCase();return this._classToTypeCache},get_object_type:function(t){return r.jQuery&&null!=r.jQuery.type?r.jQuery.type(t):null==t?""+t:"object"==typeof t||"function"==typeof t?this._classToType()[Object.prototype.toString.call(t)]||"object":typeof t}},i=function(){var t;return t=function(e,n){var i,o;return o=n?n.split("."):[],o.length?(i=o.shift(),e[i]=e[i]||{},t(e[i],o.join("."))):void 0},t(r,"Routes"),r.Routes={bookmarks_path:function(){return n.build_path([],["format"],[2,[2,[7,"/",!1],[6,"bookmarks",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},collection_note_path:function(){return n.build_path(["id"],["format"],[2,[2,[2,[2,[7,"/",!1],[6,"collection_notes",!1]],[7,"/",!1]],[3,"id",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},collection_notes_path:function(){return n.build_path([],["format"],[2,[2,[7,"/",!1],[6,"collection_notes",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},destroy_user_session_path:function(){return n.build_path([],["format"],[2,[2,[7,"/",!1],[6,"sign_out",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},edit_editor_newsletter_path:function(){return n.build_path(["id"],["format"],[2,[2,[2,[2,[2,[2,[2,[2,[7,"/",!1],[6,"editor",!1]],[7,"/",!1]],[6,"newsletters",!1]],[7,"/",!1]],[3,"id",!1]],[7,"/",!1]],[6,"edit",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},editable_collections_user_path:function(){return n.build_path(["id"],["format"],[2,[2,[2,[2,[2,[2,[2,[2,[7,"/",!1],[6,"users",!1]],[7,"/",!1]],[3,"id",!1]],[7,"/",!1]],[6,"collections",!1]],[7,"/",!1]],[6,"editable",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},editor_newsletter_path:function(){return n.build_path(["id"],["format"],[2,[2,[2,[2,[2,[2,[7,"/",!1],[6,"editor",!1]],[7,"/",!1]],[6,"newsletters",!1]],[7,"/",!1]],[3,"id",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},editor_newsletters_path:function(){return n.build_path([],["format"],[2,[2,[2,[2,[7,"/",!1],[6,"editor",!1]],[7,"/",!1]],[6,"newsletters",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},fetch_collection_editor_collection_path:function(){return n.build_path(["id"],["format"],[2,[2,[2,[2,[2,[2,[2,[2,[7,"/",!1],[6,"editor",!1]],[7,"/",!1]],[6,"collections",!1]],[7,"/",!1]],[3,"id",!1]],[7,"/",!1]],[6,"fetch_collection",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},fetch_notebook_editor_notebook_path:function(){return n.build_path(["id"],["format"],[2,[2,[2,[2,[2,[2,[2,[2,[7,"/",!1],[6,"editor",!1]],[7,"/",!1]],[6,"notebooks",!1]],[7,"/",!1]],[3,"id",!1]],[7,"/",!1]],[6,"fetch_notebook",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},fetch_public_note_editor_note_path:function(){return n.build_path(["id"],["format"],[2,[2,[2,[2,[2,[2,[2,[2,[7,"/",!1],[6,"editor",!1]],[7,"/",!1]],[6,"notes",!1]],[7,"/",!1]],[3,"id",!1]],[7,"/",!1]],[6,"fetch_public_note",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},fetch_user_editor_user_path:function(){return n.build_path(["id"],["format"],[2,[2,[2,[2,[2,[2,[2,[2,[7,"/",!1],[6,"editor",!1]],[7,"/",!1]],[6,"users",!1]],[7,"/",!1]],[3,"id",!1]],[7,"/",!1]],[6,"fetch_user",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},following_collections_path:function(){return n.build_path([],["format"],[2,[2,[2,[2,[7,"/",!1],[6,"collections",!1]],[7,"/",!1]],[6,"following",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},list_notebook_path:function(){return n.build_path(["id"],["format"],[2,[2,[2,[2,[2,[2,[7,"/",!1],[6,"notebooks",!1]],[7,"/",!1]],[3,"id",!1]],[7,"/",!1]],[6,"latest",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},load_reading_url_path:function(){return n.build_path([],["format"],[2,[2,[7,"/",!1],[6,"load_reading_url",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},message_inbox_path:function(){return n.build_path([],["format"],[2,[2,[2,[2,[7,"/",!1],[6,"messages",!1]],[7,"/",!1]],[6,"inbox",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},new_editor_newsletter_path:function(){return n.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",!1],[6,"editor",!1]],[7,"/",!1]],[6,"newsletters",!1]],[7,"/",!1]],[6,"new",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},note_further_reading_path:function(){return n.build_path(["note_id","id"],["format"],[2,[2,[2,[2,[2,[2,[2,[2,[7,"/",!1],[6,"notes",!1]],[7,"/",!1]],[3,"note_id",!1]],[7,"/",!1]],[6,"further_readings",!1]],[7,"/",!1]],[3,"id",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},note_further_readings_path:function(){return n.build_path(["note_id"],["format"],[2,[2,[2,[2,[2,[2,[7,"/",!1],[6,"notes",!1]],[7,"/",!1]],[3,"note_id",!1]],[7,"/",!1]],[6,"further_readings",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},notifications_path:function(){return n.build_path([],["format"],[2,[2,[7,"/",!1],[6,"notifications",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},preferences_path:function(){return n.build_path([],["format"],[2,[2,[7,"/",!1],[6,"preferences",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},root_path:function(){return n.build_path([],[],[7,"/",!1],arguments)},settings_path:function(){return n.build_path([],["format"],[2,[2,[7,"/",!1],[6,"settings",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},show_collection_path:function(){return n.build_path(["id"],["format"],[2,[2,[2,[2,[7,"/",!1],[6,"collection",!1]],[7,"/",!1]],[3,"id",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},show_note_path:function(){return n.build_path(["slug"],["format"],[2,[2,[2,[2,[7,"/",!1],[6,"p",!1]],[7,"/",!1]],[3,"slug",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},top_weekly_path:function(){return n.build_path([],["format"],[2,[2,[2,[2,[7,"/",!1],[6,"top",!1]],[7,"/",!1]],[6,"weekly",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},undismiss_comment_path:function(){return n.build_path(["id"],["format"],[2,[2,[2,[2,[2,[2,[7,"/",!1],[6,"comments",!1]],[7,"/",!1]],[3,"id",!1]],[7,"/",!1]],[6,"undismiss",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},update_further_reading_state_path:function(){return n.build_path([],["format"],[2,[2,[7,"/",!1],[6,"update_further_reading_state",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},user_path:function(){return n.build_path(["id"],["format"],[2,[2,[2,[2,[7,"/",!1],[6,"users",!1]],[7,"/",!1]],[3,"id",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)},user_timeline_path:function(){return n.build_path([],["format"],[2,[2,[7,"/",!1],[6,"timeline",!1]],[1,[2,[8,".",!1],[3,"format",!1]],!1]],arguments)}},r.Routes.options=o,r.Routes},"function"==typeof define&&define.amd?define([],function(){return i()}):i()}.call(this),function(){window.Maleskine={}}.call(this),function(){Maleskine.SocialIcons={host:"http://baijii-common.b0.upaiyun.com",icon:function(t,e,n){return"<img src='"+Maleskine.SocialIcons.host+"/social_icons/"+e+"x"+n+"/"+t+".png'>"}}}.call(this),function(){Maleskine.Settings={emoji_host:"http://assets.jianshu.io",asset_host:"http://jianshu-prd.b0.upaiyun.com",faye_url:"http://faye.jianshu.io:28888/pubsub",weibo:{appKey:"1881139527"},douban:{appKey:"07b4f47aa74e2448171edd6ff5ea6cd8"},official_weibo:{weibo:"\u7b80\u4e66",tweibo:"jianshuio",twitter:"jianshuio"},mention_official_account:function(t){var e;return(e=Maleskine.Settings.official_weibo[t])?I18n.t("share.official_account",{official_account:e}):""}}}.call(this),function(){Maleskine.BaseModule=function(){function t(t){var e,n,i;this.options=t,i=this.options;for(e in i)n=i[e],this[e]=n;this.elements||(this.elements=this.constructor.elements),this.events||(this.events=this.constructor.events),this.elements&&this.refreshElements(),this.events&&this.delegateEvents(this.events)}return t.prototype.eventSplitter=/^(\S+)\s*(.*)$/,t.prototype.refreshElements=function(){var t,e,n,i;n=this.elements,i=[];for(t in n)e=n[t],i.push(this[e]=this.$(t));return i},t.prototype.delegateEvents=function(t){var e,n,i,o,r,s;s=[];for(n in t){if(o=t[n],"function"==typeof o)o=function(t){return function(e){return function(){return e.apply(t,arguments),!0}}}(this)(o);else{if(!this[o])throw new Error(""+o+" doesn't exist");o=function(t){return function(e){return function(){return t[e].apply(t,arguments),!0}}}(this)(o)}i=n.match(this.eventSplitter),e=i[1],r=i[2],s.push(""===r?this.el.bind(e,o):this.el.delegate(r,e,o))}return s},t.prototype.$=function(t){return $(t,this.el)},t.prototype.notyInfo=function(t){return noty({text:t,layout:"topCenter",type:"information",timeout:2200,theme:"maleskineTheme"})},t.prototype.notyError=function(t){return noty({text:t,layout:"topCenter",type:"error",timeout:3500,theme:"maleskineTheme"})},t.prototype.setCookie=function(t,e){return Maleskine.Utils.setCookie(t,e)},t.prototype.infiniteScroll=function(){return $(".pagination").length||$("#list-container .load-more").length>0?($(window).scroll(function(){var t;if($(".pagination").length>0){if(t=$(".pagination .next").children("a").attr("href"),t&&$(window).scrollTop()>$(document).height()-$(window).height()-500)return $(".pagination").text(""),$.getScript(t)}else if($("#list-container .load-more").length>0&&(t=$("#list-container .load-more .ladda-button").data("url"),t&&$(window).scrollTop()>$(document).height()-$(window).height()-500))return $("#list-container .load-more").text(""),$.getScript(t)}),$(window).scroll()):void 0},t.prototype.getURLParmeter=function(t){var e,n,i,o,r,s,a;for(e=window.location.search.substring(1),i=e.split("&"),a=[],r=0,s=i.length;s>r;r++)o=i[r],n=o.split("="),a.push(n[0]===t?n[1]:void 0);return a},t.prototype.scrollToAnchor=function(t){var e;return e=$("#"+t),"undefined"!=typeof e.offset()?$("html, body").animate({scrollTop:e.offset().top},1e3):void 0},t}()}.call(this),function(){Maleskine.BrowserDetector={isMac:function(){return $("body").hasClass("mac")},isWin:function(){return $("body").hasClass("mac")},isIE8:function(){return $("html").hasClass("ie8")||$("body").hasClass("ie8")},isIE9:function(){return $("html").hasClass("ie9")||$("body").hasClass("ie9")},isIE10:function(){return $("body").hasClass("ie10")},isMozilla:function(){return $("body").hasClass("mozilla")},isIE11:function(){return $("body").hasClass("ie11")},isIE:function(){return $("body").hasClass("ie")},lessThanIE8:function(){return $("html").hasClass("lt-ie8")},isMobile:function(){return null!=Modernizr.touch&&Modernizr.touch}}}.call(this),function(){!function(t){return t.fn.padding=function(t){return parseInt(this.css("padding-"+t),10)},t.fn.cssHeight=function(){return parseInt(this.css("height"),10)}}(jQuery)}.call(this),function(){Maleskine.Utils={regexps:{acceptableImage:/(\.|\/)(jpe?g|png|gif)$/i},setCookie:function(t,e){var n,i;return n=new Date,i=n.getTime(),i+=31536e9,n.setTime(i),document.cookie=""+t+"="+e+"; expires="+n.toGMTString()+"; path=/"},image_tag:function(){return function(t,e){var n;return null==e&&(e={}),n='<img src="'+Maleskine.Settings.asset_host+"/assets/"+t+'" ',null!=e["class"]&&(n+='class="'+e["class"]+'"'),n+=" />"}}(this),toTitleCase:function(t){return t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})},fromClassNameToClassName:function(t){return null!=t?(t=t.replace(/\-/g," "),t=Maleskine.Utils.toTitleCase(t),t.replace(/\s/g,"")):void 0},removeHtmlTags:function(){return function(t){var e;return e=/<\/?(a|abbr|address|area|article|aside|audio|b|base|bdi|bdo|blockquote|body|br|button|canvas|caption|cite|code|col|colgroup|command|data|datagrid|datalist|dd|del|details|dfn|div|dl|dt|em|embed|eventsource|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|head|header|hgroup|hr|html|i|iframe|img|input|ins|kbd|font|keygen|label|legend|li|link|mark|map|menu|meta|meter|nav|noscript|object|ol|optgroup|option|output|p|param|pre|progress|q|ruby|rp|rt|s|samp|script|section|select|small|source|span|strong|style|sub|summary|sup|table|tbody|td|textarea|tfoot|th|thead|time|title|tr|track|u|ul|var|video|wbr).*?\/?>/gim,t.replace(e,"")}}(this),findNodeWithTags:function(t,e){var n;for($.isArray(e)||(e=[e]);t;){if(3!==t.nodeType&&(n=e.indexOf(t.tagName),-1!==n))return t;t=t.parentNode}return null},secureRandom:function(t){var e,n,i;for(null==t&&(t=5),i="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=0;t>e;)i+=n.charAt(Math.floor(Math.random()*n.length)),e++;return i},isAcceptableImageType:function(t){return Maleskine.Utils.regexps.acceptableImage.test(t)},setDay:function(){return function(){return $("body").removeClass("reader-night-mode").addClass("reader-day-mode"),Maleskine.Utils.setCookie("read_mode","day"),$.ajax({url:Routes.preferences_path(),type:"PUT",data:{read_mode:"day"}})}}(this),setNight:function(){return $("body").removeClass("reader-day-mode").addClass("reader-night-mode"),Maleskine.Utils.setCookie("read_mode","night"),$.ajax({url:Routes.preferences_path(),type:"PUT",data:{read_mode:"night"}})},setFont1:function(){return $("body").removeClass("reader-font2").addClass("reader-font1"),Maleskine.Utils.setCookie("default_font","font1"),$.ajax({url:Routes.preferences_path(),type:"PUT",data:{default_font:"font1"}})},setFont2:function(){return $("body").removeClass("reader-font1").addClass("reader-font2"),Maleskine.Utils.setCookie("default_font","font2"),$.ajax({url:Routes.preferences_path(),type:"PUT",data:{default_font:"font2"}})}}}.call(this),function(){Maleskine.ShareScripts={share:function(t,e,n,i,o,r,s){var a,l;return e=e.replace(/'/,"%2527"),l=r?I18n.t("reading.social_sharing.self_share_note_text",{note_title:e}):I18n.t("reading.social_sharing.reader_share_note_text",{note_title:e,user:o}),l+=Maleskine.Settings.mention_official_account(t),null!=n&&(n=n.replace(/'/,"%2527"),l=""+l+" \u300c"+n+"\u300d"),a=Maleskine.ShareScripts.getShareUrl(t,e,l,i,s),"javascript:void(function(){var d=document;var r='"+a+"';var x=function(){if(!window.open(r,'"+t+"','toolbar=0,status=0,resizable=1,scrollbars=yes,status=1,width=440,height=430,left='+(screen.width-440)/2+',top='+(screen.height-430)/2))location.href=r};if(/Firefox/.test(navigator.userAgent)){setTimeout(x,0)}else{x()}}())"},getShareUrl:function(t,e,n,i,o){var r;switch(e=encodeURIComponent(e),n=encodeURIComponent(n),i=encodeURIComponent(i),t){case"weibo":return r="http://service.weibo.com/share/share.php?appkey="+Maleskine.Settings.weibo.appKey+"&title="+encodeURIComponent(n)+"&url="+encodeURIComponent(i)+"&searchPic=false&style=simple",o.length>0&&(r+="&pic="+encodeURIComponent(o[0])),r;case"twitter":return"http://twitter.com/share?url="+i+"&text="+n+"&related=jianshuio";case"douban":return"http://www.douban.com/recommend/?url="+i+"&title="+e+"&v=1";case"tweibo":return"http://share.v.t.qq.com/index.php?c=share&a=index&url="+i+"&title="+n;case"qzone":return"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+i+"&title="+n;case"facebook":return"http://www.facebook.com/sharer.php?s=100&p[url]="+i+"&p[title]="+e+"&p[summary]="+n;case"google_plus":return"http://plus.google.com/share?url="+i;case"renren":return"http://widget.renren.com/dialog/share?resourceUrl="+i+"&description="+n+"&title="+e}}}}.call(this),function(){Maleskine.Emoji=["smile","blush","smiley","relaxed","wink","heart_eyes","kissing_heart","kissing_closed_eyes","flushed","grin","relieved","stuck_out_tongue_winking_eye","stuck_out_tongue_closed_eyes","unamused","smirk","sweat","pensive","confounded","disappointed_relieved","cold_sweat","fearful","persevere","cry","sob","joy","scream","angry","sleepy","mask","innocent","yum","anguished","frowning","hushed","dizzy_face","stuck_out_tongue","no_mouth","sunglasses","sweat_smile","worried","+1","-1","clap","v","pray","fist","heart","broken_heart","heartbeat","sparkling_heart","cupid","beer","beers","birthday","heavy_exclamation_mark","bangbang","interrobang","underage","no_bicycles","no_mobile_phones","u7981","up","sunny","moon","high_brightness","first_quarter_moon_with_face","zap","snowflake","cloud","tada","bear","cat","cow","dog","hamster","monkey_face","rabbit","tiger","turtle","whale","whale2","dolphin","crocodile","dragon_face","squirrel","hatching_chick","hatched_chick","baby_chick","frog","ant","bug","beetle","ghost","accept","airplane","alarm_clock","ambulance","angel","apple","arrows_counterclockwise","balloon","beginner","bikini","black_nib","blossom","bomb","boom","bow","bread","bulb","cake","cactus","camera","candy","checkered_flag","cherries","cherry_blossom","chocolate_bar","christmas_tree","clapper","closed_umbrella","closed_lock_with_key","clubs","cocktail","coffee","confetti_ball","crown","dancer","dancers","dart","doughnut","first_quarter_moon","fries","game_die","golf","guitar","gun","herb","hibiscus","high_heel","hocho","icecream","ideograph_advantage","jack_o_lantern","key","kiss","lock","lollipop","mag","moneybag","bell","no_bell","ribbon","skull","snowman","spaghetti","sparkles","strawberry","sunflower","sweat_drops","toilet","watermelon","anger","chart","corn","deciduous_tree","dash","dress","ear_of_rice","eyes","fallen_leaf","feet","fishing_pole_and_fish","hankey","heavy_check_mark","leaves","lipstick","mag_right","mailbox_with_mail","mailbox_with_no_mail","man_with_gua_pi_mao","metal","mushroom","musical_keyboard","on","arrow_right","arrow_left","arrow_up","arrow_down","atm","crystal_ball","eight_spoked_asterisk","octocat","crying_cat_face","heart_eyes_cat","joy_cat","scream_cat","smile_cat","smiley_cat","smirk_cat"]}.call(this),function(){Maleskine.RegEx={HTML_TAGS:"a abbr address area article aside audio b base bdi bdo blockquote body br button canvas caption cite code col colgroup command data datagrid datalist dd del details dfn div dl dt em embed eventsource fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hgroup hr html i iframe img input ins kbd keygen label legend li link mark map menu meta meter nav noscript object ol optgroup option output p param pre progress q ruby rp rt s samp script section select small source span strong style sub summary sup table tbody td textarea tfoot th thead time title tr track u ul var video wbr".split(" "),ADDITIONAL_HTML_TAG:"&nbsp; &copy;".split(" "),MARKDOWN:{HEADERS:/(^#+)|(^[-=]+$)/gm,EMPHASIS:/^(\*+|_+)(.*)(\1)$/g,BLOCKQUOTES:/^\s*>\s*/gm,LISTS:/^\s{0,3}(-|\*|\+|\d\.)\s+/g,HRULERS:/^(\*\s{0,3}\*\s{0,3}\*|-\s{0,3}-\s{0,3}-|_\s{0,3}_\s{0,3}_)[\s\*]*$/g,IMAGES:/!\[.*?\]\(.*?\)/gm,LINKS:/\[(.*?)\]\(.*?\)/gm,QUICK_LINKS:/<(.*)>/gm,COPYRIGHT:/&copy;/gi},EMAIL:/^([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x22([^\x0d\x22\x5c\x80-\xff]|\x5c[\x00-\x7f])*\x22))*\x40([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d)(\x2e([^\x00-\x20\x22\x28\x29\x2c\x2e\x3a-\x3c\x3e\x40\x5b-\x5d\x7f-\xff]+|\x5b([^\x0d\x5b-\x5d\x80-\xff]|\x5c[\x00-\x7f])*\x5d))*$/}}.call(this),function(){Maleskine.AuthorCard={cachedCards:{},authorElementSelector:".maleskine-author",authorCardPath:function(t){return"/users/"+t+"/author_card"},loadingHtml:"<img class='loading' src='/assets/ajax-loader-note-show.gif'>",clearCachedCard:function(t){return Maleskine.AuthorCard.cachedCards[t]=null},setCurrentCard:function(t){return null!=Maleskine.AuthorCard.currentCard&&(clearInterval(Maleskine.AuthorCard.currentCard.timeoutHandle),Maleskine.AuthorCard.currentCard=null),Maleskine.AuthorCard.currentCard={},Maleskine.AuthorCard.currentCard.authorElement=t,Maleskine.AuthorCard.currentCard.slug=t.data("user-slug"),Maleskine.AuthorCard.currentCard.timeoutHandle=setInterval(Maleskine.AuthorCard.checkCard,400)},isCurrentCard:function(t){return null!=Maleskine.AuthorCard.currentCard&&Maleskine.AuthorCard.currentCard.authorElement===t?!0:!1},checkCard:function(){var t,e;return null==Maleskine.AuthorCard.currentCard||(t=Maleskine.AuthorCard.currentCard.authorElement,e=$(".popover"),t.is(":hover")||e.is(":hover"))?void 0:Maleskine.AuthorCard.closeCurrentCard()},closeCurrentCard:function(){var t;return null!=Maleskine.AuthorCard.currentCard?(t=Maleskine.AuthorCard.currentCard.authorElement,t.popover("hide"),clearInterval(Maleskine.AuthorCard.currentCard.timeoutHandle),Maleskine.AuthorCard.currentCard=null,t.popover("destroy")):void 0},initAuthorCards:function(){return $("body").on("mouseenter",".popover .following",function(){return $(this).addClass("unfollow").html("<i class='icon-plus icon-ok'></i>"+I18n.t("reading.unfollow"))
}),$("body").on("mouseleave",".popover .following",function(){return $(this).removeClass("unfollow").html("<i class='icon-ok'></i>"+I18n.t("reading.following"))}),$("body").on("mouseenter",Maleskine.AuthorCard.authorElementSelector,function(t){var e,n,i,o;return e=$(t.currentTarget),o=e.data("user-slug"),Maleskine.AuthorCard.isCurrentCard(e)?void 0:(Maleskine.AuthorCard.closeCurrentCard(),n=Maleskine.AuthorCard.cardContent(e),i=e.data("placement")||"bottom",e.popover({trigger:"manual",html:!0,content:n,placement:i,container:"body"}),e.popover("show"),Maleskine.AuthorCard.setCurrentCard(e))})},cardContent:function(t){var e;return e=t.data("user-slug"),null!=Maleskine.AuthorCard.cachedCards[e]?Maleskine.AuthorCard.cachedCards[e]:(Maleskine.AuthorCard.loadContent(t),Maleskine.AuthorCard.loadingHtml)},loadContent:function(t){var e;return e=t.data("user-slug"),$.get(this.authorCardPath(e),function(){return function(n){var i,o;return Maleskine.AuthorCard.cachedCards[e]=n,Maleskine.AuthorCard.isCurrentCard(t)&&($(".popover-content").html(n),"left"===t.data("placement"))?(i=$(".popover").outerHeight()/2-29,o=$(".popover").offset().top-i,$(".popover").css("top",o)):void 0}}(this))}}}.call(this),function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Spinner=e()}(this,function(){"use strict";function t(t,e){var n,i=document.createElement(t||"div");for(n in e)i[n]=e[n];return i}function e(t){for(var e=1,n=arguments.length;n>e;e++)t.appendChild(arguments[e]);return t}function n(t,e,n,i){var o=["opacity",e,~~(100*t),n,i].join("-"),r=.01+n/i*100,s=Math.max(1-(1-t)/e*(100-r),t),a=c.substring(0,c.indexOf("Animation")).toLowerCase(),l=a&&"-"+a+"-"||"";return h[o]||(d.insertRule("@"+l+"keyframes "+o+"{0%{opacity:"+s+"}"+r+"%{opacity:"+t+"}"+(r+.01)+"%{opacity:1}"+(r+e)%100+"%{opacity:"+t+"}100%{opacity:"+s+"}}",d.cssRules.length),h[o]=1),o}function i(t,e){var n,i,o=t.style;if(void 0!==o[e])return e;for(e=e.charAt(0).toUpperCase()+e.slice(1),i=0;i<u.length;i++)if(n=u[i]+e,void 0!==o[n])return n}function o(t,e){for(var n in e)try{t.style[i(t,n)||n]=e[n]}catch(o){t.style.zIndex=1}return t}function r(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)void 0===t[i]&&(t[i]=n[i])}return t}function s(t){for(var e={x:t.offsetLeft,y:t.offsetTop};t=t.offsetParent;)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}function a(t){return"undefined"==typeof this?new a(t):void(this.opts=r(t||{},a.defaults,p))}function l(){function n(e,n){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}d.addRule(".spin-vml","behavior:url(#default#VML)"),a.prototype.lines=function(t,i){function r(){return o(n("group",{coordsize:c+" "+c,coordorigin:-l+" "+-l}),{width:c,height:c})}function s(t,s,a){e(h,e(o(r(),{rotation:360/i.lines*t+"deg",left:~~s}),e(o(n("roundrect",{arcsize:i.corners}),{width:l,height:i.width,left:i.radius,top:-i.width>>1,filter:a}),n("fill",{color:i.color,opacity:i.opacity}),n("stroke",{opacity:0}))))}var a,l=i.length+i.width,c=2*l,u=2*-(i.width+i.length)+"px",h=o(r(),{position:"absolute",top:u,left:u});if(i.shadow)for(a=1;a<=i.lines;a++)s(a,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(a=1;a<=i.lines;a++)s(a);return e(t,h)},a.prototype.opacity=function(t,e,n,i){var o=t.firstChild;i=i.shadow&&i.lines||0,o&&e+i<o.childNodes.length&&(o=o.childNodes[e+i],o=o&&o.firstChild,o=o&&o.firstChild,o&&(o.opacity=n))}}var c,u=["webkit","Moz","ms","O"],h={},d=function(){var n=t("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),p={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};a.defaults={},r(a.prototype,{spin:function(e){this.stop();var n,i,r=this,a=r.opts,l=r.el=o(t(0,{className:a.className}),{position:a.position,width:0,zIndex:a.zIndex}),u=a.radius+a.length+a.width;if(e&&(e.insertBefore(l,e.firstChild||null),i=s(e),n=s(l),o(l,{left:("auto"==a.left?i.x-n.x+(e.offsetWidth>>1):parseInt(a.left,10)+u)+"px",top:("auto"==a.top?i.y-n.y+(e.offsetHeight>>1):parseInt(a.top,10)+u)+"px"})),l.setAttribute("role","progressbar"),r.lines(l,r.opts),!c){var h,d=0,p=(a.lines-1)*(1-a.direction)/2,f=a.fps,m=f/a.speed,g=(1-a.opacity)/(m*a.trail/100),v=m/a.lines;!function y(){d++;for(var t=0;t<a.lines;t++)h=Math.max(1-(d+(a.lines-t)*v)%m*g,a.opacity),r.opacity(l,t*a.direction+p,h,a);r.timeout=r.el&&setTimeout(y,~~(1e3/f))}()}return r},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(i,r){function s(e,n){return o(t(),{position:"absolute",width:r.length+r.width+"px",height:r.width+"px",background:e,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/r.lines*l+r.rotate)+"deg) translate("+r.radius+"px,0)",borderRadius:(r.corners*r.width>>1)+"px"})}for(var a,l=0,u=(r.lines-1)*(1-r.direction)/2;l<r.lines;l++)a=o(t(),{position:"absolute",top:1+~(r.width/2)+"px",transform:r.hwaccel?"translate3d(0,0,0)":"",opacity:r.opacity,animation:c&&n(r.opacity,r.trail,u+l*r.direction,r.lines)+" "+1/r.speed+"s linear infinite"}),r.shadow&&e(a,o(s("#000","0 0 4px #000"),{top:"2px"})),e(i,e(a,s(r.color,"0 0 1px rgba(0,0,0,.1)")));return i},opacity:function(t,e,n){e<t.childNodes.length&&(t.childNodes[e].style.opacity=n)}});var f=o(t("group"),{behavior:"url(#default#VML)"});return!i(f,"transform")&&f.adj?l():c=i(f,"animation"),a}),function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define(["./spin"],e):t.Ladda=e(t.Spinner)}(this,function(t){"use strict";function e(t){if("undefined"==typeof t)throw"Button target must be defined.";var e=o(t,t.getAttribute("data-size")),n=document.createElement("span");n.className="ladda-spinner",t.appendChild(n);var i,s={start:function(){return t.setAttribute("disabled",""),t.setAttribute("data-loading",""),Maleskine.BrowserDetector.isIE()&&Maleskine.BrowserDetector.isIE8()&&$(t).find(".ladda-label").css("left","-999%"),clearTimeout(i),e.spin(n),this.setProgress(0),this},stop:function(){return t.removeAttribute("disabled"),t.removeAttribute("data-loading"),clearTimeout(i),i=setTimeout(function(){e.stop()},1e3),this},toggle:function(){return this.isLoading()?this.stop():this.start(),this},setProgress:function(e){var n=t.querySelector(".ladda-progress");0===e&&n&&n.parentNode?n.parentNode.removeChild(n):(n||(n=document.createElement("div"),n.className="ladda-progress",t.appendChild(n)),n.style.width=(e||0)*t.offsetWidth+"px")},enable:function(){return this.stop(),this},disable:function(){return this.stop(),t.setAttribute("disabled",""),this},isLoading:function(){return t.hasAttribute("data-loading")}};return r.push(s),s}function n(t,n){n=n||{};var i=[];"string"==typeof t?i=[].slice.call(document.querySelectorAll(t)):"object"==typeof t&&"string"==typeof t.nodeName&&(i=[i]);for(var o=0,r=i.length;r>o;o++)!function(){var t=i[o];if("function"==typeof t.addEventListener){var r=e(t),s=-1;t.addEventListener("click",function(){r.start(),"number"==typeof n.timeout&&(clearTimeout(s),s=setTimeout(r.stop,n.timeout)),"function"==typeof n.callback&&n.callback.apply(null,[r])},!1)}}()}function i(){for(var t=0,e=r.length;e>t;t++)r[t].stop()}function o(e){var n=e.offsetHeight;n>32&&(n*=.8);var i=12,o=.2*n,r=.6*o,s=7>o?2:3;return new t({color:"#fff",lines:i,radius:o,length:r,width:s,zIndex:"initial",top:"auto",left:"auto",className:""})}var r=[];return{bind:n,create:e,stopAll:i}}),function(t){function e(t,e,o){var r=t[0],s=/er/.test(o)?_indeterminate:/bl/.test(o)?f:d,a=o==_update?{checked:r[d],disabled:r[f],indeterminate:"true"==t.attr(_indeterminate)||"false"==t.attr(_determinate)}:r[s];if(/^(ch|di|in)/.test(o)&&!a)n(t,s);else if(/^(un|en|de)/.test(o)&&a)i(t,s);else if(o==_update)for(var l in a)a[l]?n(t,l,!0):i(t,l,!0);else e&&"toggle"!=o||(e||t[_callback]("ifClicked"),a?r[_type]!==h&&i(t,s):n(t,s))}function n(e,n,o){var u=e[0],m=e.parent(),g=n==d,v=n==_indeterminate,y=n==f,b=v?_determinate:g?p:"enabled",_=r(e,b+s(u[_type])),w=r(e,n+s(u[_type]));if(u[n]!==!0){if(!o&&n==d&&u[_type]==h&&u.name){var k=e.closest("form"),C='input[name="'+u.name+'"]';C=k.length?k.find(C):t(C),C.each(function(){this!==u&&t(this).data(l)&&i(t(this),n)})}v?(u[n]=!0,u[d]&&i(e,d,"force")):(o||(u[n]=!0),g&&u[_indeterminate]&&i(e,_indeterminate,!1)),a(e,g,n,o)}u[f]&&r(e,_cursor,!0)&&m.find("."+c).css(_cursor,"default"),m[_add](w||r(e,n)||""),m.attr("role")&&!v&&m.attr("aria-"+(y?f:d),"true"),m[_remove](_||r(e,b)||"")}function i(t,e,n){var i=t[0],o=t.parent(),l=e==d,u=e==_indeterminate,h=e==f,m=u?_determinate:l?p:"enabled",g=r(t,m+s(i[_type])),v=r(t,e+s(i[_type]));i[e]!==!1&&((u||!n||"force"==n)&&(i[e]=!1),a(t,l,m,n)),!i[f]&&r(t,_cursor,!0)&&o.find("."+c).css(_cursor,"pointer"),o[_remove](v||r(t,e)||""),o.attr("role")&&!u&&o.attr("aria-"+(h?f:d),"false"),o[_add](g||r(t,m)||"")}function o(e,n){e.data(l)&&(e.parent().html(e.attr("style",e.data(l).s||"")),n&&e[_callback](n),e.off(".i").unwrap(),t(_label+'[for="'+e[0].id+'"]').add(e.closest(_label)).off(".i"))}function r(t,e,n){return t.data(l)?t.data(l).o[e+(n?"":"Class")]:void 0}function s(t){return t.charAt(0).toUpperCase()+t.slice(1)}function a(t,e,n,i){i||(e&&t[_callback]("ifToggled"),t[_callback]("ifChanged")[_callback]("if"+s(n)))}var l="iCheck",c=l+"-helper",u="checkbox",h="radio",d="checked",p="un"+d,f="disabled";_determinate="determinate",_indeterminate="in"+_determinate,_update="update",_type="type",_click="click",_touch="touchbegin.i touchend.i",_add="addClass",_remove="removeClass",_callback="trigger",_label="label",_cursor="cursor",_mobile=/ipad|iphone|ipod|android|blackberry|windows phone|opera mini|silk/i.test(navigator.userAgent),t.fn[l]=function(r,s){var a='input[type="'+u+'"], input[type="'+h+'"]',p=t(),m=function(e){e.each(function(){var e=t(this);p=p.add(e.is(a)?e:e.find(a))})};if(/^(check|uncheck|toggle|indeterminate|determinate|disable|enable|update|destroy)$/i.test(r))return r=r.toLowerCase(),m(this),p.each(function(){var n=t(this);"destroy"==r?o(n,"ifDestroyed"):e(n,!0,r),t.isFunction(s)&&s()});if("object"!=typeof r&&r)return this;var g=t.extend({checkedClass:d,disabledClass:f,indeterminateClass:_indeterminate,labelHover:!0},r),v=g.handle,y=g.hoverClass||"hover",b=g.focusClass||"focus",_=g.activeClass||"active",w=!!g.labelHover,k=g.labelHoverClass||"hover",C=0|(""+g.increaseArea).replace("%","");return(v==u||v==h)&&(a='input[type="'+v+'"]'),-50>C&&(C=-50),m(this),p.each(function(){var r=t(this);o(r);var s,a=this,p=a.id,m=-C+"%",v=100+2*C+"%",x={position:"absolute",top:m,left:m,display:"block",width:v,height:v,margin:0,padding:0,background:"#fff",border:0,opacity:0},S=_mobile?{position:"absolute",visibility:"hidden"}:C?x:{position:"absolute",opacity:0},T=a[_type]==u?g.checkboxClass||"i"+u:g.radioClass||"i"+h,$=t(_label+'[for="'+p+'"]').add(r.closest(_label)),E=!!g.aria,I=l+"-"+Math.random().toString(36).substr(2,6),A='<div class="'+T+'" '+(E?'role="'+a[_type]+'" ':"");E&&$.each(function(){A+='aria-labelledby="',this.id?A+=this.id:(this.id=I,A+=I),A+='"'}),A=r.wrap(A+"/>")[_callback]("ifCreated").parent().append(g.insert),s=t('<ins class="'+c+'"/>').css(x).appendTo(A),r.data(l,{o:g,s:r.attr("style")}).css(S),!!g.inheritClass&&A[_add](a.className||""),!!g.inheritID&&p&&A.attr("id",l+"-"+p),"static"==A.css("position")&&A.css("position","relative"),e(r,!0,_update),$.length&&$.on(_click+".i mouseover.i mouseout.i "+_touch,function(n){var i=n[_type],o=t(this);if(!a[f]){if(i==_click){if(t(n.target).is("a"))return;e(r,!1,!0)}else w&&(/ut|nd/.test(i)?(A[_remove](y),o[_remove](k)):(A[_add](y),o[_add](k)));if(!_mobile)return!1;n.stopPropagation()}}),r.on(_click+".i focus.i blur.i keyup.i keydown.i keypress.i",function(t){var e=t[_type],o=t.keyCode;return e==_click?!1:"keydown"==e&&32==o?(a[_type]==h&&a[d]||(a[d]?i(r,d):n(r,d)),!1):void("keyup"==e&&a[_type]==h?!a[d]&&n(r,d):/us|ur/.test(e)&&A["blur"==e?_remove:_add](b))}),s.on(_click+" mousedown mouseup mouseover mouseout "+_touch,function(t){var n=t[_type],i=/wn|up/.test(n)?_:y;if(!a[f]){if(n==_click?e(r,!1,!0):(/wn|er|in/.test(n)?A[_add](i):A[_remove](i+" "+_),$.length&&w&&i==y&&$[/ut|nd/.test(n)?_remove:_add](k)),!_mobile)return!1;t.stopPropagation()}})})}}(window.jQuery||window.Zepto),function(t){function e(t){this.text=t}t.holySelection={init:function(){t.holySelection.getSelection=window.getSelection?t.holySelection._getSelection:t.holySelection._getSelectionIE8},_getSelection:function(){return new e(window.getSelection().toString())},_getSelectionIE8:function(){return new e(document.selection.createRange().text)}}}(jQuery),$.holySelection.init(),function(t){var e=-2,n=-1,i=2,o=1,r=0,s=!1;t(document).on("compositionstart",function(){s=!0}),t(document).on("compositionend",function(){s=!1});var a=function(e){if(!t.popline.utils.isNull(t.popline.current)){var n=t.popline.instances[0].target,i=t(n).offset().top<=e.pageY&&t(n).offset().top+t(n).height()>=e.pageY,o=t.contains(t.popline.current.bar.get(0),e.target)||t.popline.current.bar.get(0)===e.target;if(t.popline.current.currentSelection=t.holySelection.getSelection(),(i||o)&&t.popline.current.currentSelection.text.length>0&&!t.popline.current.keepSlientWhenBlankSelected()){var r=(t.popline.current.target,t.popline.current.bar);if(r.is(":hidden")||r.is(":animated")){r.stop(!0,!0);var s=c().mouseup(e);t.popline.current.show(s)}}else t.popline.hideAllBar()}},l={mousedown:function(){t.popline.current=t(this).data("popline"),t.popline.hideAllBar()},keyup:function(e){{var n=t(this).data("popline");n.bar}if(!s&&window.getSelection().toString().length>0&&!n.keepSlientWhenBlankSelected()){var i=c().keyup(e);t.popline.current.show(i)}else t.popline.current.hide()},keydown:function(){var e=window.getSelection().getRangeAt(0).getClientRects();e.length>0&&t(this).data("lastKeyPos",t.popline.boundingRect())}},c=function(){var r=t.popline.current.target,s=t.popline.current.bar,a=t.popline.current.settings.position,l={fixed:{mouseup:function(t){var e=window.getSelection().getRangeAt(0).getBoundingClientRect(),n=t.pageX-s.width()/2,i=document.body.scrollTop||document.documentElement.scrollTop;0>n&&(n=10);var o=i+e.top-s.outerHeight()-10;return{left:n,top:o}},keyup:function(){var r=null,a=null,l=t.popline.getRect(),c=t.popline.current.isKeyMove();c===o||c===i?r=l.right-s.width()/2:(c===n||c===e)&&(r=l.left-s.width()/2);var u=document.body.scrollTop||document.documentElement.scrollTop;return a=u+l.top-s.outerHeight()-10,{left:r,top:a}}},relative:{mouseup:function(t){var e=t.pageX-s.width()/2;0>e&&(e=10);var n=t.pageY-s.outerHeight()-parseInt(r.css("font-size"))/2;return{left:e,top:n}},keyup:function(){var a=null,l=null,c=t.popline.getRect(),u=t.popline.current.isKeyMove();return u===o||u===i?(a=c.right-s.width()/2,l=t(document).scrollTop()+c.bottom-s.outerHeight()-parseInt(r.css("font-size"))):(u===n||u===e)&&(a=c.left-s.width()/2,l=t(document).scrollTop()+c.top-s.outerHeight()),{left:a,top:l}}}};return l[a]};t.fn.popline=function(e){_arguments=arguments,this.each(function(){if(_arguments.length>=1&&"string"==typeof _arguments[0]&&t(this).data("popline")){var n=t(this).data("popline")[_arguments[0]];"function"==typeof n&&n.apply(t(this).data("popline"),Array.prototype.slice.call(_arguments,1))}else if(!t(this).data("popline")){new t.popline(e,this)}}),t(document).data("popline-global-binded")||(t(document).mouseup(function(t){var e=this;setTimeout(function(){a.call(e,t)},1)}),t(document).data("popline-global-binded",!0))},t.popline=function(e,n){this.settings=t.extend(!0,{},t.popline.defaults,e),this.setPosition(this.settings.position),this.target=t(n),this.init(),t.popline.addInstance(this)},t.extend(t.popline,{defaults:{zIndex:9999,mode:"edit",enable:null,disable:null,position:"fixed",keepSlientWhenBlankSelected:!0},instances:[],current:null,prototype:{init:function(){this.bar=t("<ul class='popline' style='z-index:"+this.settings.zIndex+"'></ul>").appendTo("body"),this.bar.data("popline",this),this.target.data("popline",this);var e=this,n=function(e,i){if(null===e)return!0;for(var o=0,r=e.length;r>o;o++){var s=e[o];if("string"==typeof s&&i===s)return!0;if(t.isArray(s)&&n(s,i))return!0}return!1},i=function(e,n){if(null===e)return!1;for(var o=0,r=e.length;r>o;o++){var s=e[o];if("string"==typeof s&&n===s)return!0;if(t.isArray(s)){if((1===s.length||!t.isArray(s[1]))&&i(s,n))return!0;if(i(s.slice(1),n))return!0}}return!1},o=function(r,s){for(var a in s){var l=s[a],c=t.popline.utils.isNull(l.mode)?t.popline.defaults.mode:l.mode;if(c===e.settings.mode&&n(this.settings.enable,a)&&!i(this.settings.disable,a)){var u=t("<li><span class='btn'></span></li>");u.addClass("popline-button popline-"+a+"-button"),l.iconClass&&u.children(".btn").append("<i class='"+l.iconClass+"'></i>"),l.text&&u.children(".btn").append("<span class='text "+(l.textClass||"")+"'>"+l.text+"</span>"),l.bgColor&&u.css({"background-color":l.bgColor}),t.isFunction(l.beforeShow)&&this.beforeShowCallbacks.push({name:a,callback:l.beforeShow}),t.isFunction(l.afterHide)&&this.afterHideCallbacks.push({name:a,callback:l.afterHide}),u.appendTo(r),l.buttons?($subbar=t("<ul class='subbar'></ul>"),u.append($subbar),o.call(this,$subbar,l.buttons),u.click(function(n){var i=this;t(this).hasClass("boxed")||(e.switchBar(t(this),function(){t(i).siblings("li").hide().end().children(".btn").hide().end().children("ul").show().end()}),n.stopPropagation())})):t.isFunction(l.action)&&u.click(function(t){return function(n){t.action.call(this,n,e)}}(l)),u.mousedown(function(e){t(e.target).is("input")||e.preventDefault()}),u.mouseup(function(t){t.stopPropagation()})}}};o.call(this,this.bar,t.popline.buttons),this.target.bind(l),this.bar.on("mouseenter","li",function(){t(this).hasClass("boxed")||t(this).addClass("hover")}),this.bar.on("mouseleave","li",function(){t(this).hasClass("boxed")||t(this).removeClass("hover")})},show:function(t){for(var e=0,n=this.beforeShowCallbacks.length;n>e;e++){var i=this.beforeShowCallbacks[e],o=this.bar.find("li.popline-"+i.name+"-button");i.callback.call(o,this)}this.bar.css("top",t.top+"px").css("left",t.left+"px").stop(!0,!0).fadeIn()},hide:function(){var t=this;this.bar.is(":visible")&&!this.bar.is(":animated")&&this.bar.fadeOut(function(){t.bar.find("li").removeClass("boxed").show(),t.bar.find(".subbar").hide(),t.bar.find(".textfield").hide(),t.bar.find(".btn").show();for(var e=0,n=t.afterHideCallbacks.length;n>e;e++){var i=t.afterHideCallbacks[e],o=t.bar.find("li.popline-"+i.name+"-button");i.callback.call(o,t)}})},destroy:function(){this.target.unbind(l),this.target.removeData("popline"),this.target.removeData("lastKeyPos"),this.bar.remove()},switchBar:function(t,e,n){if("function"==typeof e){var i=this,o=parseInt(i.bar.css("left"))+i.bar.width()/2;i.bar.animate({opacity:0,marginTop:-i.bar.height()+"px"},function(){e.call(this),t.removeClass("hover").addClass("boxed").show(),i.bar.css("margin-top",i.bar.height()+"px"),i.bar.css("left",o-i.bar.width()/2+"px"),"function"==typeof n?i.bar.animate({opacity:1,marginTop:0},n):i.bar.animate({opacity:1,marginTop:0})})}},keepSlientWhenBlankSelected:function(){return this.settings.keepSlientWhenBlankSelected&&""===t.trim(t.popline.current.currentSelection.text)?!0:!1},isKeyMove:function(){var s=this.target.data("lastKeyPos");return currentRect=t.popline.boundingRect(),t.popline.utils.isNull(s)?null:currentRect.top===s.top&&currentRect.bottom!==s.bottom?o:currentRect.bottom===s.bottom&&currentRect.top!==s.top?n:currentRect.right!==s.right?i:currentRect.left!==s.left?e:r},setPosition:function(t){this.settings.position="relative"===t?"relative":"fixed"},beforeShowCallbacks:[],afterHideCallbacks:[]},hideAllBar:function(){for(var e=0,n=t.popline.instances.length;n>e;e++)t.popline.instances[e].hide()},addInstance:function(e){t.popline.instances.push(e)},boundingRect:function(e){return t.popline.utils.isNull(e)&&(e=window.getSelection().getRangeAt(0).getClientRects()),{top:parseInt(e[0].top),left:parseInt(e[0].left),right:parseInt(e[e.length-1].right),bottom:parseInt(e[e.length-1].bottom)}},webkitBoundingRect:function(){for(var e=window.getSelection().getRangeAt(0).getClientRects(),n=[],i=0,o=e.length;o>i;i++){var r=e[i];0!==r.width&&(0!==i&&i!==e.length-1||1!==r.width)&&n.push(r)}return t.popline.boundingRect(n)},getRect:function(){return t.popline.utils.browser.firefox||t.popline.utils.browser.opera?t.popline.boundingRect():t.popline.utils.browser.chrome||t.popline.utils.browser.safari?t.popline.webkitBoundingRect():void 0},utils:{isNull:function(t){return"undefined"==typeof t||null===t?!0:!1},randomNumber:function(){return Math.floor(1e7*Math.random()+1)},trim:function(t){return t.replace(/^\s+|\s+$/g,"")},browser:{chrome:navigator.userAgent.match(/chrome/i)?!0:!1,safari:navigator.userAgent.match(/safari/i)&&!navigator.userAgent.match(/chrome/i)?!0:!1,firefox:navigator.userAgent.match(/firefox/i)?!0:!1,opera:navigator.userAgent.match(/opera/i)?!0:!1,ie:navigator.userAgent.match(/msie/i)?!0:!1,webkit:navigator.userAgent.match(/webkit/i)?!0:!1},findNodeWithTags:function(e,n){for(t.isArray(n)||(n=[n]);e;){if(3!==e.nodeType){var i=n.indexOf(e.tagName);if(-1!==i)return e}e=e.parentNode}return null}},addButton:function(e){t.extend(t.popline.buttons,e)},buttons:{}})}(jQuery),"function"!=typeof Object.create&&(Object.create=function(t){function e(){}return e.prototype=t,new e}),function(t){var e={init:function(e){return this.options=t.extend({},t.noty.defaults,e),this.options.layout=this.options.custom?t.noty.layouts.inline:t.noty.layouts[this.options.layout],this.options.theme=t.noty.themes[this.options.theme],delete e.layout,delete e.theme,this.options=t.extend({},this.options,this.options.layout.options),this.options.id="noty_"+(new Date).getTime()*Math.floor(1e6*Math.random()),this.options=t.extend({},this.options,e),this._build(),this},_build:function(){var e=t('<div class="noty_bar"></div>').attr("id",this.options.id);if(e.append(this.options.template).find(".noty_text").html(this.options.text),this.$bar=null!==this.options.layout.parent.object?t(this.options.layout.parent.object).css(this.options.layout.parent.css).append(e):e,this.options.buttons){this.options.closeWith=[],this.options.timeout=!1;var n=t("<div/>").addClass("noty_buttons");null!==this.options.layout.parent.object?this.$bar.find(".noty_bar").append(n):this.$bar.append(n);var i=this;t.each(this.options.buttons,function(e,n){var o=t("<button/>").addClass(n.addClass?n.addClass:"gray").html(n.text).appendTo(i.$bar.find(".noty_buttons")).bind("click",function(){t.isFunction(n.onClick)&&n.onClick.call(o,i)})})}this.$message=this.$bar.find(".noty_message"),this.$closeButton=this.$bar.find(".noty_close"),this.$buttons=this.$bar.find(".noty_buttons"),t.noty.store[this.options.id]=this},show:function(){var e=this;return t(e.options.layout.container.selector).append(e.$bar),e.options.theme.style.apply(e),"function"===t.type(e.options.layout.css)?this.options.layout.css.apply(e.$bar):e.$bar.css(this.options.layout.css||{}),e.$bar.addClass(e.options.layout.addClass),e.options.layout.container.style.apply(t(e.options.layout.container.selector)),e.options.theme.callback.onShow.apply(this),t.inArray("click",e.options.closeWith)>-1&&e.$bar.css("cursor","pointer").one("click",function(){e.close()}),t.inArray("hover",e.options.closeWith)>-1&&e.$bar.one("mouseenter",function(){e.close()}),t.inArray("button",e.options.closeWith)>-1&&e.$closeButton.one("click",function(){e.close()}),-1==t.inArray("button",e.options.closeWith)&&e.$closeButton.remove(),e.options.callback.onShow&&e.options.callback.onShow.apply(e),e.$bar.animate(e.options.animation.open,e.options.animation.speed,e.options.animation.easing,function(){e.options.callback.afterShow&&e.options.callback.afterShow.apply(e),e.shown=!0}),e.options.timeout&&e.$bar.delay(e.options.timeout).promise().done(function(){e.close()}),this},close:function(){if(!this.closed){var e=this;if(!this.shown){var n=[];return t.each(t.noty.queue,function(t,i){i.options.id!=e.options.id&&n.push(i)}),void(t.noty.queue=n)}e.$bar.addClass("i-am-closing-now"),e.options.callback.onClose&&e.options.callback.onClose.apply(e),e.$bar.clearQueue().stop().animate(e.options.animation.close,e.options.animation.speed,e.options.animation.easing,function(){e.options.callback.afterClose&&e.options.callback.afterClose.apply(e)}).promise().done(function(){e.options.modal&&(t.notyRenderer.setModalCount(-1),0==t.notyRenderer.getModalCount()&&t(".noty_modal").fadeOut("fast",function(){t(this).remove()})),t.notyRenderer.setLayoutCountFor(e,-1),0==t.notyRenderer.getLayoutCountFor(e)&&t(e.options.layout.container.selector).remove(),"undefined"!=typeof e.$bar&&null!==e.$bar&&(e.$bar.remove(),e.$bar=null,e.closed=!0),delete t.noty.store[e.options.id],e.options.theme.callback.onClose.apply(e),e.options.dismissQueue||(t.noty.ontap=!0,t.notyRenderer.render())})}},setText:function(t){return this.closed||(this.options.text=t,this.$bar.find(".noty_text").html(t)),this},setType:function(t){return this.closed||(this.options.type=t,this.options.theme.style.apply(this),this.options.theme.callback.onShow.apply(this)),this},setTimeout:function(t){if(!this.closed){var e=this;this.options.timeout=t,e.$bar.delay(e.options.timeout).promise().done(function(){e.close()})}return this},closed:!1,shown:!1};t.notyRenderer={},t.notyRenderer.init=function(n){var i=Object.create(e).init(n);return i.options.force?t.noty.queue.unshift(i):t.noty.queue.push(i),t.notyRenderer.render(),"object"==t.noty.returns?i:i.options.id},t.notyRenderer.render=function(){var e=t.noty.queue[0];"object"===t.type(e)?e.options.dismissQueue?t.notyRenderer.show(t.noty.queue.shift()):t.noty.ontap&&(t.notyRenderer.show(t.noty.queue.shift()),t.noty.ontap=!1):t.noty.ontap=!0},t.notyRenderer.show=function(e){e.options.modal&&(t.notyRenderer.createModalFor(e),t.notyRenderer.setModalCount(1)),0==t(e.options.layout.container.selector).length?e.options.custom?e.options.custom.append(t(e.options.layout.container.object).addClass("i-am-new")):t("body").append(t(e.options.layout.container.object).addClass("i-am-new")):t(e.options.layout.container.selector).removeClass("i-am-new"),t.notyRenderer.setLayoutCountFor(e,1),e.show()},t.notyRenderer.createModalFor=function(e){0==t(".noty_modal").length&&t("<div/>").addClass("noty_modal").data("noty_modal_count",0).css(e.options.theme.modal.css).prependTo(t("body")).fadeIn("fast")},t.notyRenderer.getLayoutCountFor=function(e){return t(e.options.layout.container.selector).data("noty_layout_count")||0},t.notyRenderer.setLayoutCountFor=function(e,n){return t(e.options.layout.container.selector).data("noty_layout_count",t.notyRenderer.getLayoutCountFor(e)+n)},t.notyRenderer.getModalCount=function(){return t(".noty_modal").data("noty_modal_count")||0},t.notyRenderer.setModalCount=function(e){return t(".noty_modal").data("noty_modal_count",t.notyRenderer.getModalCount()+e)},t.fn.noty=function(e){return e.custom=t(this),t.notyRenderer.init(e)},t.noty={},t.noty.queue=[],t.noty.ontap=!0,t.noty.layouts={},t.noty.themes={},t.noty.returns="object",t.noty.store={},t.noty.get=function(e){return t.noty.store.hasOwnProperty(e)?t.noty.store[e]:!1},t.noty.close=function(e){return t.noty.get(e)?t.noty.get(e).close():!1},t.noty.setText=function(e,n){return t.noty.get(e)?t.noty.get(e).setText(n):!1},t.noty.setType=function(e,n){return t.noty.get(e)?t.noty.get(e).setType(n):!1},t.noty.clearQueue=function(){t.noty.queue=[]},t.noty.closeAll=function(){t.noty.clearQueue(),t.each(t.noty.store,function(t,e){e.close()})};var n=window.alert;t.noty.consumeAlert=function(e){window.alert=function(n){e?e.text=n:e={text:n},t.notyRenderer.init(e)}},t.noty.stopConsumeAlert=function(){window.alert=n},t.noty.defaults={layout:"top",theme:"defaultTheme",type:"alert",text:"",dismissQueue:!0,template:'<div class="noty_message"><div class="noty_close"></div><span class="noty_text"></span></div>',animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:500},timeout:!1,force:!1,modal:!1,closeWith:["click"],callback:{onShow:function(){},afterShow:function(){},onClose:function(){},afterClose:function(){}},buttons:!1},t(window).resize(function(){t.each(t.noty.layouts,function(e,n){n.container.style.apply(t(n.container.selector))})})}(jQuery),function(t){t.noty.layouts.bottom={name:"bottom",options:{},container:{object:'<ul id="noty_bottom_layout_container" />',selector:"ul#noty_bottom_layout_container",style:function(){t(this).css({bottom:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""}}(jQuery),function(t){t.noty.layouts.bottomCenter={name:"bottomCenter",options:{},container:{object:'<ul id="noty_bottomCenter_layout_container" />',selector:"ul#noty_bottomCenter_layout_container",style:function(){t(this).css({bottom:20,left:0,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),t(this).css({left:(t(window).width()-t(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(t){t.noty.layouts.bottomLeft={name:"bottomLeft",options:{},container:{object:'<ul id="noty_bottomLeft_layout_container" />',selector:"ul#noty_bottomLeft_layout_container",style:function(){t(this).css({bottom:20,left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&t(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(t){t.noty.layouts.bottomRight={name:"bottomRight",options:{},container:{object:'<ul id="noty_bottomRight_layout_container" />',selector:"ul#noty_bottomRight_layout_container",style:function(){t(this).css({bottom:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&t(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(t){t.noty.layouts.center={name:"center",options:{},container:{object:'<ul id="noty_center_layout_container" />',selector:"ul#noty_center_layout_container",style:function(){t(this).css({position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var e=t(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");t("body").append(e),e.find(".i-am-closing-now").remove(),e.find("li").css("display","block");var n=e.height();e.remove(),t(this).hasClass("i-am-new")?t(this).css({left:(t(window).width()-t(this).outerWidth(!1))/2+"px",top:(t(window).height()-n)/2+"px"}):t(this).animate({left:(t(window).width()-t(this).outerWidth(!1))/2+"px",top:(t(window).height()-n)/2+"px"},500)}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(t){t.noty.layouts.centerLeft={name:"centerLeft",options:{},container:{object:'<ul id="noty_centerLeft_layout_container" />',selector:"ul#noty_centerLeft_layout_container",style:function(){t(this).css({left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var e=t(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");t("body").append(e),e.find(".i-am-closing-now").remove(),e.find("li").css("display","block");var n=e.height();e.remove(),t(this).hasClass("i-am-new")?t(this).css({top:(t(window).height()-n)/2+"px"}):t(this).animate({top:(t(window).height()-n)/2+"px"},500),window.innerWidth<600&&t(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(t){t.noty.layouts.centerRight={name:"centerRight",options:{},container:{object:'<ul id="noty_centerRight_layout_container" />',selector:"ul#noty_centerRight_layout_container",style:function(){t(this).css({right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var e=t(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");t("body").append(e),e.find(".i-am-closing-now").remove(),e.find("li").css("display","block");var n=e.height();e.remove(),t(this).hasClass("i-am-new")?t(this).css({top:(t(window).height()-n)/2+"px"}):t(this).animate({top:(t(window).height()-n)/2+"px"},500),window.innerWidth<600&&t(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}
}(jQuery),function(t){t.noty.layouts.inline={name:"inline",options:{},container:{object:'<ul id="noty_inline_layout_container" />',selector:"ul#noty_inline_layout_container",style:function(){t(this).css({width:"100%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""}}(jQuery),function(t){t.noty.layouts.maleskineCenter={name:"maleskineCenter",options:{},container:{object:'<ul id="noty_center_layout_container" />',selector:"ul#noty_center_layout_container",style:function(){t(this).css({position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),t(this).addClass("maleskine-confirm-center");var e=t(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");t("body").append(e),e.find(".i-am-closing-now").remove(),e.find("li").css("display","block");var n=e.height();e.remove(),t(this).hasClass("i-am-new")?t(this).css({left:(t(window).width()-t(this).outerWidth(!1))/2+"px",top:(t(window).height()-n)/2+"px"}):t(this).animate({left:(t(window).width()-t(this).outerWidth(!1))/2+"px",top:(t(window).height()-n)/2+"px"},500)}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""}}(jQuery),function(t){t.noty.layouts.maleskineTopCenter={name:"maleskineTopCenter",options:{},container:{object:'<ul id="noty_topCenter_layout_container" />',selector:"ul#noty_topCenter_layout_container",style:function(){t(this).css({top:0,left:0,position:"fixed",width:"500px",height:"auto",listStyleType:"none",zIndex:1e7}),t(this).addClass("top-center-with-action"),t(this).find(".noty_close").css("display","block"),t(this).css({left:(t(window).width()-t(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""}}(jQuery),function(t){t.noty.layouts.maleskineTopRight={name:"maleskineTopRight",options:{},container:{object:'<ul id="noty_topRight_layout_container" />',selector:"ul#noty_topRight_layout_container",style:function(){t(this).css({top:10,right:10,position:"fixed",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),t(this).addClass("maleskine-top-right"),window.innerWidth<600&&t(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""}}(jQuery),function(t){t.noty.layouts.top={name:"top",options:{},container:{object:'<ul id="noty_top_layout_container" />',selector:"ul#noty_top_layout_container",style:function(){t(this).css({top:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""}}(jQuery),function(t){t.noty.layouts.topCenter={name:"topCenter",options:{},container:{object:'<ul id="noty_topCenter_layout_container" />',selector:"ul#noty_topCenter_layout_container",style:function(){t(this).css({top:20,left:0,position:"fixed",listStyleType:"none",zIndex:1e7}),t(this).css({left:(t(window).width()-t(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""}}(jQuery),function(t){t.noty.layouts.topLeft={name:"topLeft",options:{},container:{object:'<ul id="noty_topLeft_layout_container" />',selector:"ul#noty_topLeft_layout_container",style:function(){t(this).css({top:20,left:20,position:"fixed",listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&t(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""}}(jQuery),function(t){t.noty.layouts.topRight={name:"topRight",options:{},container:{object:'<ul id="noty_topRight_layout_container" />',selector:"ul#noty_topRight_layout_container",style:function(){t(this).css({top:20,right:20,position:"fixed",listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&t(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""}}(jQuery),function(t){t.noty.themes.defaultTheme={name:"defaultTheme",helpers:{borderFix:function(){if(this.options.dismissQueue){var e=this.options.layout.container.selector+" "+this.options.layout.parent.selector;switch(this.options.layout.name){case"top":t(e).css({borderRadius:"0px 0px 0px 0px"}),t(e).last().css({borderRadius:"0px 0px 5px 5px"});break;case"topCenter":case"topLeft":case"topRight":case"bottomCenter":case"bottomLeft":case"bottomRight":case"center":case"centerLeft":case"centerRight":case"inline":t(e).css({borderRadius:"0px 0px 0px 0px"}),t(e).first().css({"border-top-left-radius":"5px","border-top-right-radius":"5px"}),t(e).last().css({"border-bottom-left-radius":"5px","border-bottom-right-radius":"5px"});break;case"bottom":t(e).css({borderRadius:"0px 0px 0px 0px"}),t(e).first().css({borderRadius:"5px 5px 0px 0px"})}}}},modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,opacity:.6,display:"none",left:0,top:0}},style:function(){switch(this.$bar.css({overflow:"hidden",background:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAoCAYAAAAPOoFWAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAPZJREFUeNq81tsOgjAMANB2ov7/7ypaN7IlIwi9rGuT8QSc9EIDAsAznxvY4pXPKr05RUE5MEVB+TyWfCEl9LZApYopCmo9C4FKSMtYoI8Bwv79aQJU4l6hXXCZrQbokJEksxHo9KMOgc6w1atHXM8K9DVC7FQnJ0i8iK3QooGgbnyKgMDygBWyYFZoqx4qS27KqLZJjA1D0jK6QJcYEQEiWv9PGkTsbqxQ8oT+ZtZB6AkdsJnQDnMoHXHLGKOgDYuCWmYhEERCI5gaamW0bnHdA3k2ltlIN+2qKRyCND0bhqSYCyTB3CAOc4WusBEIpkeBuPgJMAAX8Hs1NfqHRgAAAABJRU5ErkJggg==') repeat-x scroll left top #fff"}),this.$message.css({fontSize:"13px",lineHeight:"16px",textAlign:"center",padding:"8px 10px 9px",width:"auto",position:"relative"}),this.$closeButton.css({position:"absolute",top:4,right:4,width:10,height:10,background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAATpJREFUeNoszrFqVFEUheG19zlz7sQ7ijMQBAvfYBqbpJCoZSAQbOwEE1IHGytbLQUJ8SUktW8gCCFJMSGSNxCmFBJO7j5rpXD6n5/P5vM53H3b3T9LOiB5AQDuDjM7BnA7DMPHDGBH0nuSzwHsRcRVRNRSysuU0i6AOwA/02w2+9Fae00SEbEh6SGAR5K+k3zWWptKepCm0+kpyRoRGyRBcpPkDsn1iEBr7drdP2VJZyQXERGSPpiZAViTBACXKaV9kqd5uVzCzO5KKb/d/UZSDwD/eyxqree1VqSu6zKAF2Z2RPJJaw0rAkjOJT0m+SuT/AbgDcmnkmBmfwAsJL1dXQ8lWY6IGwB1ZbrOOb8zs8thGP4COFwx/mE8Ho9Go9ErMzvJOW/1fY/JZIJSypqZfXX3L13X9fcDAKJct1sx3OiuAAAAAElFTkSuQmCC)",display:"none",cursor:"pointer"}),this.$buttons.css({padding:5,textAlign:"right",borderTop:"1px solid #ccc",backgroundColor:"#fff"}),this.$buttons.find("button").css({marginLeft:5}),this.$buttons.find("button:first").css({marginLeft:0}),this.$bar.bind({mouseenter:function(){t(this).find(".noty_close").fadeIn()},mouseleave:function(){t(this).find(".noty_close").fadeOut()}}),this.options.layout.name){case"top":this.$bar.css({borderRadius:"0px 0px 5px 5px",borderBottom:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"});break;case"topCenter":case"center":case"bottomCenter":case"inline":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"center"});break;case"topLeft":case"topRight":case"bottomLeft":case"bottomRight":case"centerLeft":case"centerRight":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"left"});break;case"bottom":this.$bar.css({borderRadius:"5px 5px 0px 0px",borderTop:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 -2px 4px rgba(0, 0, 0, 0.1)"});break;default:this.$bar.css({border:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"})}switch(this.options.type){case"alert":case"notification":this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"});break;case"warning":this.$bar.css({backgroundColor:"#FFEAA8",borderColor:"#FFC237",color:"#826200"}),this.$buttons.css({borderTop:"1px solid #FFC237"});break;case"error":this.$bar.css({backgroundColor:"red",borderColor:"darkred",color:"#FFF"}),this.$message.css({fontWeight:"bold"}),this.$buttons.css({borderTop:"1px solid darkred"});break;case"information":this.$bar.css({backgroundColor:"#57B7E2",borderColor:"#0B90C4",color:"#FFF"}),this.$buttons.css({borderTop:"1px solid #0B90C4"});break;case"success":this.$bar.css({backgroundColor:"lightgreen",borderColor:"#50C24E",color:"darkgreen"}),this.$buttons.css({borderTop:"1px solid #50C24E"});break;default:this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"})}},callback:{onShow:function(){t.noty.themes.defaultTheme.helpers.borderFix.apply(this)},onClose:function(){t.noty.themes.defaultTheme.helpers.borderFix.apply(this)}}}}(jQuery),function(t){t.noty.themes.maleskineTheme={name:"maleskineTheme",helpers:{borderFix:function(){if(this.options.dismissQueue){var e=this.options.layout.container.selector+" "+this.options.layout.parent.selector;switch(this.options.layout.name){case"top":t(e).css({borderRadius:"0px 0px 0px 0px"}),t(e).last().css({borderRadius:"0px 0px 5px 5px"});break;case"topCenter":case"topLeft":case"topRight":case"maleskineTopCenter":case"maleskineTopRight":case"bottomCenter":case"bottomLeft":case"bottomRight":case"center":case"centerLeft":case"centerRight":case"inline":t(e).css({borderRadius:"0px 0px 0px 0px"}),t(e).first().css({"border-top-left-radius":"5px","border-top-right-radius":"5px"}),t(e).last().css({"border-bottom-left-radius":"5px","border-bottom-right-radius":"5px"});break;case"maleskineCenter":t(e).css({borderRadius:"0px 0px 0px 0px"}),t(e).first().css({"border-top-left-radius":"5px","border-top-right-radius":"5px"}),t(e).last().css({"border-bottom-left-radius":"5px","border-bottom-right-radius":"5px"});break;case"bottom":t(e).css({borderRadius:"0px 0px 0px 0px"}),t(e).first().css({borderRadius:"5px 5px 0px 0px"})}}}},modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"$white",zIndex:1e4,opacity:.95,display:"none",left:0,top:0}},style:function(){switch(this.$bar.css({overflow:"hidden"}),this.$message.css({}),this.$closeButton.css({"float":"right",margin:"4px 0 0 10px",width:10,height:10,background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAATpJREFUeNoszrFqVFEUheG19zlz7sQ7ijMQBAvfYBqbpJCoZSAQbOwEE1IHGytbLQUJ8SUktW8gCCFJMSGSNxCmFBJO7j5rpXD6n5/P5vM53H3b3T9LOiB5AQDuDjM7BnA7DMPHDGBH0nuSzwHsRcRVRNRSysuU0i6AOwA/02w2+9Fae00SEbEh6SGAR5K+k3zWWptKepCm0+kpyRoRGyRBcpPkDsn1iEBr7drdP2VJZyQXERGSPpiZAViTBACXKaV9kqd5uVzCzO5KKb/d/UZSDwD/eyxqree1VqSu6zKAF2Z2RPJJaw0rAkjOJT0m+SuT/AbgDcmnkmBmfwAsJL1dXQ8lWY6IGwB1ZbrOOb8zs8thGP4COFwx/mE8Ho9Go9ErMzvJOW/1fY/JZIJSypqZfXX3L13X9fcDAKJct1sx3OiuAAAAAElFTkSuQmCC)",display:"none",cursor:"pointer"}),this.$buttons.css({padding:10,textAlign:"right",borderTop:"1px solid #ccc",backgroundColor:"#f5f5f5"}),this.$buttons.find("button").css({marginLeft:5}),this.$buttons.find("button:first").css({marginLeft:0}),this.options.layout.name){case"top":this.$bar.css({});break;case"topCenter":case"center":case"bottomCenter":case"inline":case"maleskineCenter":case"maleskineTopCenter":this.$bar.css({}),this.$message.css({fontSize:"13px",textAlign:"center"});break;case"topLeft":case"topRight":case"maleskineTopRight":case"bottomLeft":case"bottomRight":case"centerLeft":case"centerRight":this.$bar.css({}),this.$message.css({fontSize:"13px",textAlign:"left"});break;case"bottom":this.$bar.css({});break;default:this.$bar.css({})}switch(this.options.type){case"alert":case"notification":this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"});break;case"warning":this.$bar.css({backgroundColor:"#FFEAA8",borderColor:"#FFC237",color:"#826200"}),this.$buttons.css({borderTop:"1px solid #FFC237"});break;case"error":this.$bar.css({backgroundColor:"#e58c7c",borderColor:"darkred",color:"#FFF"}),this.$message.css({fontWeight:"bold"}),this.$buttons.css({borderTop:"1px solid darkred"});break;case"information":this.$bar.css({backgroundColor:"#57B7E2",borderColor:"#0B90C4",color:"#FFF"}),this.$buttons.css({borderTop:"1px solid #0B90C4"});break;case"maleskineInformation":this.$bar.css({}),this.$buttons.css({borderTop:"1px solid #0B90C4"});break;case"success":this.$bar.css({backgroundColor:"lightgreen",borderColor:"#50C24E",color:"darkgreen"}),this.$buttons.css({borderTop:"1px solid #50C24E"});break;default:this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"})}},callback:{onShow:function(){t.noty.themes.maleskineTheme.helpers.borderFix.apply(this)},onClose:function(){t.noty.themes.maleskineTheme.helpers.borderFix.apply(this)}}}}(jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t,e){var n=0,i=Array.prototype.slice,o=t.cleanData;t.cleanData=function(e){for(var n,i=0;null!=(n=e[i]);i++)try{t(n).triggerHandler("remove")}catch(r){}o(e)},t.widget=function(e,n,i){var o,r,s,a,l={},c=e.split(".")[0];e=e.split(".")[1],o=c+"-"+e,i||(i=n,n=t.Widget),t.expr[":"][o.toLowerCase()]=function(e){return!!t.data(e,o)},t[c]=t[c]||{},r=t[c][e],s=t[c][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new s(t,e)},t.extend(s,r,{version:i.version,_proto:t.extend({},i),_childConstructors:[]}),a=new n,a.options=t.widget.extend({},a.options),t.each(i,function(e,i){return t.isFunction(i)?void(l[e]=function(){var t=function(){return n.prototype[e].apply(this,arguments)},o=function(t){return n.prototype[e].apply(this,t)};return function(){var e,n=this._super,r=this._superApply;return this._super=t,this._superApply=o,e=i.apply(this,arguments),this._super=n,this._superApply=r,e}}()):void(l[e]=i)}),s.prototype=t.widget.extend(a,{widgetEventPrefix:r?a.widgetEventPrefix:e},l,{constructor:s,namespace:c,widgetName:e,widgetFullName:o}),r?(t.each(r._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,s,n._proto)}),delete r._childConstructors):n._childConstructors.push(s),t.widget.bridge(e,s)},t.widget.extend=function(n){for(var o,r,s=i.call(arguments,1),a=0,l=s.length;l>a;a++)for(o in s[a])r=s[a][o],s[a].hasOwnProperty(o)&&r!==e&&(n[o]=t.isPlainObject(r)?t.isPlainObject(n[o])?t.widget.extend({},n[o],r):t.widget.extend({},r):r);return n},t.widget.bridge=function(n,o){var r=o.prototype.widgetFullName||n;t.fn[n]=function(s){var a="string"==typeof s,l=i.call(arguments,1),c=this;return s=!a&&l.length?t.widget.extend.apply(null,[s].concat(l)):s,this.each(a?function(){var i,o=t.data(this,r);return o?t.isFunction(o[s])&&"_"!==s.charAt(0)?(i=o[s].apply(o,l),i!==o&&i!==e?(c=i&&i.jquery?c.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+s+"' for "+n+" widget instance"):t.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+s+"'")}:function(){var e=t.data(this,r);e?e.option(s||{})._init():t.data(this,r,new o(s,this))}),c}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(n,i){var o,r,s,a=n;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof n)if(a={},o=n.split("."),n=o.shift(),o.length){for(r=a[n]=t.widget.extend({},this.options[n]),s=0;s<o.length-1;s++)r[o[s]]=r[o[s]]||{},r=r[o[s]];if(n=o.pop(),i===e)return r[n]===e?null:r[n];r[n]=i}else{if(i===e)return this.options[n]===e?null:this.options[n];a[n]=i}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,n,i){var o,r=this;"boolean"!=typeof e&&(i=n,n=e,e=!1),i?(n=o=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,o=this.widget()),t.each(i,function(i,s){function a(){return e||r.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof s?r[s]:s).apply(r,arguments):void 0}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||t.guid++);var l=i.match(/^(\w+)\s*(.*)$/),c=l[1]+r.eventNamespace,u=l[2];u?o.delegate(u,c,a):n.bind(c,a)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,i){var o,r,s=this.options[e];if(i=i||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(o in r)o in n||(n[o]=r[o]);return this.element.trigger(n,i),!(t.isFunction(s)&&s.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,o,r){"string"==typeof o&&(o={effect:o});var s,a=o?o===!0||"number"==typeof o?n:o.effect||n:e;o=o||{},"number"==typeof o&&(o={duration:o}),s=!t.isEmptyObject(o),o.complete=r,o.delay&&i.delay(o.delay),s&&t.effects&&t.effects.effect[a]?i[e](o):a!==e&&i[a]?i[a](o.duration,o.easing,r):i.queue(function(n){t(this)[e](),r&&r.call(i[0]),n()})}})}),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],t):t(window.jQuery)}(function(t){"use strict";t.support.xhrFileUpload=!(!window.XMLHttpRequestUpload||!window.FileReader),t.support.xhrFormDataFileUpload=!!window.FormData,t.widget("blueimp.fileupload",{options:{dropZone:t(document),pasteZone:t(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,formData:function(t){return t.serializeArray()},add:function(e,n){(n.autoUpload||n.autoUpload!==!1&&(t(this).data("blueimp-fileupload")||t(this).data("fileupload")).options.autoUpload)&&n.submit()},processData:!1,contentType:!1,cache:!1},_refreshOptionsList:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(t,e,n){var i=t-this.timestamp;return(!this.bitrate||!n||i>n)&&(this.bitrate=(e-this.loaded)*(1e3/i)*8,this.loaded=e,this.timestamp=t),this.bitrate}},_isXHRUpload:function(e){return!e.forceIframeTransport&&(!e.multipart&&t.support.xhrFileUpload||t.support.xhrFormDataFileUpload)},_getFormData:function(e){var n;return"function"==typeof e.formData?e.formData(e.form):t.isArray(e.formData)?e.formData:"object"===t.type(e.formData)?(n=[],t.each(e.formData,function(t,e){n.push({name:t,value:e})}),n):[]},_getTotal:function(e){var n=0;return t.each(e,function(t,e){n+=e.size||1}),n},_initProgressObject:function(e){var n={loaded:0,total:0,bitrate:0};e._progress?t.extend(e._progress,n):e._progress=n},_initResponseObject:function(t){var e;if(t._response)for(e in t._response)t._response.hasOwnProperty(e)&&delete t._response[e];else t._response={}},_onProgress:function(t,e){if(t.lengthComputable){var n,i=Date.now?Date.now():(new Date).getTime();if(e._time&&e.progressInterval&&i-e._time<e.progressInterval&&t.loaded!==t.total)return;e._time=i,n=Math.floor(t.loaded/t.total*(e.chunkSize||e._progress.total))+(e.uploadedBytes||0),this._progress.loaded+=n-e._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(i,this._progress.loaded,e.bitrateInterval),e._progress.loaded=e.loaded=n,e._progress.bitrate=e.bitrate=e._bitrateTimer.getBitrate(i,n,e.bitrateInterval),this._trigger("progress",t,e),this._trigger("progressall",t,this._progress)}},_initProgressListener:function(e){var n=this,i=e.xhr?e.xhr():t.ajaxSettings.xhr();i.upload&&(t(i.upload).bind("progress",function(t){var i=t.originalEvent;t.lengthComputable=i.lengthComputable,t.loaded=i.loaded,t.total=i.total,n._onProgress(t,e)}),e.xhr=function(){return i})},_isInstanceOf:function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"},_initXHRData:function(e){var n,i=this,o=e.files[0],r=e.multipart||!t.support.xhrFileUpload,s=e.paramName[0];e.headers=e.headers||{},e.contentRange&&(e.headers["Content-Range"]=e.contentRange),r?t.support.xhrFormDataFileUpload&&(e.postMessage?(n=this._getFormData(e),e.blob?n.push({name:s,value:e.blob}):t.each(e.files,function(t,i){n.push({name:e.paramName[t]||s,value:i})})):(i._isInstanceOf("FormData",e.formData)?n=e.formData:(n=new FormData,t.each(this._getFormData(e),function(t,e){n.append(e.name,e.value)})),e.blob?(e.headers["Content-Disposition"]='attachment; filename="'+encodeURI(o.name)+'"',n.append(s,e.blob,o.name)):t.each(e.files,function(t,o){(i._isInstanceOf("File",o)||i._isInstanceOf("Blob",o))&&n.append(e.paramName[t]||s,o,o.name)})),e.data=n):(e.headers["Content-Disposition"]='attachment; filename="'+encodeURI(o.name)+'"',e.contentType=o.type,e.data=e.blob||o),e.blob=null},_initIframeSettings:function(e){e.dataType="iframe "+(e.dataType||""),e.formData=this._getFormData(e),e.redirect&&t("<a></a>").prop("href",e.url).prop("host")!==location.host&&e.formData.push({name:e.redirectParamName||"redirect",value:e.redirect})},_initDataSettings:function(t){this._isXHRUpload(t)?(this._chunkedUpload(t,!0)||(t.data||this._initXHRData(t),this._initProgressListener(t)),t.postMessage&&(t.dataType="postmessage "+(t.dataType||""))):this._initIframeSettings(t)},_getParamName:function(e){var n=t(e.fileInput),i=e.paramName;return i?t.isArray(i)||(i=[i]):(i=[],n.each(function(){for(var e=t(this),n=e.prop("name")||"files[]",o=(e.prop("files")||[1]).length;o;)i.push(n),o-=1}),i.length||(i=[n.prop("name")||"files[]"])),i},_initFormSettings:function(e){e.form&&e.form.length||(e.form=t(e.fileInput.prop("form")),e.form.length||(e.form=t(this.options.fileInput.prop("form")))),e.paramName=this._getParamName(e),e.url||(e.url=e.form.prop("action")||location.href),e.type=(e.type||e.form.prop("method")||"").toUpperCase(),"POST"!==e.type&&"PUT"!==e.type&&"PATCH"!==e.type&&(e.type="POST"),e.formAcceptCharset||(e.formAcceptCharset=e.form.attr("accept-charset"))},_getAJAXSettings:function(e){var n=t.extend({},this.options,e);return this._initFormSettings(n),this._initDataSettings(n),n},_getDeferredState:function(t){return t.state?t.state():t.isResolved()?"resolved":t.isRejected()?"rejected":"pending"},_enhancePromise:function(t){return t.success=t.done,t.error=t.fail,t.complete=t.always,t},_getXHRPromise:function(e,n,i){var o=t.Deferred(),r=o.promise();return n=n||this.options.context||r,e===!0?o.resolveWith(n,i):e===!1&&o.rejectWith(n,i),r.abort=o.promise,this._enhancePromise(r)},_addConvenienceMethods:function(t,e){var n=this;e.submit=function(){return"pending"!==this.state()&&(e.jqXHR=this.jqXHR=n._trigger("submit",t,this)!==!1&&n._onSend(t,this)),this.jqXHR||n._getXHRPromise()},e.abort=function(){return this.jqXHR?this.jqXHR.abort():n._getXHRPromise()},e.state=function(){return this.jqXHR?n._getDeferredState(this.jqXHR):void 0},e.progress=function(){return this._progress},e.response=function(){return this._response}},_getUploadedBytes:function(t){var e=t.getResponseHeader("Range"),n=e&&e.split("-"),i=n&&n.length>1&&parseInt(n[1],10);return i&&i+1},_chunkedUpload:function(e,n){var i,o,r=this,s=e.files[0],a=s.size,l=e.uploadedBytes=e.uploadedBytes||0,c=e.maxChunkSize||a,u=s.slice||s.webkitSlice||s.mozSlice,h=t.Deferred(),d=h.promise();return this._isXHRUpload(e)&&u&&(l||a>c)&&!e.data?n?!0:l>=a?(s.error="Uploaded bytes exceed file size",this._getXHRPromise(!1,e.context,[null,"error",s.error])):(o=function(){var n=t.extend({},e),d=n._progress.loaded;
n.blob=u.call(s,l,l+c,s.type),n.chunkSize=n.blob.size,n.contentRange="bytes "+l+"-"+(l+n.chunkSize-1)+"/"+a,r._initXHRData(n),r._initProgressListener(n),i=(r._trigger("chunksend",null,n)!==!1&&t.ajax(n)||r._getXHRPromise(!1,n.context)).done(function(i,s,c){l=r._getUploadedBytes(c)||l+n.chunkSize,n._progress.loaded===d&&r._onProgress(t.Event("progress",{lengthComputable:!0,loaded:l-n.uploadedBytes,total:l-n.uploadedBytes}),n),e.uploadedBytes=n.uploadedBytes=l,n.result=i,n.textStatus=s,n.jqXHR=c,r._trigger("chunkdone",null,n),r._trigger("chunkalways",null,n),a>l?o():h.resolveWith(n.context,[i,s,c])}).fail(function(t,e,i){n.jqXHR=t,n.textStatus=e,n.errorThrown=i,r._trigger("chunkfail",null,n),r._trigger("chunkalways",null,n),h.rejectWith(n.context,[t,e,i])})},this._enhancePromise(d),d.abort=function(){return i.abort()},o(),d):!1},_beforeSend:function(t,e){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(e),this._initProgressObject(e),e._progress.loaded=e.loaded=e.uploadedBytes||0,e._progress.total=e.total=this._getTotal(e.files)||1,e._progress.bitrate=e.bitrate=0,this._active+=1,this._progress.loaded+=e.loaded,this._progress.total+=e.total},_onDone:function(e,n,i,o){var r=o._progress.total,s=o._response;o._progress.loaded<r&&this._onProgress(t.Event("progress",{lengthComputable:!0,loaded:r,total:r}),o),s.result=o.result=e,s.textStatus=o.textStatus=n,s.jqXHR=o.jqXHR=i,this._trigger("done",null,o)},_onFail:function(t,e,n,i){var o=i._response;i.recalculateProgress&&(this._progress.loaded-=i._progress.loaded,this._progress.total-=i._progress.total),o.jqXHR=i.jqXHR=t,o.textStatus=i.textStatus=e,o.errorThrown=i.errorThrown=n,this._trigger("fail",null,i)},_onAlways:function(t,e,n,i){this._trigger("always",null,i)},_onSend:function(e,n){n.submit||this._addConvenienceMethods(e,n);var i,o,r,s,a=this,l=a._getAJAXSettings(n),c=function(){return a._sending+=1,l._bitrateTimer=new a._BitrateTimer,i=i||((o||a._trigger("send",e,l)===!1)&&a._getXHRPromise(!1,l.context,o)||a._chunkedUpload(l)||t.ajax(l)).done(function(t,e,n){a._onDone(t,e,n,l)}).fail(function(t,e,n){a._onFail(t,e,n,l)}).always(function(t,e,n){if(a._onAlways(t,e,n,l),a._sending-=1,a._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>a._sending)for(var i=a._slots.shift();i;){if("pending"===a._getDeferredState(i)){i.resolve();break}i=a._slots.shift()}0===a._active&&a._trigger("stop")})};return this._beforeSend(e,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(r=t.Deferred(),this._slots.push(r),s=r.pipe(c)):s=this._sequence=this._sequence.pipe(c,c),s.abort=function(){return o=[void 0,"abort","abort"],i?i.abort():(r&&r.rejectWith(l.context,o),c())},this._enhancePromise(s)):c()},_onAdd:function(e,n){var i,o,r,s,a=this,l=!0,c=t.extend({},this.options,n),u=c.limitMultiFileUploads,h=this._getParamName(c);if((c.singleFileUploads||u)&&this._isXHRUpload(c))if(!c.singleFileUploads&&u)for(r=[],i=[],s=0;s<n.files.length;s+=u)r.push(n.files.slice(s,s+u)),o=h.slice(s,s+u),o.length||(o=h),i.push(o);else i=h;else r=[n.files],i=[h];return n.originalFiles=n.files,t.each(r||n.files,function(o,s){var c=t.extend({},n);return c.files=r?s:[s],c.paramName=i[o],a._initResponseObject(c),a._initProgressObject(c),a._addConvenienceMethods(e,c),l=a._trigger("add",e,c)}),l},_replaceFileInput:function(e){var n=e.clone(!0);t("<form></form>").append(n)[0].reset(),e.after(n).detach(),t.cleanData(e.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(t,i){return i===e[0]?n[0]:i}),e[0]===this.element[0]&&(this.element=n)},_handleFileTreeEntry:function(e,n){var i,o=this,r=t.Deferred(),s=function(t){t&&!t.entry&&(t.entry=e),r.resolve([t])};return n=n||"",e.isFile?e._file?(e._file.relativePath=n,r.resolve(e._file)):e.file(function(t){t.relativePath=n,r.resolve(t)},s):e.isDirectory?(i=e.createReader(),i.readEntries(function(t){o._handleFileTreeEntries(t,n+e.name+"/").done(function(t){r.resolve(t)}).fail(s)},s)):r.resolve([]),r.promise()},_handleFileTreeEntries:function(e,n){var i=this;return t.when.apply(t,t.map(e,function(t){return i._handleFileTreeEntry(t,n)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(e){e=e||{};var n=e.items;return n&&n.length&&(n[0].webkitGetAsEntry||n[0].getAsEntry)?this._handleFileTreeEntries(t.map(n,function(t){var e;return t.webkitGetAsEntry?(e=t.webkitGetAsEntry(),e&&(e._file=t.getAsFile()),e):t.getAsEntry()})):t.Deferred().resolve(t.makeArray(e.files)).promise()},_getSingleFileInputFiles:function(e){e=t(e);var n,i,o=e.prop("webkitEntries")||e.prop("entries");if(o&&o.length)return this._handleFileTreeEntries(o);if(n=t.makeArray(e.prop("files")),n.length)void 0===n[0].name&&n[0].fileName&&t.each(n,function(t,e){e.name=e.fileName,e.size=e.fileSize});else{if(i=e.prop("value"),!i)return t.Deferred().resolve([]).promise();n=[{name:i.replace(/^.*\\/,"")}]}return t.Deferred().resolve(n).promise()},_getFileInputFiles:function(e){return e instanceof t&&1!==e.length?t.when.apply(t,t.map(e,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(e)},_onChange:function(e){var n=this,i={fileInput:t(e.target),form:t(e.target.form)};this._getFileInputFiles(i.fileInput).always(function(t){i.files=t,n.options.replaceFileInput&&n._replaceFileInput(i.fileInput),n._trigger("change",e,i)!==!1&&n._onAdd(e,i)})},_onPaste:function(e){var n=e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items,i={files:[]};return n&&n.length&&(t.each(n,function(t,e){var n=e.getAsFile&&e.getAsFile();n&&i.files.push(n)}),this._trigger("paste",e,i)===!1||this._onAdd(e,i)===!1)?!1:void 0},_onDrop:function(t){var e=this,n=t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer,i={};n&&n.files&&n.files.length&&(t.preventDefault(),this._getDroppedFiles(n).always(function(n){i.files=n,e._trigger("drop",t,i)!==!1&&e._onAdd(t,i)}))},_onDragOver:function(e){var n=e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;if(n){if(this._trigger("dragover",e)===!1)return!1;-1!==t.inArray("Files",n.types)&&(n.dropEffect="copy",e.preventDefault())}},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(e,n){var i=-1!==t.inArray(e,this._refreshOptionsList);i&&this._destroyEventHandlers(),this._super(e,n),i&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var e=this.options;void 0===e.fileInput?e.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):e.fileInput instanceof t||(e.fileInput=t(e.fileInput)),e.dropZone instanceof t||(e.dropZone=t(e.dropZone)),e.pasteZone instanceof t||(e.pasteZone=t(e.pasteZone))},_create:function(){var e=this.options;t.extend(e,t(this.element[0].cloneNode(!1)).data()),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(e){var n=this;e&&!this.options.disabled&&(e.fileInput&&!e.files?this._getFileInputFiles(e.fileInput).always(function(t){e.files=t,n._onAdd(null,e)}):(e.files=t.makeArray(e.files),this._onAdd(null,e)))},send:function(e){if(e&&!this.options.disabled){if(e.fileInput&&!e.files){var n,i,o=this,r=t.Deferred(),s=r.promise();return s.abort=function(){return i=!0,n?n.abort():(r.reject(null,"abort","abort"),s)},this._getFileInputFiles(e.fileInput).always(function(t){i||(e.files=t,n=o._onSend(null,e).then(function(t,e,n){r.resolve(t,e,n)},function(t,e,n){r.reject(t,e,n)}))}),this._enhancePromise(s)}if(e.files=t.makeArray(e.files),e.files.length)return this._onSend(null,e)}return this._getXHRPromise(!1,e&&e.context)}})}),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t(window.jQuery)}(function(t){"use strict";var e=0;t.ajaxTransport("iframe",function(n){if(n.async){var i,o,r;return{send:function(s,a){i=t('<form style="display:none;"></form>'),i.attr("accept-charset",n.formAcceptCharset),r=/\?/.test(n.url)?"&":"?","DELETE"===n.type?(n.url=n.url+r+"_method=DELETE",n.type="POST"):"PUT"===n.type?(n.url=n.url+r+"_method=PUT",n.type="POST"):"PATCH"===n.type&&(n.url=n.url+r+"_method=PATCH",n.type="POST"),o=t('<iframe src="javascript:false;" name="iframe-transport-'+(e+=1)+'"></iframe>').bind("load",function(){var e,r=t.isArray(n.paramName)?n.paramName:[n.paramName];o.unbind("load").bind("load",function(){var e;try{if(e=o.contents(),!e.length||!e[0].firstChild)throw new Error}catch(n){e=void 0}a(200,"success",{iframe:e}),t('<iframe src="javascript:false;"></iframe>').appendTo(i),i.remove()}),i.prop("target",o.prop("name")).prop("action",n.url).prop("method",n.type),n.formData&&t.each(n.formData,function(e,n){t('<input type="hidden"/>').prop("name",n.name).val(n.value).appendTo(i)}),n.fileInput&&n.fileInput.length&&"POST"===n.type&&(e=n.fileInput.clone(),n.fileInput.after(function(t){return e[t]}),n.paramName&&n.fileInput.each(function(e){t(this).prop("name",r[e]||n.paramName)}),i.append(n.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")),i.submit(),e&&e.length&&n.fileInput.each(function(n,i){var o=t(e[n]);t(i).prop("name",o.prop("name")),o.replaceWith(i)})}),i.append(o).appendTo(document.body)},abort:function(){o&&o.unbind("load").prop("src","javascript".concat(":false;")),i&&i.remove()}}}}),t.ajaxSetup({converters:{"iframe text":function(e){return e&&t(e[0].body).text()},"iframe json":function(e){return e&&t.parseJSON(t(e[0].body).text())},"iframe html":function(e){return e&&t(e[0].body).html()},"iframe script":function(e){return e&&t.globalEval(t(e[0].body).text())}}})});var I18n=I18n||{};I18n.defaultLocale="en",I18n.fallbacks=!1,I18n.defaultSeparator=".",I18n.locale=null,I18n.PLACEHOLDER=/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,I18n.isValidNode=function(t,e,n){return null!==t[e]&&t[e]!==n},I18n.lookup=function(t,e){var n,e=e||{},i=t,o=this.prepareOptions(I18n.translations),r=o[e.locale||I18n.currentLocale()],e=this.prepareOptions(e);if(r){for("object"==typeof t&&(t=t.join(this.defaultSeparator)),e.scope&&(t=e.scope.toString()+this.defaultSeparator+t),t=t.split(this.defaultSeparator);t.length>0;)if(n=t.shift(),r=r[n],!r){I18n.fallbacks&&!e.fallback&&(r=I18n.lookup(i,this.prepareOptions({locale:I18n.defaultLocale,fallback:!0},e)));break}return!r&&this.isValidNode(e,"defaultValue")&&(r=e.defaultValue),r}},I18n.prepareOptions=function(){for(var t,e={},n=arguments.length,i=0;n>i;i++)if(t=arguments[i])for(var o in t)this.isValidNode(e,o)||(e[o]=t[o]);return e},I18n.interpolate=function(t,e){e=this.prepareOptions(e);var n,i,o,r=t.match(this.PLACEHOLDER);if(!r)return t;for(var s=0;n=r[s];s++)o=n.replace(this.PLACEHOLDER,"$1"),i=e[o],this.isValidNode(e,o)||(i="[missing "+n+" value]"),regex=new RegExp(n.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}")),t=t.replace(regex,i);return t},I18n.translate=function(t,e){e=this.prepareOptions(e);var n=this.lookup(t,e);try{return"object"==typeof n?"number"==typeof e.count?this.pluralize(e.count,t,e):n:this.interpolate(n,e)}catch(i){return this.missingTranslation(t)}},I18n.localize=function(t,e){switch(t){case"currency":return this.toCurrency(e);case"number":return t=this.lookup("number.format"),this.toNumber(e,t);case"percentage":return this.toPercentage(e);default:return t.match(/^(date|time)/)?this.toTime(t,e):e.toString()}},I18n.parseDate=function(t){var e,n;if("object"==typeof t)return t;if(e=t.toString().match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2}))?(Z|\+0000)?/)){for(var i=1;6>=i;i++)e[i]=parseInt(e[i],10)||0;e[2]-=1,n=e[7]?new Date(Date.UTC(e[1],e[2],e[3],e[4],e[5],e[6])):new Date(e[1],e[2],e[3],e[4],e[5],e[6])}else"number"==typeof t?(n=new Date,n.setTime(t)):t.match(/\d+ \d+:\d+:\d+ [+-]\d+ \d+/)?(n=new Date,n.setTime(Date.parse(t))):(n=new Date,n.setTime(Date.parse(t)));return n},I18n.toTime=function(t,e){var n=this.parseDate(e),i=this.lookup(t);return n.toString().match(/invalid/i)?n.toString():i?this.strftime(n,i):n.toString()},I18n.strftime=function(t,e){var n=this.lookup("date");if(!n)return t.toString();n.meridian=n.meridian||["AM","PM"];var i=t.getDay(),o=t.getDate(),r=t.getFullYear(),s=t.getMonth()+1,a=t.getHours(),l=a,c=a>11?1:0,u=t.getSeconds(),h=t.getMinutes(),d=t.getTimezoneOffset(),p=Math.floor(Math.abs(d/60)),f=Math.abs(d)-60*p,m=(d>0?"-":"+")+(p.toString().length<2?"0"+p:p)+(f.toString().length<2?"0"+f:f);l>12?l-=12:0===l&&(l=12);var g=function(t){var e="0"+t.toString();return e.substr(e.length-2)},v=e;return v=v.replace("%a",n.abbr_day_names[i]),v=v.replace("%A",n.day_names[i]),v=v.replace("%b",n.abbr_month_names[s]),v=v.replace("%B",n.month_names[s]),v=v.replace("%d",g(o)),v=v.replace("%e",o),v=v.replace("%-d",o),v=v.replace("%H",g(a)),v=v.replace("%-H",a),v=v.replace("%I",g(l)),v=v.replace("%-I",l),v=v.replace("%m",g(s)),v=v.replace("%-m",s),v=v.replace("%M",g(h)),v=v.replace("%-M",h),v=v.replace("%p",n.meridian[c]),v=v.replace("%S",g(u)),v=v.replace("%-S",u),v=v.replace("%w",i),v=v.replace("%y",g(r)),v=v.replace("%-y",g(r).replace(/^0+/,"")),v=v.replace("%Y",r),v=v.replace("%z",m)},I18n.toNumber=function(t,e){e=this.prepareOptions(e,this.lookup("number.format"),{precision:3,separator:".",delimiter:",",strip_insignificant_zeros:!1});var n,i,o=0>t,r=Math.abs(t).toFixed(e.precision).toString(),s=r.split("."),a=[];for(t=s[0],n=s[1];t.length>0;)a.unshift(t.substr(Math.max(0,t.length-3),3)),t=t.substr(0,t.length-3);if(i=a.join(e.delimiter),e.precision>0&&(i+=e.separator+s[1]),o&&(i="-"+i),e.strip_insignificant_zeros){var l={separator:new RegExp(e.separator.replace(/\./,"\\.")+"$"),zeros:/0+$/};i=i.replace(l.zeros,"").replace(l.separator,"")}return i},I18n.toCurrency=function(t,e){return e=this.prepareOptions(e,this.lookup("number.currency.format"),this.lookup("number.format"),{unit:"$",precision:2,format:"%u%n",delimiter:",",separator:"."}),t=this.toNumber(t,e),t=e.format.replace("%u",e.unit).replace("%n",t)},I18n.toHumanSize=function(t,e){for(var n,i,o=1024,r=t,s=0;r>=o&&4>s;)r/=o,s+=1;return 0===s?(n=this.t("number.human.storage_units.units.byte",{count:r}),i=0):(n=this.t("number.human.storage_units.units."+[null,"kb","mb","gb","tb"][s]),i=r-Math.floor(r)===0?0:1),e=this.prepareOptions(e,{precision:i,format:"%n%u",delimiter:""}),t=this.toNumber(r,e),t=e.format.replace("%u",n).replace("%n",t)},I18n.toPercentage=function(t,e){return e=this.prepareOptions(e,this.lookup("number.percentage.format"),this.lookup("number.format"),{precision:3,separator:".",delimiter:""}),t=this.toNumber(t,e),t+"%"},I18n.pluralize=function(t,e,n){var i;try{i=this.lookup(e,n)}catch(o){}if(!i)return this.missingTranslation(e);var r;switch(n=this.prepareOptions(n),n.count=t.toString(),Math.abs(t)){case 0:r=this.isValidNode(i,"zero")?i.zero:this.isValidNode(i,"none")?i.none:this.isValidNode(i,"other")?i.other:this.missingTranslation(e,"zero");break;case 1:r=this.isValidNode(i,"one")?i.one:this.missingTranslation(e,"one");break;default:r=this.isValidNode(i,"other")?i.other:this.missingTranslation(e,"other")}return this.interpolate(r,n)},I18n.missingTranslation=function(){for(var t='[missing "'+this.currentLocale(),e=arguments.length,n=0;e>n;n++)t+="."+arguments[n];return t+='" translation]'},I18n.currentLocale=function(){return I18n.locale||I18n.defaultLocale},I18n.t=I18n.translate,I18n.l=I18n.localize,I18n.p=I18n.pluralize;var I18n=I18n||{};I18n.translations=I18n.translations||{},I18n.translations.en={kalamu:{link_format_error:"Only http, https and ftp are supported.",insert_image:"Insert Image",local_image:"from computer",or:"or",internet_image:"from internet",select_image:"Select image file",cancel:"Cancel",image_url:"Image url",ok:"OK",processing:"processing...",failed:"Failed. Please try again.",image_url_blank:"Please enter image url",insert_link:"Insert Link",link_url:"Link url",link_text:"Link text",wrong_image_file_format:"Invalid image file format, please use jpg/jpeg/png/gif file.",size_excceed_limit:"File too large, please choose file under 5MB.",image_url_blank:"Please enter image url.",image_protocol_not_supported:"Url protocol not supported.",select_image:"Select image to upload",image_privacy:" Click question mark to learn more about privacy on upload images",upload_internal_server_error:"Upload failed, please try again."},ie_warning:{title:"Your Internet Explorer version is too low",upgrade_ie:'Please <a href="http://windows.microsoft.com/en-us/internet-explorer/downloads/ie-9/worldwide-languages">upgrade your Internet Explorer</a>.',use_chrome:'Or use <a href="http://www.google.com/chrome" class="use-chrome"> Google Chrome </a> to have the best experience on jianshu.io',skip:"Skip"},reading:{registration_complete:"Registration is successful, now redirecting...",errors:{email_invalid:"Email address is invalid."},download_changweibo_image:"Download ChangWeibo Image",following:" Following",unfollow:" Unfollow",subscribing:" Subscribing",unsubscribe:" Unsubscribe",subscribing_with_likes:" Subscribing | {{total_likes}}",unsubscribe_with_likes:" Unsubscribe | {{total_likes}}",bian:"",remove:"Remove",comment:{undismiss_button:"Undo",dismiss_info:"Comment was dismissed",undismiss_info:"Comment was made public"},reject:{title:"Decline this article",description:"You could write something back to the author, otherwise we won't email the author about it.",placeholder:"Add an optional note for the author",close:"Cancel",submit:"OK"},further_reading:{button:{"continue":"Continue",save:"Save",load:"OK",cancel:"Cancel","delete":" Delete"},from:" on ",add:"add",states:{"private":" Private","public":" Public",dismiss:" Delete"},load_link_error:"An error occurred, and we were unable to load this link.",undo_link:"The link is now{{state}}\u30fb<a class='undo' data-further-reading-id='{{id}}' data-state='{{originState}}' href='javascript:void(null)'>\u64a4\u9500</a>",link_text_placeholder:"Paste a link to content related to this post",title_placeholder:"Edit title",description_placeholder:"Edit description",delete_success:"Deleted successfully"},timeline:{show_comments:"Show comments",collapse_comments:"Collapse",reply:"Reply","delete":"Delete"},self_destruction_confirm:"Please confirm you really want to destroy your account, there's no way back!",delete_comment_confirm:"Confirm to delete your comment?",collections:{select_note:"Select a note:",select_note_error:"Please select a note."},social_sharing:{trailing_jianshushe:"- jianshu.io",share_to_label:{weibo:"Share it on Weibo",tweibo:"Share it on Tencent Weibo",qzone:"Share it on QQ zone",douban:"Share it on Douban",twitter:"Share it on Twitter",facebook:"Share it on Facebook",google_plus:"Share it on Google+",renren:"Share it on RenRen"},self_share_note_text:'I just wrote a new article "{{note_title}}". Check it out! ',reader_share_note_text:'I recommend "{{note_title}" by {{user}}. ',official_account:"via {{account}}"}},new_notebook:"New Notebook",new_notebook_name:"New notebook name",new_note:"New Note",default_note_title:"Untitled",delete_notebook_confirm:'Please confirm to delete this notebook: "{{title}}". The notes in this notebook will also be deleted and the action is not reversible.',delete_note_confirm:'Please confirm to delete this note: "{{title}}". The action is not reversible.',rename_notebook:"Rename Notebook",saving:"Saving...",saved:"Saved",saved_partially:"Some content at the tail is not saved",change_notebook_placeholder:"Select a notebook to move into...",wordage:"Wordage: {{wordage}}",commerical_placeholder:"A notebook for writers. A pure enviroment to concentrate on writing.",notebook_name_placeholder:"Please input a notebook name...",nickname_format_invalid:"Nickname is valid.",nickname:"Nickname",spine_ajax_pending:"Data is still being sent to the server; you may lose unsaved changes if you close the page.",form_dirty:"Unsaved content detected. Are you sure you want to leave this page?",toggle_to_markdown:"Toggle preferred type to Markdown",toggle_to_plain:"Toggle preferred type to Plain Text",suggest_chrome:"We find you are using Internet Explorer, we suggest using Google Chrome for the best experience on Jianshu.io",suggest_upgrade:"We find you are using Internet Explorer 8/9, using these old browsers, you will encounter performance issues, and also we couldn't provider our functions completely. We suggest using Google Chrome for the best experience, or you could upgrade to Internet Explorer 10 for complete functions.",chrome_bug:"We've found existing bug for this Chrome version (33.0.1750.152), you will not be able to upload images/edit link from RichText editor. Please upgrade to the latest Chrome version.",restore_a_locale_copy:"We restored a locale copy of this note. If it's not your latest version you could: ",leaving_note_unsaved:"Your note has modified data and it's not saved, save it?",press_esc_to_leave:"Press ESC to leave.",new_note_bottom:"New Note Below",ajax_error:"Error detected, please backup your current unsaved work and refresh page.",publish:"Publish",published:"Published",unpublish:"Unpublish",errors:{401:"Authentication failed, please manually save your current work and refresh this page",404:"Note/Notebook not found, please refresh this page",500:"Server error, please manually save your current work and refresh this page",writer_version_conflict:"You have already updated this article somewhere else. In order not to lose any content, please manually backup your article and refresh this page.",content_overflow:"Size of current article is already above the limit, some content at the tail is not saved. Please manual backup your content first and then create a new article."},warnings:{content_too_large:"Size of current article is reaching the limit. Please consider opening up a new one."},network:{issue:"You network connection is experiencing problem, may come back...backup your current working for good...",down:"You network connection may be down, make sure you backup what you are writing!",back:"You network connection is back."},navbar:{homepage:"Homepage",collections:"Collections",top:"Trending",timeline:"Timeline",writer:"Go writing",user_homepage:"Homepage",favourites:"Favourites",bookmarks:"Bookmarks",notifications:"Notifications",messages:"Messages",view_mode:"View Mode",settings:"Settings",sign_out:"Sign out"},note_modified:{mac:"Note modified, press command + s to save it.",nonmac:"Note modified, press ctrl + s to save it."},note:{untitled:"Untitled",dropdown:{share_directly:"Share it !",move_note:"Move note.",shared:"Already Shared",share_to:"Share to",share_to_sns:{weibo:"Share it on Weibo",twitter:"Share it on Twitter",douban:"Share it on Douban",tweibo:"Share it on Tencent Weibo",qzone:"Share it on QQzone",facebook:"Share it on Facebook",google_plus:"Share it on Google+"},open_in_new_window:"Open in new window",stop_sharing:"Stop sharing"},moving:{title:"Move Note To"},share:{title:"Publish it",help:"After click the publish button, every one could access your note via the following link.",permanent_link:"Permanent Link",success:"Successfully published. Permanent Link:",to_sns:"You could share it to your friends: "},shareToWeibo:{share:"Share",done:"Done, share with ChangeWeibo image",download:"Download ChangeWeibo image",processing:"Fetching ChangWeibo image",processingNotice:"We are generating an image for your article, normally it takes around 10s. If you do not need an image for you weibo, you can just click the share buton below."}},share:{text:'Check out my new writing "{{note_title}}"!',official_account:"via @{{official_account}}.",trailing_jianshushe:"- jianshu.io"},button:{submitting:"Submitting...",submit_failed:"Submit failed",submit:"Submit",cancel:"Cancel",close:"Close",publish:"Publish",ok:"OK",undo:"Undo",upload_image_notice:"Direct drag and drop your image file to the editing area will perform the upload."},date:{formats:{"default":"%Y-%m-%d","short":"%b %d","long":"%B %d, %Y"},day_names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbr_day_names:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],month_names:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],abbr_month_names:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],order:["year","month","day"]},time:{formats:{"default":"%a, %d %b %Y %H:%M:%S %z","short":"%d %b %H:%M","long":"%B %d, %Y %H:%M"},am:"am",pm:"pm"},support:{array:{words_connector:", ",two_words_connector:" and ",last_word_connector:", and "}},datetime:{distance_in_words:{half_a_minute:"half a minute",less_than_x_seconds:{one:"less than 1 second",other:"less than %{count} seconds"},x_seconds:{one:"1 second",other:"%{count} seconds"},less_than_x_minutes:{one:"less than a minute",other:"less than %{count} minutes"},x_minutes:{one:"1 minute",other:"%{count} minutes"},about_x_hours:{one:"about 1 hour",other:"about %{count} hours"},x_days:{one:"1 day",other:"%{count} days"},about_x_months:{one:"about 1 month",other:"about %{count} months"},x_months:{one:"1 month",other:"%{count} months"},about_x_years:{one:"about 1 year",other:"about %{count} years"},over_x_years:{one:"over 1 year",other:"over %{count} years"},almost_x_years:{one:"almost 1 year",other:"almost %{count} years"}},prompts:{year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",second:"Seconds"}}};var I18n=I18n||{};I18n.translations=I18n.translations||{},I18n.translations["zh-CN"]={kalamu:{link_format_error:"\u4ec5\u652f\u6301http, https, ftp\u94fe\u63a5\u3002",insert_image:"\u63d2\u5165\u56fe\u7247",local_image:"\u672c\u5730\u4e0a\u4f20",or:"\u6216",internet_image:"\u7f51\u7edc\u56fe\u7247",select_image:"\u9009\u62e9\u56fe\u7247",cancel:"\u53d6\u6d88",image_url:"\u56fe\u7247\u94fe\u63a5",ok:"\u786e\u8ba4",processing:"\u4e0a\u4f20\u4e2d...",failed:"\u4e0a\u4f20\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5\u3002",image_url_blank:"\u8bf7\u8f93\u5165\u94fe\u63a5",insert_link:"\u63d2\u5165\u94fe\u63a5",link_url:"\u94fe\u63a5\u5730\u5740",link_text:"\u94fe\u63a5\u6587\u672c",wrong_image_file_format:"\u56fe\u7247\u683c\u5f0f\u9519\u8bef,\u8bf7\u4f7f\u7528jpg/jpeg/png/gif\u6587\u4ef6\u3002",size_excceed_limit:"\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7\u9650\u5236, \u8bf7\u9009\u62e95MB\u4ee5\u4e0b\u7684\u6587\u4ef6\u3002",image_url_blank:"\u8bf7\u586b\u5199\u56fe\u7247\u5730\u5740\u3002",image_protocol_not_supported:"\u6211\u4eec\u76ee\u524d\u4e0d\u652f\u6301\u8be5\u534f\u8bae\u3002",select_image:"\u9009\u62e9\u56fe\u7247\u4e0a\u4f20",image_privacy:"\u6709\u5173\u56fe\u7247\u79c1\u5bc6\u6027\u70b9\u51fb\u95ee\u53f7\u4e86\u89e3\u66f4\u591a",upload_internal_server_error:"\u4e0a\u4f20\u5931\u8d25, \u8bf7\u91cd\u8bd5\u3002"},ie_warning:{title:"\u60a8\u7684\u6d4f\u89c8\u5668\u7248\u672c\u8fc7\u4f4e",upgrade_ie:'\u8bf7\u5347\u7ea7\u60a8\u7684 IE \u6d4f\u89c8\u5668\uff0c <a href="http://windows.microsoft.com/zh-CN/internet-explorer/downloads/ie-9/worldwide-languages">\u70b9\u6b64\u5904\u5347\u7ea7</a>\u3002',use_chrome:'\u6211\u4eec\u63a8\u8350\u4f7f\u7528 <a href="http://www.google.com/chrome" class="use-chrome">Google Chrome </a>\u6765\u8bbf\u95ee\u7b80\u4e66\u83b7\u53d6\u6700\u4f73\u7684\u7528\u6237\u4f53\u9a8c\u3002',skip:"\u8df3\u8fc7"},reading:{registration_complete:"\u6ce8\u518c\u6210\u529f\uff0c\u6b63\u5728\u8df3\u8f6c...",errors:{email_invalid:"\u90ae\u4ef6\u5730\u5740\u683c\u5f0f\u6709\u8bef"},download_changweibo_image:"\u4e0b\u8f7d\u957f\u5fae\u535a\u56fe\u7247",following:" \u6b63\u5728\u5173\u6ce8",unfollow:" \u53d6\u6d88\u5173\u6ce8",subscribing:" \u6b63\u5728\u8ba2\u9605",unsubscribe:" \u53d6\u6d88\u8ba2\u9605",subscribing_with_likes:" \u6b63\u5728\u8ba2\u9605 | {{total_likes}}",unsubscribe_with_likes:" \u53d6\u6d88\u8ba2\u9605 | {{total_likes}}",bian:" \u7f16",remove:"\u79fb\u9664",comment:{undismiss_button:"\u64a4\u9500",dismiss_info:"\u8bc4\u8bba\u5df2\u5220\u9664",undismiss_info:"\u8bc4\u8bba\u5df2\u6062\u590d"},reject:{title:"\u62d2\u7edd\u6295\u7a3f",description:"\u56de\u4e2a\u4fe1\u7ed9\u6295\u7a3f\u8005\uff0c\u544a\u77e5\u60a8\u62d2\u7edd\u7684\u7406\u7531\uff0c\u4e5f\u53ef\u4ee5\u4e0d\u586b\u3002",placeholder:"\u7ee7\u7eed\u52a0\u6cb9\u4ec0\u4e48\u7684\u2026\u2026",close:"\u5173\u95ed",submit:"\u786e\u5b9a"},further_reading:{button:{"continue":"\u7ee7\u7eed",save:"\u4fdd\u5b58",load:"\u786e\u5b9a",cancel:"\u53d6\u6d88","delete":" \u5220\u9664"},from:" \u6765\u81ea ",add:"\u6dfb\u52a0",states:{"private":" \u79c1\u6709","public":" \u516c\u5f00",dismiss:" \u5220\u9664"},load_link_error:"\u51fa\u9519\u4e86\uff0c\u6211\u4eec\u4e0d\u80fd\u52a0\u8f7d\u8fd9\u6761\u94fe\u63a5\uff01",undo_link:"\u94fe\u63a5{{state}} \u6210\u529f\u30fb<a class='undo' data-further-reading-id='{{id}}' data-state='{{originState}}' href='javascript:void(null)'>\u64a4\u9500</a>",link_text_placeholder:"\u7c98\u8d34\u6216\u8f93\u5165\u94fe\u63a5",title_placeholder:"\u6807\u9898",description_placeholder:"\u6dfb\u52a0\u63cf\u8ff0",delete_success:"\u62d3\u5c55\u9605\u8bfb\u5220\u9664\u6210\u529f"},timeline:{show_comments:"\u67e5\u770b\u8bc4\u8bba",collapse_comments:"\u6536\u8d77\u8bc4\u8bba",reply:"\u56de\u590d","delete":"\u5220\u9664"},self_destruction_confirm:"\u8bf7\u786e\u8ba4\u60a8\u786e\u5b9e\u8981\u5220\u9664\u60a8\u7684\u8d26\u6237, \u6b64\u64cd\u4f5c\u65e0\u6cd5\u6062\u590d!",delete_comment_confirm:"\u786e\u5b9a\u8981\u5220\u9664\u8bc4\u8bba\u4e48?",collections:{select_note:"\u8bf7\u9009\u62e9\u6587\u7ae0\uff1a",select_note_error:"\u8bf7\u9009\u62e9\u4e00\u7bc7\u6587\u7ae0"},social_sharing:{trailing_jianshushe:"- \u7b80\u4e66\u793e",share_to_label:{weibo:"\u5206\u4eab\u5230\u5fae\u535a",tweibo:"\u5206\u4eab\u5230\u817e\u8baf\u5fae\u535a",qzone:"\u5206\u4eab\u5230QQ\u7a7a\u95f4",douban:"\u5206\u4eab\u5230\u8c46\u74e3",twitter:"\u5206\u4eab\u5230Twitter",facebook:"\u5206\u4eab\u5230Facebook",google_plus:"\u5206\u4eab\u5230Google+",renren:"\u5206\u4eab\u5230\u4eba\u4eba\u7f51"},self_share_note_text:"\u6211\u5199\u4e86\u65b0\u6587\u7ae0\u300a{{note_title}}\u300b",reader_share_note_text:"\u63a8\u8350 {{user} \u7684\u6587\u7ae0\u300a{{note_title}}\u300b",self_share_notebook_text:"\u6211\u53d1\u5e03\u4e86\u6587\u96c6\u300a{{notebook_title}}\u300b",reader_share_notebook_text:"\u63a8\u8350 {{user}} \u7684\u6587\u96c6\u300a{{notebook_title}}\u300b",share_collection_text:"\u63a8\u8350\u4e13\u9898\u300a{{collection_title}}\u300b",official_account:"\uff08 \u5206\u4eab\u81ea {{account}} \uff09"}},new_notebook:"\u65b0\u5efa\u6587\u96c6",new_notebook_name:"\u65b0\u6587\u96c6\u540d",new_note:"\u65b0\u5efa\u6587\u7ae0",default_note_title:"\u65e0\u6807\u9898\u6587\u7ae0",delete_notebook_confirm:"\u786e\u8ba4\u5220\u9664\u6587\u96c6\u300a{{title}}\u300b\u3002\u76f8\u5173\u6587\u7ae0\u5c06\u4f1a\u4e00\u540c\u5220\u9664, \u8be5\u64cd\u4f5c\u65e0\u6cd5\u9006\u8f6c\u3002",delete_note_confirm:"\u786e\u8ba4\u5220\u9664\u6587\u7ae0\u300a{{title}}\u300b\u3002\u8be5\u64cd\u4f5c\u65e0\u6cd5\u9006\u8f6c\u3002",rename_notebook:"\u4fee\u6539\u6587\u96c6\u540d",saving:"\u4fdd\u5b58\u4e2d...",saved:"\u5df2\u4fdd\u5b58",saved_partially:"\u6587\u7ae0\u8fc7\u957f, \u5c3e\u7aef\u90e8\u5206\u5185\u5bb9\u672a\u4fdd\u5b58",change_notebook_placeholder:"\u8bf7\u9009\u62e9\u76ee\u6807\u6587\u96c6..",wordage:"\u5b57\u6570: {{wordage}}",commerical_placeholder:"\u5c5e\u4e8e\u5199\u4f5c\u8005\u7684\u6587\u96c6, \u4e00\u4e2a\u7b80\u6d01\u800c\u4f18\u96c5\u7684\u73af\u5883\u8ba9\u4f60\u4e13\u6ce8\u4e8e\u4e66\u5199\u3002",notebook_name_placeholder:"\u8bf7\u8f93\u5165\u6587\u96c6\u540d...",nickname_format_invalid:"\u6635\u79f0\u683c\u5f0f\u4e0d\u6b63\u786e",nickname:"\u6635\u79f0",spine_ajax_pending:"\u5b58\u50a8\u8bf7\u6c42\u5c1a\u672a\u5168\u90e8\u5b8c\u6210, \u672a\u4fdd\u5b58\u6570\u636e\u5c06\u4f1a\u4e22\u5931, \u786e\u5b9a\u8981\u79bb\u5f00\u9875\u9762\u4e48?",form_dirty:"\u68c0\u6d4b\u5230\u6709\u672a\u4fdd\u5b58\u7684\u6570\u636e, \u786e\u5b9a\u8981\u79bb\u5f00\u9875\u9762\u4e48?",toggle_to_markdown:"\u5207\u6362\u7f16\u8f91\u5668\u4e3a\u300cMarkdown\u7f16\u8f91\u5668\u300d",toggle_to_plain:"\u5207\u6362\u7f16\u8f91\u5668\u4e3a\u300c\u5bcc\u6587\u672c\u7f16\u8f91\u5668\u300d",suggest_chrome:"\u68c0\u6d4b\u5230\u60a8\u6b63\u5728\u4f7f\u7528 Internet Explorer, \u6211\u4eec\u5efa\u8bae\u4f7f\u7528 Google Chrome \u8bbf\u95ee\u300e\u7b80\u4e66\u300f\u4ee5\u83b7\u5f97\u6700\u4f73\u4f53\u9a8c\u3002",suggest_upgrade:"\u68c0\u6d4b\u5230\u60a8\u6b63\u5728\u4f7f\u7528 Internet Explorer 8/9, \u5728\u6b64\u60c5\u51b5\u4e0b, \u4f1a\u51fa\u73b0\u6027\u80fd\u95ee\u9898, \u5e76\u4e14\u6211\u4eec\u65e0\u6cd5\u63d0\u4f9b\u5b8c\u6574\u7684\u529f\u80fd, \u5efa\u8bae\u4f7f\u7528 Google Chrome \u8bbf\u95ee\u300e\u7b80\u4e66\u300f\u4ee5\u83b7\u5f97\u6700\u4f73\u4f53\u9a8c, \u6216\u662f\u5347\u7ea7\u81f3 Internet Explorer 10\u3002",chrome_bug:"\u6211\u4eec\u53d1\u73b0\u60a8\u5f53\u524d\u7684 Chrome \u7248\u672c(33.0.1750.152)\u5b58\u5728\u5df2\u77e5bug, \u5728\u5f53\u524d Chrome \u7248\u672c\u4e0b\u60a8\u5c06\u65e0\u6cd5\u5728\u5bcc\u6587\u672c\u7f16\u8f91\u5668\u4e2d\u4e0a\u4f20\u56fe\u7247/\u7f16\u8f91\u94fe\u63a5, \u8bf7\u5347\u7ea7\u81f3\u6700\u65b0Chrome\u7248\u672c\u3002",restore_a_locale_copy:"\u6211\u4eec\u4ece\u672c\u5730\u5b58\u50a8\u4e2d\u6062\u590d\u4e86\u60a8\u7684\u8fd9\u7bc7\u6587\u7ae0, \u5982\u679c\u4ed6\u4e0d\u662f\u6700\u65b0\u7248\u60a8\u53ef\u4ee5: ",leaving_note_unsaved:"\u60a8\u7684\u6587\u7ae0\u5df2\u7ecf\u4fee\u6539, \u5e76\u4e14\u5c1a\u672a\u4fdd\u5b58, \u662f\u5426\u4fdd\u5b58?",press_esc_to_leave:"\u6309 Esc \u9000\u51fa.",new_note_bottom:"\u5728\u4e0b\u65b9\u65b0\u5efa\u6587\u7ae0",ajax_error:"\u51fa\u73b0\u9519\u8bef, \u8bf7\u5907\u4efd\u60a8\u5f53\u524d\u7684\u4f5c\u54c1\u5e76\u5237\u65b0\u9875\u9762.",publish:"\u53d1\u5e03\u6587\u7ae0",published:"\u5df2\u53d1\u5e03",unpublish:"\u53d6\u6d88\u53d1\u5e03",errors:{401:"\u51fa\u73b0\u5b89\u5168\u9a8c\u8bc1\u9519\u8bef, \u8bf7\u624b\u52a8\u4fdd\u5b58\u5f53\u524d\u4f5c\u54c1, \u5237\u65b0\u9875\u9762\u91cd\u8bd5.",404:'\u8bf7\u6c42\u7684\u6587\u7ae0/\u6587\u96c6\u4e0d\u5b58\u5728, \u8bf7<a href="http://jianshu.io/writer/#/">\u70b9\u6b64\u5237\u65b0\u9875\u9762</a>.',500:"\u670d\u52a1\u5668\u9519\u8bef, \u8bf7\u624b\u52a8\u4fdd\u5b58\u5f53\u524d\u4f5c\u54c1, \u5237\u65b0\u9875\u9762\u91cd\u8bd5.",content_overflow:"\u5f53\u524d\u6587\u7ae0\u5185\u5bb9\u8fc7\u957f, \u7bc7\u5c3e\u90e8\u5206\u5185\u5bb9\u65e0\u6cd5\u4fdd\u5b58, \u8bf7\u5148\u624b\u52a8\u5907\u4efd\uff0c\u7136\u540e\u65b0\u5efa\u6587\u7ae0\u5206\u5f00\u4e66\u5199!",writer_version_conflict:"\u60a8\u5df2\u5728\u5176\u4ed6\u7a97\u53e3\u4e2d\u5bf9\u672c\u6587\u8fdb\u884c\u4e86\u66f4\u65b0\uff0c\u4ee5\u9632\u4e22\u5931\u4efb\u4f55\u6587\u5b57\uff0c\u8bf7\u624b\u52a8\u5907\u4efd\u5f53\u524d\u6539\u52a8\uff0c\u5237\u65b0\u672c\u9875\u540e\u7ee7\u7eed"},warnings:{content_too_large:"\u5f53\u524d\u6587\u7ae0\u957f\u5ea6\u6b63\u5728\u63a5\u8fd1\u7b80\u4e66\u7684\u9650\u5ea6, \u8bf7\u8003\u8651\u5206\u7bc7\u4e66\u5199\u5427"},network:{issue:"\u7f51\u7edc\u8fde\u63a5\u901f\u5ea6\u8fc7\u6162\u6216\u6b63\u5728\u51fa\u73b0\u95ee\u9898, \u53ef\u80fd\u6062\u590d, \u53ef\u4ee5\u7ee7\u7eed\u64cd\u4f5c.",down:"\u7f51\u7edc\u8fde\u63a5\u8fde\u7eed\u51fa\u9519, \u8bf7\u52a1\u5fc5\u5907\u4efd\u60a8\u5f53\u524d\u7684\u4f5c\u54c1\u5e76\u5237\u65b0\u9875\u9762!",back:"\u60a8\u7684\u7f51\u7edc\u8fde\u63a5\u5df2\u6062\u590d\u3002"},navbar:{homepage:"\u9996\u9875",collections:"\u4e13\u9898",top:"\u7b80\u4e66\u70ed\u95e8",timeline:"\u6700\u65b0\u52a8\u6001",writer:"\u5199\u6587\u7ae0",user_homepage:"\u6211\u7684\u4e3b\u9875",favourites:"\u6211\u559c\u6b22\u7684",bookmarks:"\u6211\u7684\u4e66\u7b7e",notifications:"\u63d0\u9192",messages:"\u7b80\u4fe1",view_mode:"\u663e\u793a\u6a21\u5f0f",settings:"\u8bbe\u7f6e",sign_out:"\u767b\u51fa"},note_modified:{mac:"\u6587\u7ae0\u5df2\u66f4\u6539, \u8bf7\u6309 command + s \u4fdd\u5b58\u3002",nonmac:"\u6587\u7ae0\u5df2\u66f4\u6539, \u8bf7\u6309 ctrl + s \u4fdd\u5b58\u3002"},note:{untitled:"\u65e0\u6807\u9898\u6587\u7ae0",dropdown:{share_directly:"\u76f4\u63a5\u53d1\u5e03",move_note:"\u79fb\u52a8\u6587\u7ae0",shared:"\u5df2\u53d1\u5e03",share_to:"\u5206\u4eab\u5230",share_to_sns:{weibo:"\u5206\u4eab\u5230\u5fae\u535a",douban:"\u5206\u4eab\u5230\u8c46\u74e3",twitter:"\u5206\u4eab\u5230Twitter",tweibo:"\u5206\u4eab\u5230\u817e\u8baf\u5fae\u535a",qzone:"\u5206\u4eab\u5230QQ\u7a7a\u95f4",facebook:"\u5206\u4eab\u5230Facebook",google_plus:"\u5206\u4eab\u5230Google+"},open_in_new_window:"\u5728\u65b0\u7a97\u53e3\u6253\u5f00",stop_sharing:"\u505c\u6b62\u5206\u4eab"},moving:{title:"\u79fb\u52a8\u6587\u7ae0\u5230"},share:{title:"\u76f4\u63a5\u53d1\u5e03",help:"\u70b9\u51fb\u201c\u53d1\u5e03\u201d\u6309\u94ae\u540e\u6587\u7ae0\u5c06\u4f1a\u751f\u6210\u4e00\u4e2a\u201c\u56fa\u5b9a\u94fe\u63a5\u201d\uff0c\u4ed6\u4eba\u901a\u8fc7\u8be5\u56fa\u5b9a\u94fe\u63a5\u5373\u53ef\u8bbf\u95ee\u4f60\u7684\u6587\u7ae0\uff0c\u4f60\u4e5f\u53ef\u4ee5\u968f\u540e\u5c06\u56fa\u5b9a\u94fe\u63a5\u544a\u77e5\u4ed6\u4eba\u6216\u8005\u5206\u4eab\u5230\u4f60\u7684\u793e\u4ea4\u7f51\u7edc\u3002",permanent_link:"\u56fa\u5b9a\u94fe\u63a5\u5730\u5740",success:"\u53d1\u5e03\u6210\u529f\uff01\u56fa\u5b9a\u94fe\u63a5\u4e3a\uff1a",to_sns:"\u4f60\u8fd8\u53ef\u4ee5\u5206\u4eab\u6587\u7ae0\u5230\u793e\u4ea4\u7f51\u7edc:"},shareToWeibo:{share:"\u5206 \u4eab",done:"\u5df2\u751f\u6210\uff0c\u5e26\u957f\u5fae\u535a\u56fe\u7247\u5206\u4eab",download:"\u4e0b\u8f7d\u957f\u5fae\u535a\u56fe\u7247",processing:"\u6b63\u5728\u751f\u6210\u957f\u5fae\u535a\u56fe\u7247",processingNotice:"\u6211\u4eec\u6b63\u5728\u4e3a\u60a8\u751f\u6210\u957f\u5fae\u535a\u56fe\u7247, \u4e00\u822c\u89c6\u6587\u7ae0\u7bc7\u5e45\u4f1a\u9700\u8981 5-30 \u79d2\u7684\u65f6\u95f4\uff0c\u5982\u679c\u60a8\u4e0d\u9700\u8981\u5e26\u957f\u5fae\u535a\u5206\u4eab\uff0c\u53ef\u70b9\u51fb\u4e0b\u9762\u7684\u5206\u4eab\u6309\u94ae\u76f4\u63a5\u5206\u4eab\uff0c\u65e0\u9700\u7b49\u5f85\u3002"}},share:{text:"\u6211\u5199\u4e86\u65b0\u6587\u7ae0\u300a{{note_title}}\u300b",official_account:"\uff08 \u5206\u4eab\u81ea @{{official_account}} \uff09",trailing_jianshushe:"- \u7b80\u4e66\u793e"},button:{submitting:"\u6b63\u5728\u63d0\u4ea4...",submit_failed:"\u53d1\u9001\u5931\u8d25",submit:"\u63d0\u4ea4",cancel:"\u53d6\u6d88",close:"\u5173\u95ed",publish:"\u53d1\u5e03",ok:"\u786e\u8ba4",undo:"\u64a4\u9500",upload_image_notice:"\u5c06\u56fe\u7247\u6587\u4ef6\u76f4\u63a5\u62d6\u52a8\u5230\u7f16\u8f91\u533a\u57df\u5373\u53ef\u4e0a\u4f20"},date:{abbr_day_names:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],abbr_month_names:[null,"1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],day_names:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],formats:{"default":"%Y-%m-%d","long":"%Y\u5e74%b%d\u65e5","short":"%b%d\u65e5"},month_names:[null,"\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],order:["year","month","day"]},datetime:{distance_in_words:{about_x_hours:{one:"\u5927\u7ea6\u4e00\u5c0f\u65f6",other:"\u5927\u7ea6 %{count} \u5c0f\u65f6"},about_x_months:{one:"\u5927\u7ea6\u4e00\u4e2a\u6708",other:"\u5927\u7ea6 %{count} \u4e2a\u6708"},about_x_years:{one:"\u5927\u7ea6\u4e00\u5e74",other:"\u5927\u7ea6 %{count} \u5e74"},almost_x_years:{one:"\u63a5\u8fd1\u4e00\u5e74",other:"\u63a5\u8fd1 %{count} \u5e74"},half_a_minute:"\u534a\u5206\u949f",less_than_x_minutes:{one:"\u4e0d\u5230\u4e00\u5206\u949f",other:"\u4e0d\u5230 %{count} \u5206\u949f"},less_than_x_seconds:{one:"\u4e0d\u5230\u4e00\u79d2",other:"\u4e0d\u5230 %{count} \u79d2"},over_x_years:{one:"\u4e00\u5e74\u591a",other:"%{count} \u5e74\u591a"},x_days:{one:"\u4e00\u5929",other:"%{count} \u5929"},x_minutes:{one:"\u4e00\u5206\u949f",other:"%{count} \u5206\u949f"},x_months:{one:"\u4e00\u4e2a\u6708",other:"%{count} \u4e2a\u6708"},x_seconds:{one:"\u4e00\u79d2",other:"%{count} \u79d2"}},prompts:{day:"\u65e5",hour:"\u65f6",minute:"\u5206",month:"\u6708",second:"\u79d2",year:"\u5e74"}}};
var I18n=I18n||{};I18n.translations=I18n.translations||{},I18n.translations["zh-TW"]={kalamu:{link_format_error:"\u50c5\u652f\u6301http, https, ftp\u93c8\u63a5\u3002",insert_image:"\u63d2\u5165\u5716\u7247",local_image:"\u672c\u5730\u4e0a\u50b3",or:"\u6216",internet_image:"\u7db2\u7d61\u5716\u7247",select_image:"\u9078\u64c7\u5716\u7247",cancel:"\u53d6\u6d88",image_url:"\u5716\u7247\u93c8\u63a5",ok:"\u78ba\u8a8d",processing:"\u4e0a\u50b3\u4e2d...",failed:"\u4e0a\u50b3\u5931\u6557\uff0c\u8acb\u91cd\u8a66\u3002",image_url_blank:"\u8acb\u8f38\u5165\u93c8\u63a5",insert_link:"\u63d2\u5165\u93c8\u63a5",link_url:"\u93c8\u63a5\u5730\u5740",link_text:"\u93c8\u63a5\u6587\u672c",wrong_image_file_format:"\u5716\u7247\u683c\u5f0f\u932f\u8aa4,\u8acb\u4f7f\u7528jpg/jpeg/png/gif\u6587\u4ef6\u3002",size_excceed_limit:"\u6587\u4ef6\u5927\u5c0f\u8d85\u904e\u9650\u5236, \u8acb\u9078\u64c75MB\u4ee5\u4e0b\u7684\u6587\u4ef6\u3002",image_url_blank:"\u8acb\u586b\u5beb\u5716\u7247\u5730\u5740\u3002",image_protocol_not_supported:"\u6211\u5011\u76ee\u524d\u4e0d\u652f\u6301\u8a72\u5354\u8b70\u3002",select_image:"\u9078\u64c7\u5716\u7247\u4e0a\u50b3",image_privacy:"\u6709\u95dc\u5716\u7247\u79c1\u5bc6\u6027\u9ede\u64ca\u554f\u865f\u77ad\u89e3\u66f4\u591a",upload_internal_server_error:"\u4e0a\u50b3\u5931\u6557, \u8acb\u91cd\u8a66\u3002"},ie_warning:{title:"\u60a8\u7684\u700f\u89bd\u5668\u7248\u672c\u904e\u4f4e",upgrade_ie:'\u8acb\u5347\u7d1a\u60a8\u7684 IE \u700f\u89bd\u5668\uff0c <a href="http://windows.microsoft.com/zh-CN/internet-explorer/downloads/ie-9/worldwide-languages">\u9ede\u6b64\u8655\u5347\u7d1a</a>\u3002',use_chrome:'\u6211\u5011\u63a8\u85a6\u4f7f\u7528 <a href="http://www.google.com/chrome" class="use-chrome">Google Chrome </a>\u4f86\u8a2a\u554f\u7c21\u66f8\u7372\u53d6\u6700\u4f73\u7684\u7528\u6236\u9ad4\u9a57\u3002',skip:"\u8df3\u904e"},reading:{registration_complete:"\u8a3b\u518a\u6210\u529f\uff0c\u6b63\u5728\u8df3\u8f49...",errors:{email_invalid:"\u90f5\u4ef6\u5730\u5740\u683c\u5f0f\u6709\u8aa4"},download_changweibo_image:"\u4e0b\u8f09\u9577\u5fae\u535a\u5716\u7247",following:" \u6b63\u5728\u95dc\u6ce8",unfollow:" \u53d6\u6d88\u95dc\u6ce8",subscribing:" \u6b63\u5728\u8a02\u95b1",unsubscribe:" \u53d6\u6d88\u8a02\u95b1",subscribing_with_likes:" \u6b63\u5728\u8a02\u95b1 | {{total_likes}}",unsubscribe_with_likes:" \u53d6\u6d88\u8a02\u95b1 | {{total_likes}}",bian:" \u7de8",remove:"\u79fb\u9664",comment:{undismiss_button:"\u64a4\u92b7",dismiss_info:"\u8a55\u8ad6\u5df2\u522a\u9664",undismiss_info:"\u8a55\u8ad6\u5df2\u6062\u5fa9"},reject:{title:"\u62d2\u7d55\u6295\u7a3f",description:"\u56de\u500b\u4fe1\u7d66\u6295\u7a3f\u8005\uff0c\u544a\u77e5\u60a8\u62d2\u7d55\u7684\u7406\u7531\u3002\u53ef\u4ee5\u4e0d\u586b\u3002",placeholder:"\u7e7c\u7e8c\u52a0\u6cb9\u4ec0\u9ebd\u7684\u2026\u2026",close:"\u95dc\u9589",submit:"\u78ba\u5b9a"},further_reading:{button:{"continue":"\u7e7c\u7e8c",save:"\u4fdd\u5b58",load:"\u78ba\u5b9a",cancel:"\u53d6\u6d88","delete":" \u522a\u9664"},from:" \u4f86\u81ea ",add:"\u6dfb\u52a0",states:{"private":" \u79c1\u6709","public":" \u516c\u958b",dismiss:" \u522a\u9664"},load_link_error:"\u51fa\u932f\u4e86\uff0c\u6211\u5011\u4e0d\u80fd\u52a0\u8f09\u9019\u689d\u93c8\u63a5\uff01",undo_link:"\u93c8\u63a5{{state}} \u6210\u529f\u30fb<a class='undo' data-further-reading-id='{{id}}' data-state='{{originState}}' href='javascript:void(null)'>\u64a4\u92b7</a>",link_text_placeholder:"\u7c98\u8cbc\u6216\u8f38\u5165\u93c8\u63a5",title_placeholder:"\u6a19\u984c",description_placeholder:"\u6dfb\u52a0\u63cf\u8ff0",delete_success:"\u62d3\u5c55\u95b1\u8b80\u522a\u9664\u6210\u529f"},timeline:{show_comments:"\u67e5\u770b\u8a55\u8ad6",collapse_comments:"\u6536\u8d77\u8a55\u8ad6",reply:"\u56de\u8986","delete":"\u522a\u9664"},self_destruction_confirm:"\u8acb\u78ba\u8a8d\u60a8\u78ba\u5be6\u8981\u522a\u9664\u60a8\u7684\u8cec\u6236, \u6b64\u64cd\u4f5c\u7121\u6cd5\u6062\u5fa9!",delete_comment_confirm:"\u78ba\u5b9a\u8981\u522a\u9664\u8a55\u8ad6\u9ebc?",collections:{select_note:"\u8acb\u9078\u64c7\u6587\u7ae0\uff1a",select_note_error:"\u8acb\u9078\u64c7\u4e00\u7bc7\u6587\u7ae0\u3002"},social_sharing:{trailing_jianshushe:"- \u7c21\u66f8\u793e",share_to_label:{weibo:"\u5206\u4eab\u5230\u5fae\u535a",tweibo:"\u5206\u4eab\u5230\u9a30\u8a0a\u5fae\u535a",qzone:"\u5206\u4eab\u5230QQ\u7a7a\u9593",douban:"\u5206\u4eab\u5230\u8c46\u74e3",twitter:"\u5206\u4eab\u5230Twitter",facebook:"\u5206\u4eab\u5230Facebook",google_plus:"\u5206\u4eab\u5230Google+",renren:"\u5206\u4eab\u5230\u4eba\u4eba\u7db2"},self_share_note_text:"\u6211\u5beb\u4e86\u65b0\u6587\u7ae0\u300a{{note_title}}\u300b",reader_share_note_text:"\u63a8\u85a6 {{user} \u7684\u6587\u7ae0\u300a{{note_title}}\u300b",self_share_notebook_text:"\u6211\u767c\u4f48\u4e86\u6587\u96c6\u300a{{notebook_title}}\u300b",reader_share_notebook_text:"\u63a8\u85a6 {{user} \u7684\u6587\u96c6\u300a{{notebook_title}}\u300b",share_collection_text:"\u63a8\u85a6\u5c08\u984c\u300a{{collection_title}}\u300b",official_account:"\uff08 \u5206\u4eab\u81ea {{account}} \uff09"}},new_notebook:"\u65b0\u5efa\u6587\u96c6",new_notebook_name:"\u65b0\u6587\u96c6\u540d",new_note:"\u65b0\u5efa\u6587\u7ae0",default_note_title:"\u7121\u6a19\u984c\u6587\u7ae0",delete_notebook_confirm:"\u78ba\u8a8d\u522a\u9664\u6587\u96c6\u300a{{title}}\u300b\u3002\u76f8\u95dc\u6587\u7ae0\u5c07\u6703\u4e00\u540c\u522a\u9664, \u8a72\u64cd\u4f5c\u7121\u6cd5\u64a4\u92b7\u3002",delete_note_confirm:"\u78ba\u8a8d\u522a\u9664\u6587\u7ae0\u300a{{title}}\u300b\u3002\u8a72\u64cd\u4f5c\u7121\u6cd5\u64a4\u92b7\u3002",rename_notebook:"\u4fee\u6539\u6587\u96c6\u540d",saving:"\u4fdd\u5b58\u4e2d...",saved:"\u5df2\u4fdd\u5b58",saved_partially:"\u6587\u7ae0\u904e\u9577, \u5c3e\u7aef\u90e8\u5206\u5167\u5bb9\u672a\u4fdd\u5b58",change_notebook_placeholder:"\u8acb\u9078\u64c7\u76ee\u6a19\u6587\u96c6..",wordage:"\u5b57\u6578: {{wordage}}",commerical_placeholder:"\u5c6c\u65bc\u5beb\u4f5c\u8005\u7684\u6587\u96c6, \u4e00\u500b\u7c21\u6f54\u800c\u512a\u96c5\u7684\u74b0\u5883\u8b93\u4f60\u5c08\u6ce8\u65bc\u66f8\u5beb\u3002",notebook_name_placeholder:"\u8acb\u8f38\u5165\u6587\u96c6\u540d...",nickname_format_invalid:"\u66b1\u7a31\u683c\u5f0f\u4e0d\u6b63\u78ba",nickname:"\u66b1\u7a31",spine_ajax_pending:"\u5b58\u5132\u8acb\u6c42\u5c1a\u672a\u5168\u90e8\u5b8c\u6210, \u672a\u4fdd\u5b58\u6578\u64da\u5c07\u6703\u4e1f\u5931, \u78ba\u5b9a\u8981\u96e2\u958b\u9801\u9762\u9ebc?",form_dirty:"\u6aa2\u6e2c\u5230\u6709\u672a\u4fdd\u5b58\u7684\u6578\u64da, \u78ba\u5b9a\u8981\u96e2\u958b\u9801\u9762\u9ebc?",toggle_to_markdown:"\u5207\u63db\u7de8\u8f2f\u5668\u7232\u300cMarkdown\u7de8\u8f2f\u5668\u300d",toggle_to_plain:"\u5207\u63db\u7de8\u8f2f\u5668\u7232\u300c\u5bcc\u6587\u5b57\u683c\u5f0f\u7de8\u8f2f\u5668\u300d",suggest_chrome:"\u6aa2\u6e2c\u5230\u60a8\u6b63\u5728\u4f7f\u7528 Internet Explorer, \u6211\u5011\u5efa\u8b70\u4f7f\u7528 Google Chrome \u8a2a\u554f\u300e\u7c21\u66f8\u300f\u4ee5\u7372\u5f97\u6700\u4f73\u9ad4\u9a57\u3002",suggest_upgrade:"\u6aa2\u6e2c\u5230\u60a8\u6b63\u5728\u4f7f\u7528 Internet Explorer 8/9, \u5728\u6b64\u60c5\u6cc1\u4e0b, \u6703\u51fa\u73fe\u6027\u80fd\u554f\u984c, \u4e26\u4e14\u6211\u5011\u7121\u6cd5\u63d0\u4f9b\u5b8c\u6574\u7684\u529f\u80fd, \u5efa\u8b70\u4f7f\u7528 Google Chrome \u8a2a\u554f\u300e\u7c21\u66f8\u300f\u4ee5\u7372\u5f97\u6700\u4f73\u9ad4\u9a57, \u6216\u662f\u5347\u7d1a\u81f3 Internet Explorer 10\u3002",chrome_bug:"\u6211\u5011\u767c\u73fe\u60a8\u7576\u524d\u7684\u700f\u89bd\u5668\u7248\u672c\uff0833.0.1750.152\uff09\u5b58\u5728\u5df2\u77e5\u7684bug\uff0c\u5728\u7576\u524d\u7684 Chrome \u7248\u672c\u4e0b\u60a8\u5c07\u7121\u6cd5\u5728\u5bcc\u6587\u672c\u7de8\u8f2f\u5668\u4e2d\u4e0a\u50b3\u5716\u7247/\u7de8\u8f2f\u93c8\u63a5\uff0c\u8acb\u5347\u7d1a\u81f3\u6700\u65b0\u7684Chrome\u7248\u672c\u3002",restore_a_locale_copy:"\u6211\u5011\u5f9e\u672c\u5730\u5b58\u5132\u4e2d\u6062\u5fa9\u4e86\u60a8\u7684\u9019\u7bc7\u6587\u7ae0, \u5982\u679c\u4ed6\u4e0d\u662f\u6700\u65b0\u7248\u60a8\u53ef\u4ee5: ",leaving_note_unsaved:"\u60a8\u7684\u6587\u7ae0\u5df2\u7d93\u4fee\u6539, \u4e26\u4e14\u5c1a\u672a\u4fdd\u5b58, \u662f\u5426\u4fdd\u5b58?",press_esc_to_leave:"\u6309 Esc\u9375 \u9000\u51fa.",new_note_bottom:"\u5728\u4e0b\u65b9\u65b0\u5efa\u6587\u7ae0",ajax_error:"\u51fa\u73fe\u932f\u8aa4, \u8acb\u5099\u4efd\u60a8\u7576\u524d\u7684\u4f5c\u54c1\u4e26\u5237\u65b0\u9801\u9762.",publish:"\u767c\u5e03\u6587\u7ae0",published:"\u5df2\u767c\u5e03",unpublish:"\u53d6\u6d88\u767c\u5e03",errors:{401:"\u51fa\u73fe\u5b89\u5168\u9a57\u8b49\u932f\u8aa4, \u8acb\u624b\u52d5\u4fdd\u5b58\u7576\u524d\u4f5c\u54c1, \u5237\u65b0\u9801\u9762\u91cd\u8a66.",404:'\u8acb\u6c42\u7684\u6587\u7ae0/\u6587\u96c6\u4e0d\u5b58\u5728, \u8acb<a href="http://jianshu.io/writer/#/">\u9ede\u6b64\u5237\u65b0\u9801\u9762</a>.',500:"\u670d\u52d9\u5668\u932f\u8aa4, \u8acb\u624b\u52d5\u4fdd\u5b58\u7576\u524d\u4f5c\u54c1, \u5237\u65b0\u9801\u9762\u91cd\u8a66.",content_overflow:"\u7576\u524d\u6587\u7ae0\u5167\u5bb9\u904e\u9577, \u7bc7\u5c3e\u90e8\u5206\u5167\u5bb9\u7121\u6cd5\u4fdd\u5b58, \u8acb\u5148\u624b\u52d5\u5099\u4efd\uff0c\u7136\u5f8c\u65b0\u5efa\u6587\u7ae0\u5206\u958b\u66f8\u5beb!",writer_version_conflict:"\u60a8\u5df2\u5728\u5176\u4ed6\u7a97\u53e3\u4e2d\u5c0d\u672c\u6587\u9032\u884c\u4e86\u66f4\u65b0\uff0c\u4ee5\u9632\u4e1f\u5931\u4efb\u4f55\u6587\u5b57\uff0c\u8acb\u624b\u52d5\u5099\u4efd\u7576\u524d\u6539\u52d5\uff0c\u5237\u65b0\u672c\u9801\u5f8c\u7e7c\u7e8c"},warnings:{content_too_large:"\u7576\u524d\u6587\u7ae0\u9577\u5ea6\u6b63\u5728\u63a5\u8fd1\u7c21\u66f8\u7684\u9650\u5ea6, \u8acb\u8003\u616e\u5206\u7bc7\u66f8\u5beb\u5427"},network:{issue:"\u7db2\u7d61\u9023\u63a5\u901f\u5ea6\u904e\u6162, \u53ef\u80fd\u6062\u5fa9, \u53ef\u4ee5\u7e7c\u7e8c\u64cd\u4f5c.",down:"\u7db2\u7d61\u9023\u63a5\u9023\u7e8c\u51fa\u932f, \u8acb\u52d9\u5fc5\u5099\u4efd\u60a8\u7576\u524d\u7684\u4f5c\u54c1\u4e26\u5237\u65b0\u9801\u9762!",back:"\u60a8\u7684\u7db2\u7d61\u9023\u63a5\u5df2\u6062\u5fa9\u3002"},navbar:{homepage:"\u9996\u9801",collections:"\u5c08\u984c",top:"\u7c21\u66f8\u71b1\u9580",timeline:"\u6700\u65b0\u52d5\u614b",writer:"\u5beb\u6587\u7ae0",user_homepage:"\u6211\u7684\u4e3b\u9801",favourites:"\u6211\u559c\u6b61\u7684",bookmarks:"\u6211\u7684\u66f8\u7c64",notifications:"\u63d0\u9192",messages:"\u7c21\u4fe1",view_mode:"\u986f\u793a\u6a21\u5f0f",settings:"\u8a2d\u7f6e",sign_out:"\u767b\u51fa"},note_modified:{mac:"\u6587\u7ae0\u5df2\u66f4\u6539, \u8acb\u6309 command + s \u4fdd\u5b58\u3002",nonmac:"\u6587\u7ae0\u5df2\u66f4\u6539, \u8acb\u6309 ctrl + s \u4fdd\u5b58\u3002"},note:{untitled:"\u7121\u6a19\u984c\u6587\u7ae0",dropdown:{share_directly:"\u76f4\u63a5\u767c\u4f48",move_note:"\u79fb\u52d5\u6587\u7ae0",shared:"\u5df2\u767c\u4f48",share_to:"\u5206\u4eab\u5230",share_to_sns:{weibo:"\u5206\u4eab\u5230\u5fae\u535a",douban:"\u5206\u4eab\u5230\u8c46\u74e3",twitter:"\u5206\u4eab\u5230Twitter",tweibo:"\u5206\u4eab\u5230\u9a30\u8a0a\u5fae\u535a",qzone:"\u5206\u4eab\u5230QQ\u7a7a\u9593",facebook:"\u5206\u4eab\u5230Facebook",google_plus:"\u5206\u4eab\u5230Google+"},open_in_new_window:"\u5728\u65b0\u7a97\u53e3\u6253\u958b",stop_sharing:"\u505c\u6b62\u5206\u4eab"},moving:{title:"\u79fb\u52d5\u6587\u7ae0\u5230"},share:{title:"\u76f4\u63a5\u767c\u4f48",help:"\u9ede\u64ca\u201c\u767c\u4f48\u201d\u6309\u9215\u5f8c\u6587\u7ae0\u5c07\u6703\u751f\u6210\u4e00\u500b\u201c\u56fa\u5b9a\u9023\u7d50\u201d\uff0c\u4ed6\u4eba\u901a\u904e\u8a72\u56fa\u5b9a\u93c8\u63a5\u5373\u53ef\u8a2a\u554f\u4f60\u7684\u6587\u7ae0\uff0c\u4f60\u4e5f\u53ef\u4ee5\u96a8\u5f8c\u5c07\u56fa\u5b9a\u9023\u7d50\u544a\u77e5\u4ed6\u4eba\u6216\u8005\u5206\u4eab\u5230\u4f60\u7684\u793e\u4ea4\u7db2\u8def\u3002",permanent_link:"\u56fa\u5b9a\u9023\u7d50\u5730\u5740",success:"\u767c\u4f48\u6210\u529f\uff01\u56fa\u5b9a\u93c8\u63a5\u7232\uff1a",to_sns:"\u4f60\u9084\u53ef\u4ee5\u5206\u4eab\u6587\u7ae0\u5230\u793e\u4ea4\u7db2\u8def:"},shareToWeibo:{share:"\u5206 \u4eab",done:"\u5df2\u751f\u6210\uff0c\u5e26\u9577\u5fae\u535a\u5206\u4eab",download:"\u4e0b\u8f09\u9577\u5fae\u535a\u5716\u7247",processing:"\u7372\u53d6\u9577\u5fae\u535a\u5716\u7247\u4e2d",processingNotice:"\u6211\u5011\u6b63\u5728\u7232\u60a8\u751f\u6210\u9577\u5fae\u535a\u5716\u7247, \u4e00\u822c\u8996\u6587\u7ae0\u7bc7\u5e45\u6703\u9700\u898110-30\u79d2\u7684\u6642\u9593\uff0c\u5982\u679c\u60a8\u4e0d\u9700\u8981\u5e36\u9577\u5fae\u535a\u5206\u4eab\uff0c\u53ef\u9ede\u64ca\u4e0b\u9762\u7684\u5206\u4eab\u6309\u9215\u76f4\u63a5\u5206\u4eab\uff0c\u7121\u9700\u7b49\u5f85\u3002"}},share:{text:"\u6211\u5beb\u4e86\u65b0\u6587\u7ae0\u300a{{note_title}}\u300b",official_account:"\uff08 \u5206\u4eab\u81ea @{{official_account}} \uff09",trailing_jianshushe:"- \u7c21\u66f8\u793e"},button:{submitting:"\u6b63\u5728\u63d0\u4ea4...",submit_failed:"\u767c\u9001\u5931\u6557",submit:"\u63d0\u4ea4",cancel:"\u53d6\u6d88",close:"\u95dc\u9589",publish:"\u767c\u4f48",ok:"\u78ba\u8a8d",undo:"\u64a4\u92b7",upload_image_notice:"\u5c07\u5716\u7247\u6587\u4ef6\u76f4\u63a5\u62d6\u52d5\u5230\u7de8\u8f2f\u5340\u57df\u5373\u53ef\u4e0a\u50b3"},date:{abbr_day_names:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],abbr_month_names:[null,"1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],day_names:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],formats:{"default":"%Y-%m-%d","long":"%Y\u5e74%b%d\u65e5","short":"%b%d\u65e5"},month_names:[null,"\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],order:["year","month","day"]},datetime:{distance_in_words:{about_x_hours:{one:"\u5927\u7ea6\u4e00\u5c0f\u65f6",other:"\u5927\u7ea6 %{count} \u5c0f\u65f6"},about_x_months:{one:"\u5927\u7ea6\u4e00\u4e2a\u6708",other:"\u5927\u7ea6 %{count} \u4e2a\u6708"},about_x_years:{one:"\u5927\u7ea6\u4e00\u5e74",other:"\u5927\u7ea6 %{count} \u5e74"},almost_x_years:{one:"\u63a5\u8fd1\u4e00\u5e74",other:"\u63a5\u8fd1 %{count} \u5e74"},half_a_minute:"\u534a\u5206\u949f",less_than_x_minutes:{one:"\u4e0d\u5230\u4e00\u5206\u949f",other:"\u4e0d\u5230 %{count} \u5206\u949f"},less_than_x_seconds:{one:"\u4e0d\u5230\u4e00\u79d2",other:"\u4e0d\u5230 %{count} \u79d2"},over_x_years:{one:"\u4e00\u5e74\u591a",other:"%{count} \u5e74\u591a"},x_days:{one:"\u4e00\u5929",other:"%{count} \u5929"},x_minutes:{one:"\u4e00\u5206\u949f",other:"%{count} \u5206\u949f"},x_months:{one:"\u4e00\u4e2a\u6708",other:"%{count} \u4e2a\u6708"},x_seconds:{one:"\u4e00\u79d2",other:"%{count} \u79d2"}},prompts:{day:"\u65e5",hour:"\u65f6",minute:"\u5206",month:"\u6708",second:"\u79d2",year:"\u5e74"}}},function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};Maleskine.CollectionIndex=function(t){function n(){n.__super__.constructor.apply(this,arguments),this.infiniteScroll(),this.initFollowingState(),this.el.pjax("ul.collections-nav a[data-pjax]","#list-container"),$("#list-container").on("pjax:success",function(t){return function(e){var n;return $("ul.collections-nav li").removeClass("active"),n=$(e.relatedTarget),n.parent().addClass("active"),t.infiniteScroll(),$("#list-recommended").on("pjax:success",function(t){return t.stopPropagation(),$("ul.sort-nav li").removeClass("active"),n=$(t.relatedTarget),n.parent().addClass("active"),$("#following-tab").addClass("active")})}}(this)),this.el.pjax("ul.sort-nav a[data-pjax]","#list-recommended"),$("#list-recommended").on("pjax:success",function(){return function(t){var e;return t.stopPropagation(),$("ul.sort-nav li").removeClass("active"),e=$(t.relatedTarget),e.parent().addClass("active"),$("#following-tab").addClass("active")}}(this))}return e(n,t),n.prototype.initFollowingState=function(){return $("body").on("mouseenter",".following",function(t){var e;return e=$(t.currentTarget).data("total-likes"),$(this).addClass("unfollow").html("<i class='icon-plus icon-ok'></i>"+I18n.t("reading.unsubscribe_with_likes",{total_likes:e}))}),$("body").on("mouseleave",".following",function(t){var e;return e=$(t.currentTarget).data("total-likes"),$(this).removeClass("unfollow").html("<i class='icon-ok'></i>"+I18n.t("reading.subscribing_with_likes",{total_likes:e}))})},n}(Maleskine.BaseModule)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};Maleskine.CollectionNew=function(e){function i(){this.previewPicture=t(this.previewPicture,this),this.initCollectionEditors=t(this.initCollectionEditors,this),this.initCollectionTags=t(this.initCollectionTags,this),i.__super__.constructor.apply(this,arguments),this.initCollectionTags(),this.initCollectionEditors()}return n(i,e),i.prototype.elements={".picture-preview img":"previewElement","#picture-placeholder":"picturePlaceholder","#collection_tag_list":"collectionTags","#collection_editor_slug_list":"collectionEditors"},i.prototype.events={"change input[type=file]":"previewPicture"},i.prototype.initCollectionTags=function(){return this.collectionTags.tagsinput({confirmKeys:[13,32,44],maxTags:3,tagClass:function(){return function(){return"label label-info"}}(this)})},i.prototype.initCollectionEditors=function(){var t;return t={},this.collectionEditors.tagsinput({itemValue:"slug",itemText:"name",customTypeahead:!0,source:function(e){return function(n,i){var o;return o=e.collectionEditors.next().find("input").val(),$.getJSON(e.collectionEditors.data("search_nickname-url"),{name:n}).success(function(e){var n;return n=[],$.each(e.users,function(e,i){return t[i.name]=i,n.push(i.name)}),i(n)})}}(this),updater:function(e){return function(n){return e.collectionEditors.tagsinput("add",t[n])}}(this),matcher:function(t){return-1!==t.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(t){return t.sort()},highlighter:function(e){var n;return n=new RegExp("("+this.query+")","gi"),"<img src="+t[e].avatar+">"+e.replace(n,"<strong>$1</strong>")}}),this.collectionEditors.val().length>0&&$.each(this.collectionEditors.val().split(", "),function(t){return function(e,n){return $.getJSON(Routes.user_path(n,{format:"json"})).success(function(e){return t.collectionEditors.tagsinput("add",e.user)})}}(this)),$("#editors").css("display","inline-block").fadeIn("slow"),$(".editor-loading").remove()},i.prototype.previewPicture=function(t){var e,n;return e=$(t.currentTarget)[0].files[0],n=new FileReader,n.onload=function(t){return function(e){return t.previewElement.attr("src",e.target.result),t.previewElement.parent().removeClass("hidden"),t.picturePlaceholder.hide()}}(this),n.readAsDataURL(e)},i}(Maleskine.BaseModule)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};Maleskine.CollectionShow=function(e){function i(){this.markCollectionViewed=t(this.markCollectionViewed,this),this.hideSwitchViewButtons=t(this.hideSwitchViewButtons,this),this.showSwitchViewButtons=t(this.showSwitchViewButtons,this),this.submitContribution=t(this.submitContribution,this),this.changeNotebookSelect=t(this.changeNotebookSelect,this),this.rejectCollectionsNote=t(this.rejectCollectionsNote,this),this.autoSwitchView=t(this.autoSwitchView,this),this.likeNote=t(this.likeNote,this),i.__super__.constructor.apply(this,arguments),this.collectionSlug=this.getCollectionSlugFromUrl(),this.markCollectionViewed(),$.get(this.wordage.data("wordage-uri"),function(t){return function(e){return t.wordage.text(e.wordage)}}(this)),this.viewButtons.on("click",function(t){return function(e){var n;return n=$(e.currentTarget),$(".collection-list").removeClass("new-view"),"list"===n.data("view")&&$(".collection-list").addClass("new-view"),n.parent().siblings().find("a").removeClass("active"),n.addClass("active"),t.setCookie("collection_view",n.data("view"))}}(this)),this.contributeModal.on("hidden",function(t){return function(){return $(".modal-body > *").show(),t.helpBlock.hide(),t.submitButton.removeClass("disabled"),t.notebookSelect.prop("selectedIndex",0),t.noteSelect.prop("selectedIndex",0)}}(this)),$("a[data-original-title]").tooltip(),this.initFollowingState(),this.infiniteScroll(),$("ul.nav-collection-notes").pjax("a[data-pjax]","#list-container"),$("#list-container").on("pjax:success",function(){return function(t){var e;return $("ul.nav-collection-notes li").removeClass("active"),e=$(t.relatedTarget),e.parent().addClass("active")}}(this)),$("#add-post").length>0&&($(window).scroll(function(){var t;return t=$("#add-post .load-more .ladda-button").data("url"),t&&$(window).scrollTop()>$("#add-post").height()-$(window).height()-300?($("#add-post .load-more").text(""),$.getScript(t)):void 0}),$(window).scroll()),this.autoSwitchView()}return n(i,e),i.prototype.elements={".wordage":"wordage","select[name=notebook_id]":"notebookSelect","select[name=note_id]":"noteSelect","#note-loader":"noteLoader","#add-post":"contributeModal","#add-post p.help-block":"helpBlock","#add-post input[type=submit]":"submitButton",".switch-views a[data-view]":"viewButtons",".switch-views":"switchViewButtons","#reject-collection-submission":"rejectModal",".collection-list":"collectionList",".list-show":"listShowButton"},i.prototype.events={"click #contribute input[type=submit]":"submitContribution","click .latest-articles":"showSwitchViewButtons","click .top-articles":"hideSwitchViewButtons","change select[name=notebook_id]":"changeNotebookSelect","ajax:success .like-icon-button":"likeNote","click .reject":"rejectCollectionsNote"},i.prototype.likeNote=function(t,e){return $(t.currentTarget).html("<i class='"+(e.liked?"icon-heart":"icon-heart-empty")+"'></i>"+e.liked_count)},i.prototype.autoSwitchView=function(){return this.collectionList.length>0?($(window).resize(function(t){return function(){return $(window).width()<768&&!t.collectionList.hasClass("new-view")?t.listShowButton.click():$(window).width()>=768&&$(".latest-articles").hasClass("active")?t.showSwitchViewButtons():void 0}}(this)),$(window).resize()):void 0},i.prototype.rejectCollectionsNote=function(t){var e;return e=$(t.currentTarget).data("collection-submission-id"),this.rejectModal.empty().append(JST.render("collection_submissions/reject",{collectionSubmissionId:e}))},i.prototype.initFollowingState=function(){return $("body").on("mouseenter",".following",function(){return $(this).addClass("unfollow").html("<i class='icon-plus icon-ok'></i><span>"+I18n.t("reading.unsubscribe")+"</span>")}),$("body").on("mouseleave",".following",function(){return $(this).removeClass("unfollow").html("<i class='icon-ok'></i><span>"+I18n.t("reading.subscribing")+"</span>")})},i.prototype.changeNotebookSelect=function(){var t;return t=this.notebookSelect.find("option:selected").val(),null!=t&&t>0?(this.noteLoader.show(),$.getJSON("/notebooks/"+t+"/latest",function(t){return function(e){var n,i,o;for(t.noteSelect.html("<option selected value=''>"+I18n.t("reading.collections.select_note")+"</option>"),i=0,o=e.length;o>i;i++)n=e[i],t.noteSelect.append("<option value='"+n.id+"'>"+n.title+"</option>");return t.noteLoader.hide()}}(this))):this.noteSelect.html("<option selected value=''>"+I18n.t("reading.collections.select_note")+"</option>")},i.prototype.submitContribution=function(){var t;return""===this.noteSelect.val()||""===this.notebookSelect.val()?(t=I18n.t("reading.collections.select_note_error"),this.helpBlock.html(t),this.helpBlock.show(),!1):void 0},i.prototype.showSwitchViewButtons=function(){return $(window).width()>768?this.switchViewButtons.show():void 0},i.prototype.hideSwitchViewButtons=function(){return this.switchViewButtons.hide()},i.prototype.getCollectionSlugFromUrl=function(){var t,e,n;return t=/(collection|c)\/([a-zA-Z0-9]{6,12})/,n=window.location.pathname,e=n.match(t),e?e[2]:0},i.prototype.markCollectionViewed=function(){var t,e,n,i;for(n=/([^&=]+)=?([^&]*)/g,e=window.location.search.slice(1,+window.location.search.length+1||9e9),this.visit_data={},this.visit_data.token=Maleskine.Utils.secureRandom(64),null!=document.referrer&&document.referrer.length>0&&(this.visit_data.referrer=document.referrer);t=n.exec(e);)("utm_source"===(i=t[1])||"utm_medium"===i||"utm_term"===i||"utm_content"===i||"utm_campaign"===i)&&(this.visit_data[t[1]]=t[2]);return $.post("/collections/"+this.collectionSlug+"/mark_viewed",this.visit_data)},i}(Maleskine.BaseModule)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};Maleskine.CommentsList=function(e){function i(){this.insertEmoji=t(this.insertEmoji,this);var e,n;i.__super__.constructor.apply(this,arguments),this.emojiSet=["smile","blush","smiley","relaxed","wink","heart_eyes","kissing_heart","kissing_closed_eyes","flushed","grin","relieved","stuck_out_tongue_winking_eye","stuck_out_tongue_closed_eyes","unamused","smirk","sweat","pensive","confounded","disappointed_relieved","cold_sweat","fearful","persevere","cry","sob","joy","scream","angry","sleepy","mask","innocent","yum","anguished","frowning","hushed","dizzy_face","stuck_out_tongue","no_mouth","sunglasses","sweat_smile","worried","+1","-1","clap","v","pray","fist","heart","broken_heart","heartbeat","sparkling_heart","cupid","beer","beers","birthday","heavy_exclamation_mark","bangbang","interrobang","underage","no_bicycles","no_mobile_phones","u7981","up","sunny","moon","high_brightness","first_quarter_moon_with_face","zap","snowflake","cloud","tada","bear","cat","cow","dog","hamster","monkey_face","rabbit","tiger","turtle","whale","whale2","dolphin","crocodile","dragon_face","squirrel","hatching_chick","hatched_chick","baby_chick","frog","ant","bug","beetle","ghost","accept","airplane","alarm_clock","ambulance","angel","apple","arrows_counterclockwise","balloon","beginner","bikini","black_nib","blossom","bomb","boom","bow","bread","bulb","cake","cactus","camera","candy","checkered_flag","cherries","cherry_blossom","chocolate_bar","christmas_tree","clapper","closed_umbrella","closed_lock_with_key","clubs","cocktail","coffee","confetti_ball","crown","dancer","dancers","dart","doughnut","first_quarter_moon","fries","game_die","golf","guitar","gun","herb","hibiscus","high_heel","hocho","icecream","ideograph_advantage","jack_o_lantern","key","kiss","lock","lollipop","mag","moneybag","bell","no_bell","ribbon","skull","snowman","spaghetti","sparkles","strawberry","sunflower","sweat_drops","toilet","watermelon","anger","chart","corn","deciduous_tree","dash","dress","ear_of_rice","eyes","fallen_leaf","feet","fishing_pole_and_fish","hankey","heavy_check_mark","leaves","lipstick","mag_right","mailbox_with_mail","mailbox_with_no_mail","man_with_gua_pi_mao","metal","mushroom","musical_keyboard","on","arrow_right","arrow_left","arrow_up","arrow_down","atm","crystal_ball","eight_spoked_asterisk","octocat","crying_cat_face","heart_eyes_cat","joy_cat","scream_cat","smile_cat","smiley_cat","smirk_cat"],this.emojiInitialized=!1,window.location.hash.length>0&&$(window.location.hash).addClass("comment-active"),this.textarea.atwho({at:"@",data:this.textarea.data("user-names"),limit:10}).atwho({at:":",limit:10,tpl:"<li data-value=':${name}:'><img src='"+Maleskine.Settings.emoji_host+"/assets/emojis/${name}.png' height='20' width='20'/> ${name} </li>",data:Maleskine.Emoji}),this.deleteCommentLink.on("click",function(){var t;if(confirm(I18n.t("reading.delete_comment_confirm")))return t=$(this).parent().parent().parent(),$.ajax({url:$(this).data("url"),type:"DELETE",async:!0,complete:function(e,n){return"success"===n?$(t).hide("slow"):void 0}})}),this.replyCommentLink.on("click",function(t){return function(e){var n,i;return n=$(e.currentTarget),t.textarea.focus(),i=t.textarea.val(),i.length>1&&" "!==i[i.length-1]&&(i+=" "),t.textarea.val(i+("@"+n.data("nickname")+" "))}}(this)),$("#emoji-modal").on("show",function(t){return function(){return t.emojiInitialized?void 0:t.insertEmoji()}}(this)),e=function(t){return function(){var e,n;return n=rangy.getSelection(t.textarea[0]),e=n&&n.rangeCount&&n.getRangeAt(0)}}(this),n=function(){return function(t,e){var n,i,o;return document.selection?(t.focus(),i=document.selection.createRange(),i.text=e):t.selectionStart||"0"===t.selectionStart?(o=t.selectionStart,n=t.selectionEnd,t.value=t.value.substring(0,o)+e+t.value.substring(n,t.value.length),t.selectionStart=n+e.length,t.selectionEnd=n+e.length):t.value+=e}}(this),$("#emoji-modal").on("mousedown","[data-emoji-name]",function(t){return function(e){var i;return e.preventDefault(),i=" :"+$(e.currentTarget).data("emoji-name")+": ",n(t.textarea[0],i),t.emojiModal.modal("hide")}}(this)),this.el.on("ajax:success",".dismiss",function(){return function(t,e){var n,i;return n=$("#comment-"+e.id),n.fadeOut("slow",function(){return n.hide()}),i="<a href='"+Routes.undismiss_comment_path(e.id)+"' class='undismiss' data-method='post' data-remote='true' data-type='json' rel='nofollow'>"+I18n.t("reading.comment.undismiss_button")+"</a>",noty({text:I18n.t("reading.comment.dismiss_info")+"\u30fb"+i,layout:"topCenter",type:"information",timeout:5500,closeWith:[],theme:"maleskineTheme"})}}(this)),this.el.on("ajax:error",".dismiss",function(t){return function(e,n){return t.notyError($.parseJSON(n.responseText).errors[0])}}(this)),$("body").on("ajax:success",".undismiss",function(t){return function(e,n){var i;return i=$("#comment-"+n.id),i.fadeOut("slow",function(){return i.show()}),$(e.currentTarget).closest("ul").remove(),t.notyInfo(I18n.t("reading.comment.undismiss_info"))}}(this)),$("body").on("ajax:error",".undismiss",function(t){return function(e,n){return t.notyError($.parseJSON(n.responseText).errors[0])}}(this))}return n(i,e),i.prototype.elements={textarea:"textarea","a.delete":"deleteCommentLink","a.reply":"replyCommentLink","button[type=submit]":"commentSubmitButton","#emoji-modal":"emojiModal"},i.prototype.events={"keydown textarea":"submitCommentHotkey"},i.prototype.insertEmoji=function(){var t,e,n,i,o,r,s,a,l,c,u,h;for(r=$("#emojiTabContent ul"),u=[0,1,2,3],s=0,l=u.length;l>s;s++){for(i=u[s],o=50*i,n=50*(i+1)-1,e="",h=this.emojiSet.slice(o,+n+1||9e9),a=0,c=h.length;c>a;a++)t=h[a],e=""+e+"<li><a href='javascript:void(null)' data-emoji-name='"+t+"'><img src='"+Maleskine.Settings.emoji_host+"/assets/emojis/"+t+".png' alt=':"+t+":' title='"+t+"' class='emoji'></a></li>";$(r[i]).append(e)}return this.emojiInitialized=!0},i.prototype.submitCommentHotkey=function(t){if(Maleskine.BrowserDetector.isMac()){if(t.metaKey&&13===t.keyCode)return this.commentSubmitButton.trigger("click")}else if((10===t.keyCode||13===t.keyCode)&&t.ctrlKey)return this.commentSubmitButton.trigger("click")},i}(Maleskine.BaseModule)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};Maleskine.LoginModal=function(t){function n(){n.__super__.constructor.apply(this,arguments),this.el.on("shown",function(t){return function(){return t.emailInput.focus()}}(this)),this.el.on("hidden",function(t){return function(){return t.signInError.hide(),t.$("input").val("")}}(this)),this.signinForm.on("ajax:success",function(t){return function(e,n){return t.signInError.fadeOut("fast"),window.location=n.goto_url}}(this)),this.signinForm.on("ajax:error",function(t){return function(e,n){return t.signInError.fadeOut("fast",function(){return t.signInError.text($.parseJSON(n.responseText).error),t.signInError.fadeIn("fast")})}}(this)),this.signupForm.on("ajax:success",function(t){return function(e,n){var i,o;return t.notyInfo(I18n.t("reading.registration_complete")),o=n.goto_url,i=n.label,"undefined"!=typeof _gaq&&null!==_gaq&&_gaq.push(["_trackEvent","User","Create",i]),setTimeout(function(){return t.signInError.fadeOut("fast"),window.location=o},500)}}(this)),this.signupForm.on("ajax:error",function(t){return function(e,n){return t.signUpError.fadeOut("fast",function(){var e,i,o,r,s;for(i="",s=$.parseJSON(n.responseText),o=0,r=s.length;r>o;o++)e=s[o],i=""+i+e+"<br>";return t.signUpError.html(i),t.signUpError.fadeIn("fast")})}}(this))}return e(n,t),n.prototype.elements={"#sign_in":"signinForm","#sign_up":"signupForm","#signin_errors":"signInError","#signup_errors":"signUpError","#email":"emailInput","div.sign-in":"signInSection","div.sign-up":"signUpSection"},n.prototype.events={"click div.sign-in > a.switch":"goToSignUpSection","click div.sign-up > a.switch":"goToSignInSection"},n.prototype.goToSignInSection=function(){return this.signUpSection.hide(),this.signInSection.fadeIn("fast")
},n.prototype.goToSignUpSection=function(){return this.signInSection.hide(),this.signUpSection.fadeIn("fast")},n}(Maleskine.BaseModule)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};Maleskine.ViewModeModal=function(t){function n(){n.__super__.constructor.apply(this,arguments),this.bgButtons.on("click",function(t){return function(e){var n;return n=$(e.currentTarget),$("body").removeClass("reader-day-mode").removeClass("reader-night-mode").addClass("reader-"+n.data("mode")+"-mode"),n.siblings().removeClass("active"),n.addClass("active"),n.find("i").addClass("active"),t.setCookie("read_mode",n.data("mode"))}}(this)),this.fontButtons.on("click",function(t){return function(e){var n;return n=$(e.currentTarget),$("body").removeClass("reader-font1").removeClass("reader-font2").addClass("reader-"+n.data("font")),n.siblings().removeClass("active"),n.addClass("active"),t.setCookie("default_font",n.data("font"))}}(this))}return e(n,t),n.prototype.elements={"div.change-background > a":"bgButtons","div.change-font > a":"fontButtons"},n}(Maleskine.BaseModule)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};Maleskine.ImagesNew=function(e){function i(){this.goFetch=t(this.goFetch,this),i.__super__.constructor.apply(this,arguments),$("input:file").fileupload({url:"http://up.qiniu.com",acceptFileTypes:/(\.|\/)(jpe?g|png|gif)$/i,singleFileUploads:!0,add:function(t,e){var n;return n=$(t.currentTarget).val(),$.get("/upload_images/token.json",{filename:n},function(t){return function(n){var i;return t.imageUrl=n.url,e.formData={token:n.token,key:n.key},i=e.submit()}}(this))},done:function(){return $("#test").attr("src",this.imageUrl)}}),this.fetchButton.on("click",this.goFetch)}return n(i,e),i.prototype.elements={"input:file":"file","#externalImage":"extImg","#fetch":"fetchButton"},i.prototype.goFetch=function(){var t;return t=this.extImg.val(),$.post("/upload_images/fetch.json",{url:t},function(){return function(t){var e;return e=t.url,console.log(e)}}(this)).fail(function(){return function(t){var e;return e=t.message,console.log(e)}}(this))},i}(Maleskine.BaseModule)}.call(this),function(){$(function(){var t,e,n,i,o,r,s,a,l,c,u,h;for(Maleskine.currentUserSlug=$("#current_user_slug").attr("value"),JST.render=function(t,e){return JST["reading/templates/"+t](e)},Maleskine.BrowserDetector.isMobile()||(a=$("#user_access_temp_token").attr("value"),null!=a&&(i=new Faye.Client(Maleskine.Settings.faye_url,{timeout:12,retry:3}),i.disable("websocket"),i.subscribe("/notification/"+a,function(t){var e,n,i;switch(e=t.count>99?99:t.count,t.type){case"Feed":return i=$("#notify-icon"),n=$("#notify-amount"),n.length>0?n.text(e):$("<span class='messages-amount new-messages' id='notify-amount'>"+e+"</span>").insertAfter(i);case"Message":return i=$("#message-icon"),n=$("#message-amount"),n.length>0?n.text(e):$("<span class='messages-amount new-messages' id='message-amount'>"+e+"</span>").insertAfter(i);default:return console.log(t)}}))),$("[data-signin-link]").attr("href","#login-modal"),$(".modal").on("shown",function(){return $(this).hasClass("fullscreen")?$(".modal-backdrop").css("background","#FFF").css("opacity",1):void 0}),l=Maleskine.BrowserDetector.isMobile()?"touchend":"click",$(".set-view-mode").on(l,function(){var t;return t=$(this),t.hasClass("daytime")?(Maleskine.Utils.setNight(),t.removeClass("daytime").addClass("nighttime").html('<i class="icon-sun">')):(Maleskine.Utils.setDay(),t.removeClass("nighttime").addClass("daytime").html('<i class="icon-moon">'))}),$.support.pjax&&($.pjax.defaults.timeout=!1),I18n.defaultLocale="zh-CN",I18n.locale=$("body").data("locale"),$(".shutdown").length>0&&(s=$(".shutdown").data("notice-id"),$.cookie("hide_notice")!==s&&($(".shutdown > i").click(function(){return $.cookie("hide_notice",s,{path:"/"}),$(".shutdown").slideToggle()}),$(".shutdown").slideToggle())),h=$("button.ladda-button[data-remote]"),c=0,u=h.length;u>c;c++)r=h[c],o=Ladda.create(r),$(r).on("ajax:beforeSend",function(){return function(){return o.start()}}(this)),$(r).on("ajax:complete",function(){return function(){return o.stop()}}(this));return $("input[type=checkbox]").iCheck({checkboxClass:"icheckbox_minimal"}),$("input[type=radio]").iCheck({radioClass:"iradio_minimal"}),Maleskine.BrowserDetector.lessThanIE8()&&(n=$("<div id='ie-alert'></div>"),n.append('<div class="mock"></div><div class="content"></div>'),n.find(".content").append('<h2><span class="exclamation-sign">!</span>'+I18n.t("ie_warning.title")+"</h2>"),n.find(".content").append("<br />"),n.find(".content").append('<p class="show-link"> '+I18n.t("ie_warning.upgrade_ie")+"<br />"+I18n.t("ie_warning.use_chrome")+"</p>"),n.find(".content").append('<p class="skip"><a href="javascript:void(null);" onclick="$(\'#ie-alert\').remove();">'+I18n.t("ie_warning.skip")+"</a></p>"),$("body").prepend(n)),$("img[lazy-avatar]").length>0&&$(window).on("load",function(){var t,e,n,i,o;for(i=$("img[lazy-avatar]"),o=[],e=0,n=i.length;n>e;e++)t=i[e],o.push($(t).attr("src",$(t).attr("lazy-avatar")));return o}),$(".search-query").length>0&&$(".search-query").keypress(function(t){var e,n;return e=$(".search-query").val(),13===t.which&&null!=e&&e.length>0?(n="http://www.baidu.com/#wd="+encodeURIComponent("site:jianshu.io "+e),window.open(n,"_blank")):void 0}),$("select[data-enable-select2]").length>0&&($("select[data-enable-select2]").data("old-val",$("select[data-enable-select2]").val()),$("select[data-enable-select2]").select2().on("change",function(){var t,e,n,i,o,r,s,a;for(o=$(this).data("old-val")||[],i=$(this).val()||[],e=null,o.length>i.length?(t=o,r=i):(r=o,t=i),s=0,a=t.length;a>s;s++)if(n=t[s],r.indexOf(n)<0){e=n;break}return $.post($(this).data("update_url"),{collection_id:e}),$("select[data-enable-select2]").data("old-val",$("select[data-enable-select2]").val())})),$("a[data-toggle=tooltip]").tooltip(),e=$("#flash"),t=$("#error_explanation ul > li"),e.length>0&&$.each(e.children(),function(){return function(t,e){var n,i,o;return o=$(e).data("flash-type"),i="notice"===o?"information":"error",n="notice"===o?2200:3500,$.each($(e).children(),function(t,e){return noty({text:$(e).text(),layout:"topCenter",type:i,timeout:n,theme:"maleskineTheme"})})}}(this)),t.length>0&&$.each(t,function(){return function(t,e){return noty({text:$(e).text(),layout:"topCenter",type:"error",timeout:3e3,theme:"maleskineTheme"})}}(this)),$("[data-js-module]").each(function(t,e){var n,i,o;return n=$(e),o=Maleskine.Utils.fromClassNameToClassName(n.data("js-module")),o.length>0?i="function"==typeof Maleskine[o]?new Maleskine[o]({el:n}):void 0:void 0}),Maleskine.AuthorCard.initAuthorCards()})}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};Maleskine.Messages=function(t){function n(){n.__super__.constructor.apply(this,arguments),this.click_list=!1,this.mailTargets.on("click",function(t){return function(e){return $(t.targetUser).val($(e.srcElement).data("nickname"))}}(this)),this.content[0].focus(),this.$("ul.dropdown-menu > li").click(function(t){return function(e){return t.targetUser.val($(e.target).data("nickname")),t.$("ul.nickname-autocomplete").hide()}}(this)),this.targetUser.on("keyup",function(t){return function(){return 0===t.targetUser.val().length?void t.$("ul.nickname-autocomplete").hide():$.get(t.targetUser.data("search_nickname-url")+("?name="+t.targetUser.val())).success(function(e){var n;return n=t.build_ul_for_nickname(e),n.find("li").on("click",function(e){return t.targetUser.val($(e.target).data("nickname")),t.$("ul.nickname-autocomplete").hide()}),n.find("li").on("mousedown",function(){return t.click_list=!0}),t.$("ul.nickname-autocomplete").remove(),n.appendTo(t.dropdownArea)})}}(this)),this.targetUser.on("blur",function(t){return function(){return t.click_list||t.$("ul.nickname-autocomplete").hide(),t.click_list=!1}}(this))}return e(n,t),n.prototype.elements={"#content":"content","#target_user":"targetUser","ul.select-target a":"mailTargets","form div.dropdown":"dropdownArea"},n.prototype.build_ul_for_nickname=function(t){var e,n,i,o,r;if(0===t.length)return $("");for(e='<ul class="dropdown-menu nickname-autocomplete">',r=t.users,i=0,o=r.length;o>i;i++)n=r[i],e+='<li><a href="javascript:void(null);" data-nickname="'+n.name+'">'+n.name+"</a></li>";return e+="</ul>",$(e)},n}(Maleskine.BaseModule)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};Maleskine.NotebookShow=function(e){function i(){this.hideSwitchViewButtons=t(this.hideSwitchViewButtons,this),this.showSwitchViewButtons=t(this.showSwitchViewButtons,this),this.autoSwitchView=t(this.autoSwitchView,this),this.likeNote=t(this.likeNote,this),i.__super__.constructor.apply(this,arguments),$.get(this.wordage.data("wordage-uri"),function(t){return function(e){return t.wordage.text(e.wordage)}}(this)),$("a[data-original-title]").tooltip(),this.initFollowingState(),this.infiniteScroll(),this.viewButtons.on("click",function(t){return function(e){var n;return n=$(e.currentTarget),t.notebookList.removeClass("new-view"),"list"===n.data("view")&&t.notebookList.addClass("new-view"),n.parent().siblings().find("a").removeClass("active"),n.addClass("active"),t.setCookie("collection_view",n.data("view"))}}(this)),this.el.pjax("a[data-pjax]","#list-container"),this.listContainer.on("pjax:success",function(t){return function(e){var n;return t.nav.find("li").removeClass("active"),n=$(e.relatedTarget),n.parent().addClass("active")}}(this)),this.autoSwitchView()}return n(i,e),i.prototype.elements={"span.wordage":"wordage","ul.switch-views a[data-view]":"viewButtons","ul.switch-views":"switchViewButtons","div.notebook-list":"notebookList","a.list-show":"listShowButton","div.notebook-list":"notebookList","#list-container":"listContainer","ul.nav-notebooks":"nav"},i.prototype.events={"click li.latest-articles":"showSwitchViewButtons","click li.top-articles":"hideSwitchViewButtons","ajax:success a.like-icon-button":"likeNote"},i.prototype.likeNote=function(t,e){return $(t.currentTarget).html("<i class='"+(e.liked?"icon-heart":"icon-heart-empty")+"'></i>"+e.liked_count)},i.prototype.autoSwitchView=function(){return this.notebookList.length>0?($(window).resize(function(t){return function(){return $(window).width()<768&&!t.notebookList.hasClass("new-view")?t.listShowButton.click():$(window).width()>=768&&$(".latest-articles").hasClass("active")?t.showSwitchViewButtons():void 0}}(this)),$(window).resize()):void 0},i.prototype.initFollowingState=function(){return $("body").on("mouseenter",".following",function(){return $(this).addClass("unfollow").html("<i class='icon-plus icon-ok'></i><span>"+I18n.t("reading.unsubscribe")+"</span>")}),$("body").on("mouseleave",".following",function(){return $(this).removeClass("unfollow").html("<i class='icon-ok'></i><span>"+I18n.t("reading.subscribing")+"</span>")})},i.prototype.showSwitchViewButtons=function(){return $(window).width()>768?this.switchViewButtons.show():void 0},i.prototype.hideSwitchViewButtons=function(){return this.switchViewButtons.hide()},i}(Maleskine.BaseModule)}.call(this),function(){var __bind=function(t,e){return function(){return t.apply(e,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var i in e)__hasProp.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Maleskine.NoteShow=function(_super){function NoteShow(){this.setFurtherReadingState=__bind(this.setFurtherReadingState,this),this.hideStateDropdown=__bind(this.hideStateDropdown,this),this.showStateDropdown=__bind(this.showStateDropdown,this),this.pasteLoadFurtherLink=__bind(this.pasteLoadFurtherLink,this),this.enterKeyLoadFurtherLink=__bind(this.enterKeyLoadFurtherLink,this),this.loadFurtherLink=__bind(this.loadFurtherLink,this),this.submitFurtherReading=__bind(this.submitFurtherReading,this),this.deleteFurtherReading=__bind(this.deleteFurtherReading,this),this.cancelFurtherReading=__bind(this.cancelFurtherReading,this),this.startNewFurtherReadingLink=__bind(this.startNewFurtherReadingLink,this),this.showContributeModal=__bind(this.showContributeModal,this),this.markNoteViewed=__bind(this.markNoteViewed,this),this.markNoteRead=__bind(this.markNoteRead,this),this.highlightNote=__bind(this.highlightNote,this),this.init=__bind(this.init,this);var t,e;NoteShow.__super__.constructor.apply(this,arguments),/#comments/.test(location.hash)&&(this.goToComment=!0),"#comments"===location.hash&&($("a[href='#comments']").click(),location.hash=location.hash),Maleskine.BrowserDetector.isIE8()&&$(window).width()<=1024&&$(".container").addClass("fix-ie8"),this.notebooksMenuModal.on("show",function(t){return function(){var e,n;return n=t.notebooksMenuModal.find(".panel-heading").outerHeight(),e=$(window).height()-40-n-55,t.notebooksMenuModal.find("ul.list-group").css({"max-height":""+e+"px"})}}(this)),this.submissionModal.on("show",function(t){return function(){var e,n;return n=t.submissionModal.find(".modal-header").outerHeight(),e=$(window).height()-40-n-55,t.submissionModal.find("div.modal-body").css({"max-height":""+e+"px"})}}(this)),this.init(),$(document).on("WeixinJSBridgeReady",function(t){return function(){return WeixinJSBridge.on("menu:share:appmessage",function(){var e,n;return e=t.images.length>0?$(t.images[0]).attr("src"):$("#show-note-container div.people div.avatar img").attr("src"),n={img_url:e,link:t.noteUrl,desc:t.noteAbbr,title:t.title},WeixinJSBridge.invoke("sendAppMessage",n,function(t){return _report("send_msg",t.err_msg)})}),WeixinJSBridge.on("menu:share:timeline",function(){var e,n;return e=t.images.length>0?$(t.images[0]).attr("src"):$("#show-note-container div.people div.avatar img").attr("src"),n={img_url:e,link:t.noteUrl,desc:t.noteAbbr,title:t.title},WeixinJSBridge.invoke("shareTimeline",n,function(t){return _report("send_msg",t.err_msg)})}),WeixinJSBridge.on("menu:share:weibo",function(){return WeixinJSBridge.invoke("shareWeibo",{content:"",url:t.noteUrl},function(t){return _report("send_msg",t.err_msg)})})}}(this)),this.warning.hide(),t=this.warning,e=this.warningText,this.sendMessageButton.click(function(){var n,i,o,r,s,a;return n=$("#message_content").val(),$("#message_content").attr("disabled","disabled"),$(this).attr("disabled","disabled"),o=$(this).text(),$(this).text(I18n.t("button.submitting")),t.hide(),a=$(this).data("send_message_url"),i=$(this).data("mail_to"),r=$(this).data("reply_to"),s=$(this).data("reply_type"),$.post(a,{content:n,reply_to:r,reply_type:s,mail_to:i,format:"json"},function(n){return function(i){return"ok"===i.status?$("#message_content").val(""):(e.text(""+I18n.t("button.submit_failed")+", "+i.error[0]),t.show()),$("#message_content").attr("disabled",null),$(n).attr("disabled",null),$(n).text(o)}}(this))}),$(window).scroll(function(t){return function(){var e;return e=$(window).scrollTop(),e>2e3?t.goTopButton.removeClass("hide-go-top"):t.goTopButton.addClass("hide-go-top")}}(this)),this.noteContainer.on("pjax:success",function(t){return function(){return t.refreshElements(),document.title=t.noteTitle.text(),t.init()}}(this)),this.collectionSearch.on("keyup",function(t){return function(){var e;return e=t.collectionSearch.val(),$.post(t.collectionSearch.data("search-collections-url")+("&&search_term="+e))}}(this))}return __extends(NoteShow,_super),NoteShow.prototype.elements={"div.go-top":"goTopButton","#myModal":"readModeModal","#notebooks-menu":"notebooksMenuModal","ul.list-group a":"notes","a.notebooks-menu-btn":"notebooksMenuButton","#user-editor-actions":"submissionModal","#show-note-container":"noteContainer","h1.title":"noteTitle","div.show-content":"noteContent","a.write-letter":"messageButton","div.meta-bottom":"metaBottom","div.show-content img":"images",".editor-actions .timer":"recommendationTimer","#send_message_button":"sendMessageButton","#write-letter span.warning":"warning","#write-letter span.warning > span.warning-text":"warningText","input#search_term":"collectionSearch","#further-readings-list":"furtherReadingsList","#further-reading-line":"furtherReadingsTitle","#further-reading-description":"furtherReadingDescription"},NoteShow.prototype.events={"show #user-editor-actions":"showContributeModal","click #further-reading-new-prompt":"startNewFurtherReadingLink","click #load-further-reading":"loadFurtherLink","click #cancel-further-reading":"cancelFurtherReading","click #submit-further-reading":"submitFurtherReading","click #delete-further-reading":"deleteFurtherReading","keypress #further-reading-link-text":"enterKeyLoadFurtherLink","paste #further-reading-link-text":"pasteLoadFurtherLink","mouseover .further-reading-states>li":"showStateDropdown","mouseout .further-reading-states>li":"hideStateDropdown"},NoteShow.prototype.init=function(){var $othersButton,$othersDropdown,$othersItem,$weiboAndTwitter,assistButtons,authorName,img,module,others,popline,sns,snses,url,_i,_j,_k,_l,_len,_len1,_len2,_len3,_ref,_ref1,_ref2,_ref3;for(this.$("a.like-button").on("ajax:beforeSend",function(){return $(this).parent().addClass("load")}),_ref=$.popline.instances,_i=0,_len=_ref.length;_len>_i;_i++)popline=_ref[_i],popline.destroy();if($.popline.instances=[],window.Zepto&&(assistButtons=Zepto(".show-contents, .back, .right-corner-nav, .shrink, .navbar-user, .wrap-btn, .notebooks-menu-btn"),Zepto(".article").on("tap",function(){return assistButtons.toggleClass("phone-hiding")}),Zepto(window).scroll(function(){return Zepto(window).scrollTop()>50?assistButtons.addClass("phone-hiding"):assistButtons.removeClass("phone-hiding")})),this.title=$.trim(this.noteTitle.html()),this.noteUrl=window.location.href.split("?")[0],this.noteSlug=this.getShowNoteSlugFromUrl(),this.is_author_self=Boolean(this.metaBottom.data("is-self")),this.is_signed_in=Boolean(this.metaBottom.data("is-signed-in")),this.authorNameWeibo=this.metaBottom.data("author-weibo"),this.authorNameTwitter=this.metaBottom.data("author-twitter"),this.noteImage=this.metaBottom.data("image"),this.noteAbbr=$("#short-abbr").html(),this.noteImage)this.imageUrls=[this.noteImage];else for(this.imageUrls=[],_ref1=this.images,_j=0,_len1=_ref1.length;_len1>_j;_j++)img=_ref1[_j],this.imageUrls.push($(img).attr("src"));for(this.markNoteViewed(),this.is_signed_in&&!this.is_author_self&&$.popline.addButton({message:{iconClass:"icon-envelope",mode:"view",action:function(t){return function(){var e,n;return e=$.popline.current.currentSelection.text,e.length>197&&(e=""+e.slice(0,198)+"..."),e=encodeURIComponent(e),n=t.messageButton.attr("href"),window.open(""+n+"&quote="+e)}}(this)}}),$.popline.addButton({share:{iconClass:"icon-share",mode:"view",buttons:{weibo:{iconClass:"icon-weibo",mode:"view",action:function(_this){return function(event){var quote,url;return quote=$.popline.current.currentSelection.text,url=Maleskine.ShareScripts.share("weibo",_this.title,quote,_this.noteUrl,_this.authorNameWeibo,_this.is_author_self,_this.imageUrls),eval(url)}}(this)},twitter:{iconClass:"icon-twitter",mode:"view",action:function(_this){return function(event){var quote,url;return quote=$.popline.current.currentSelection.text,url=Maleskine.ShareScripts.share("twitter",_this.title,quote,_this.noteUrl,_this.authorNameTwitter,_this.is_author_self,_this.imageUrls),eval(url)}}(this)}}}}),this.startReadingTime=(new Date).getTime(),this.readScrollLimit=this.metaBottom.offset().top,this.noteContent.popline({mode:"view",position:"relative",top:this.noteContent.offset().top,bottom:this.noteContent.offset().top+this.noteContent.height()}),this.el.pjax("a[data-pjax]","#show-note-container"),this.highlightNote(this.getShowNoteSlugFromUrl()),$weiboAndTwitter=$("ul.share-note-text"),snses="",_ref2=["weibo","twitter"],_k=0,_len2=_ref2.length;_len2>_k;_k++)sns=_ref2[_k],authorName=this.metaBottom.data("author-"+sns),url=Maleskine.ShareScripts.share(sns,this.title,null,this.noteUrl,authorName,this.is_author_self,this.imageUrls),snses=""+snses+'<li><a href="'+url+"\"><i class='icon-"+sns+"'></i></a></li>";for($weiboAndTwitter.append(snses),$othersButton=$("<a href='javascript:void(0)' data-toggle='dropdown' class='share-btn'><i class='icon-ellipsis-horizontal'></i></a>"),$othersDropdown=$("<ul class='dropdown-menu'></ul>"),this.noteImage&&$othersDropdown.append("<li><a href='"+this.noteImage+"' target='_blank'><i class='icon-download'></i>"+I18n.t("reading.download_changweibo_image")+"</a></li>"),others="",_ref3=["tweibo","qzone","douban","facebook","google_plus","renren"],_l=0,_len3=_ref3.length;_len3>_l;_l++)sns=_ref3[_l],url=Maleskine.ShareScripts.share(sns,this.title,null,this.noteUrl,authorName,this.is_author_self,this.imageUrls),others=""+others+'<li><a href="'+url+'">'+Maleskine.SocialIcons.icon(sns,32,32)+" "+I18n.t("reading.social_sharing.share_to_label."+sns)+"</a></li>";return $othersDropdown.append(others),$othersItem=$("<li></li>"),$othersItem.append($othersButton).append($othersDropdown),$weiboAndTwitter.append($othersItem),this.recommendationTimer.datetimepicker(),module=new Maleskine.CommentsList({el:this.el.find("#comments")}),$.getJSON(Routes.note_further_readings_path(this.noteSlug)).done(function(t){return function(e){var n,i,o,r;if(e.length>0){for(t.furtherReadingsTitle.show(),r=0,o=e.length;o>r;r++)i=e[r],t.furtherReadingsList.append(JST.render("note/further_reading_item",i));if(n=t.getURLParmeter("further_reading"))return t.scrollToAnchor("further_reading_"+n)}}}(this)),this.furtherReadingsList.on("click",".state-item",function(t){return function(e){return t.setFurtherReadingState($(e.currentTarget))}}(this)),$("body").on("click",".undo",function(t){return function(e){var n,i,o;return t.furtherReadingsTitle.show(),o=$(e.currentTarget).data("state"),t.removeFurtherReadingItem&&"dismiss"!==o&&clearTimeout(t.removeFurtherReadingItem),n=$(e.currentTarget).data("further-reading-id"),i=t.furtherReadingsList.find("li#further_reading_"+n),t.setFurtherReadingState(i.find("li[data-state='"+o+"']")),$(e.currentTarget).parents("ul").remove()}}(this))},NoteShow.prototype.highlightNote=function(t){return this.notes.removeClass("active"),this.notes.filter("[data-note-slug="+t+"]").addClass("active")},NoteShow.prototype.getShowNoteSlugFromUrl=function(){var t,e,n;return t=/p\/([a-zA-Z0-9]{6,12})/,n=window.location.pathname,e=n.match(t),e?e[1]:0},NoteShow.prototype.markNoteRead=function(){var t,e;return e=Math.floor(((new Date).getTime()-this.startReadingTime)/1e3),t=this.visit_data,t.reading_time=e,$.post("/notes/"+this.noteSlug+"/mark_read",t)},NoteShow.prototype.markNoteViewed=function(){var t,e,n,i;for(n=/([^&=]+)=?([^&]*)/g,e=window.location.search.slice(1,+window.location.search.length+1||9e9),this.visit_data={},this.visit_data.token=Maleskine.Utils.secureRandom(64),null!=document.referrer&&document.referrer.length>0&&(this.visit_data.referrer=document.referrer);t=n.exec(e);)("utm_source"===(i=t[1])||"utm_medium"===i||"utm_term"===i||"utm_content"===i||"utm_campaign"===i)&&(this.visit_data[t[1]]=t[2]);return $.post("/notes/"+this.noteSlug+"/mark_viewed",this.visit_data),null==this.goToComment?$(document).scrollTop()+$(window).height()>=this.readScrollLimit?window.setTimeout(function(t){return function(){return t.markNoteRead()}}(this),1500):$(window).on("scroll.markread",function(t){return function(){return $(document).scrollTop()+$(window).height()>=t.readScrollLimit?($(window).off("scroll.markread"),t.markNoteRead()):void 0}}(this)):void 0},NoteShow.prototype.showContributeModal=function(t){var e,n;return $(".modal-body #search_term").val(""),e=$(t.currentTarget).data("user-slug"),n=$(t.currentTarget).data("note-id"),$.getJSON(Routes.editable_collections_user_path(e,{note_id:n,format:"json"}),function(){return function(t){return $("ul.add-list").empty().append(JST.render("note/collection",{collections:t.collections,note_id:n}))}}(this))},NoteShow.prototype.startNewFurtherReadingLink=function(t){return $(t.currentTarget).hide(),$("#further-reading-form").replaceWith(JST.render("note/further_reading_link")),$("#further-reading-form").show(),this.selectText($("#further-reading-link-text"))},NoteShow.prototype.cancelFurtherReading=function(t){return $(t.currentTarget).parent().empty().removeClass("active"),$("#further-reading-new-prompt").show()},NoteShow.prototype.deleteFurtherReading=function(t){var e,n;return n=$(t.currentTarget).parents("li"),e=$(t.currentTarget).data("further-reading-id"),$.ajax({url:Routes.note_further_reading_path(this.noteSlug,e),type:"DELETE",dataType:"json"}).done(function(t){return function(){return n.remove(),0===t.furtherReadingsList.children().length&&t.furtherReadingsTitle.hide(),t.notyInfo(I18n.t("reading.further_reading.delete_success"))}}(this))},NoteShow.prototype.submitFurtherReading=function(){var t,e,n,i;return e=this.getShowNoteSlugFromUrl(),n=$("#further-reading-title").text(),t=$("#further-reading-description").text(),i=$("#further-reading-url").attr("href"),$.post(Routes.note_further_readings_path(e),{further_reading:{title:n,description:t,url:i}},function(t){return function(e){return t.furtherReadingsTitle.show(),t.furtherReadingsList.append(JST.render("note/further_reading_item",e)),$("#further-reading-form").empty().removeClass("active"),$("#further-reading-new-prompt").show()}}(this)).fail(function(t){return function(e){return t.notyError($.parseJSON(e.responseText).errors[0])}}(this))},NoteShow.prototype.loadFurtherLink=function(){var t;return t=$.trim($("#further-reading-link-text").text()),t.length>0?(/^(http(s?):\/\/|www)/.test(t)||$("#further-reading-link-text").text("http://"+t),$.ajax({url:Routes.load_reading_url_path({url:t}),dataType:"json",beforeSend:function(){return function(){return $("#loader").show()}}(this)}).done(function(t){return function(e){var n,i,o;return o=$("#further-readings").data("user-slug"),i=$("#further-readings").data("user-nickname"),$("#further-reading-form").replaceWith(JST.render("note/further_reading_content",{data:e,slug:o,nickname:i})),n=$("#further-reading-description"),t.selectText(n),n.on("keypress",function(e){var n;return n=e.keyCode||e.which,13===n?t.submitFurtherReading():void 0})}}(this)).fail(function(t){return function(){return t.notyInfo(I18n.t("reading.further_reading.load_link_error"))}}(this)).always(function(){return function(){return $("#loader").hide()}}(this))):void 0},NoteShow.prototype.enterKeyLoadFurtherLink=function(t){return 13===t.which?(this.loadFurtherLink(),t.preventDefault()):void 0},NoteShow.prototype.pasteLoadFurtherLink=function(){return setTimeout(function(t){return function(){return t.loadFurtherLink()}}(this),100)},NoteShow.prototype.showStateDropdown=function(t){return $(t.currentTarget).parent().children().show()},NoteShow.prototype.hideStateDropdown=function(t){return $(t.currentTarget).parent().children(".hide").hide()},NoteShow.prototype.setFurtherReadingState=function(t){var e,n,i,o,r;return n=t.parents("li"),e=t.parent().data("further-reading-id"),i=n.data("can-be-dismissed"),o=t.parent().data("origin-state"),r=t.data("state"),t.parent().replaceWith(JST.render("note/further_reading_states",{id:e,state:r,can_be_dismissed:i})),n.show(),"dismiss"===r&&(n.hide(),1===this.furtherReadingsList.children().length&&this.furtherReadingsTitle.hide()),$.post(Routes.update_further_reading_state_path({format:"json"}),{note_id:this.noteSlug,id:e,state:r},function(t){return function(){var i;return t.removeFurtherReadingItem=setTimeout(function(){return"dismiss"===r?n.remove():void 0},5e3),i=I18n.t("reading.further_reading.states."+r),noty({text:I18n.t("reading.further_reading.undo_link",{state:i,id:e,originState:o}),layout:"topCenter",type:"information",timeout:4800,closeWith:[],theme:"maleskineTheme"})}}(this)).fail(function(t){return function(i){return n.find(".further-reading-states").replaceWith(JST.render("note/further_reading_states",{id:e,state:o})),t.notyError($.parseJSON(i.responseText).errors[0]),"dismiss"===r?(t.furtherReadingsList.children().length>0&&t.furtherReadingsTitle.hide(),n.show()):void 0}}(this))},NoteShow.prototype.selectText=function(t){var e,n,i;return e=t[0],document.body.createTextRange?(n=document.body.createTextRange(),n.moveToElementText(e),n.select()):window.getSelection?(i=window.getSelection(),n=document.createRange(),n.selectNodeContents(e),i.removeAllRanges(),i.addRange(n)):void 0},NoteShow}(Maleskine.BaseModule)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};Maleskine.Recommendation=function(e){function i(){this.likeNote=t(this.likeNote,this),i.__super__.constructor.apply(this,arguments),this.writeButton.on("click",function(t){return function(){return t.setCookie("signin_redirect",Routes.writer_path())}}(this)),this.loginModal.on("hidden",function(t){return function(){return t.setCookie("signin_redirect",window.location.pathname)}}(this))}return n(i,e),i.prototype.elements={"#write-button":"writeButton","#login-modal":"loginModal"},i.prototype.events={"ajax:success a.like-icon-button":"likeNote"},i.prototype.likeNote=function(t,e){return $(t.currentTarget).html("<i class='"+(e.liked?"icon-heart":"icon-heart-empty")+"'></i>"+e.liked_count)},i}(Maleskine.BaseModule)}.call(this),function(){}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};Maleskine.SessionsNew=function(t){function n(){n.__super__.constructor.apply(this,arguments)}return e(n,t),n.prototype.elements={"div.sign-in":"signInSection","div.sign-up":"signUpSection"},n.prototype.events={"click div.sign-in > a.switch":"goToSignUpSection","click div.sign-up > a.switch":"goToSignInSection"},n.prototype.goToSignInSection=function(){return this.signUpSection.hide(),this.signInSection.fadeIn("fast")},n.prototype.goToSignUpSection=function(){return this.signInSection.hide(),this.signUpSection.fadeIn("fast")},n}(Maleskine.BaseModule)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};Maleskine.UserInit=function(t){function n(){n.__super__.constructor.apply(this,arguments),this.submitButton.click(function(){return function(){return $(".tab-pane.active > form").trigger("submit.rails")}}(this)),this.form.on("ajax:beforeSend",function(t){return function(){return Ladda.create(t.submitButton[0]).start()}}(this)),this.form.on("ajax:success",function(t){return function(e,n){return t.notyInfo(n.message),setTimeout(function(){return window.location=n.redirect_to},1500)}}(this)),this.form.on("ajax:error",function(t){return function(e,n){var i,o,r,s,a;for(Ladda.create(t.submitButton[0]).stop(),o="",a=$.parseJSON(n.responseText).errors,r=0,s=a.length;s>r;r++)i=a[r],o=""+o+"<span>"+i+"</span>";return t.notyError(o)}}(this)),this.nicknameInput.blur(function(t){return function(){return $.post("/users/check_nickname.json",{nickname:t.nicknameInput.val()},function(e){return t.nicknameAvailability.text(e.msg)})}}(this))}return e(n,t),n.prototype.elements={form:"form","#user_email":"emailInput","#user_nickname":"nicknameInput",".nickname-availability":"nicknameAvailability",".email-availability":"emailAvailability",".submit-button":"submitButton"},n}(Maleskine.BaseModule)}.call(this),function(){this.JST||(this.JST={}),this.JST["reading/templates/collection_submissions/reject"]=function(t){var e='<form accept-charset="UTF-8" action="/collection_submissions/'+(t.collectionSubmissionId||"").toString().encodeHTML()+'/reject" data-remote="true" method="post"> <div class="modal-header"> <b>'+(I18n.t("reading.reject.title")||"").toString().encodeHTML()+'</b> </div> <div class="modal-body"> <p>'+(I18n.t("reading.reject.description")||"").toString().encodeHTML()+'</p> <textarea id="content" name="content" placeholder="'+(I18n.t("reading.reject.placeholder")||"").toString().encodeHTML()+'"></textarea> </div> <div class="modal-footer"> <button class="btn" data-dismiss="modal" aria-hidden="true">'+(I18n.t("reading.reject.close")||"").toString().encodeHTML()+'</button> <input class="btn btn-info" name="commit" type="submit" value="'+(I18n.t("reading.reject.submit")||"").toString().encodeHTML()+'"> </div></form>';
return e}}.call(this),function(){this.JST||(this.JST={}),this.JST["reading/templates/comment/paginator"]=function(t){var e='<div class="pagination clearfix"><ul>';t.current_page>1&&(e+='<li class="next"><a href="javascript:void(null)" data-page="'+(t.current_page-1)+'" rel="last"><i class="icon-angle-left"></i></a></li>');for(var n=1;n<=t.total_pages;n++)n==t.current_page&&(e+='<li class="active"><a href="javascript:void(null)">'+(n||"").toString().encodeHTML()+"</a></li>"),n!=t.current_page&&(e+='<li class=""><a href="javascript:void(null)" data-page="'+n+'" >'+(n||"").toString().encodeHTML()+"</a></li>");return t.current_page<t.total_pages&&(e+='<li class="next"><a href="javascript:void(null)" data-page="'+(t.current_page+1)+'" rel="next"><i class="icon-angle-right"></i></a></li>'),e+="</ul></div>"}}.call(this),function(){this.JST||(this.JST={}),this.JST["reading/templates/comment/timeline_comments_item"]=function(t){var e='<p><a href="'+(t.user.url||"").toString().encodeHTML()+'" class="author-avatar" data-toggle="tooltip" data-placement="left" data-original-title="'+(t.user.name||"").toString().encodeHTML()+'" target="_blank"><img src="'+(t.user.image||"").toString().encodeHTML()+'" /></a>'+t.content+'<a href="javascript:void(null)" class="reply" data-nickname="'+(t.user.name||"").toString().encodeHTML()+'">'+(I18n.t("reading.timeline.reply")||"").toString().encodeHTML()+"</a>";return Maleskine.currentUserSlug==t.user.slug&&(e+='<a href="javascript:void(null)" class="delete" data-destroy-url="'+t.destroy_url+'">'+(I18n.t("reading.timeline.delete")||"").toString().encodeHTML()+"</a>"),e+="</p>"}}.call(this),function(){this.JST||(this.JST={}),this.JST["reading/templates/note/collection"]=function(t){var e="",n=t.collections;if(n)for(var i,o=-1,r=n.length-1;r>o;)i=n[o+=1],e+='<li id="collection_'+(i.id||"").toString().encodeHTML()+'"> ',e+=i.collection_note_id?' <a href="javascript:void(null)" class="add"> <div class="avatar"> <img alt="'+(i.image_file_name||"").toString().encodeHTML()+'" src="'+(i.image_source||"").toString().encodeHTML()+'" thumbnail="180x180"> </div> <h5>'+(i.title||"").toString().encodeHTML()+"</h5> <small>"+(i.owner_name||"").toString().encodeHTML()+(I18n.t("reading.bian")||"").toString().encodeHTML()+'</small> </a> <a href="'+(Routes.collection_note_path(i.collection_note_id,{collection_id:i.id})||"").toString().encodeHTML()+'" class="delete" data-method="delete" data-remote="true" rel="nofollow">'+(I18n.t("reading.remove")||"").toString().encodeHTML()+"</a> ":' <a href="'+(Routes.collection_notes_path({note_id:t.note_id,collection_id:i.id})||"").toString().encodeHTML()+'" class="add" data-method="post" data-remote="true" rel="nofollow"> <div class="avatar"> <img alt="'+(i.image_file_name||"").toString().encodeHTML()+'" src="'+(i.image_source||"").toString().encodeHTML()+'" thumbnail="180x180"> </div> <h5>'+(i.title||"").toString().encodeHTML()+"</h5> <small>"+(i.owner_name||"").toString().encodeHTML()+(I18n.t("reading.bian")||"").toString().encodeHTML()+"</small> </a> ",e+="</li>";return e}}.call(this),function(){this.JST||(this.JST={}),this.JST["reading/templates/note/further_reading_content"]=function(t){var e='<div id="further-reading-form" class="active"> <i class="icon-plus-sign"></i> <div id="reading-info" class="reading-info"> <h6 id="further-reading-title" contenteditable="true" placeholder="'+(I18n.t("reading.further_reading.title_placeholder")||"").toString().encodeHTML()+'">'+(t.data.title||"").toString().encodeHTML()+'</h6> \u2009\u2014\u2009 <span id="further-reading-description" contenteditable="true" placeholder="'+(I18n.t("reading.further_reading.description_placeholder")||"").toString().encodeHTML()+'">'+(t.data.description||"").toString().encodeHTML()+'</span> </div> <div id="reading-footer"> <p class="article-origin"> <span><a href="'+(Routes.user_path(t.slug)||"").toString().encodeHTML()+'" target="_blank">'+(t.nickname||"").toString().encodeHTML()+'</a>\u30fb <a id="further-reading-url" href="'+(t.data.url||"").toString().encodeHTML()+'" target="_blank">'+(t.data.host||"").toString().encodeHTML()+'</a></span> </p> </div> <a id="submit-further-reading" class="btn-link left">'+(I18n.t("reading.further_reading.button.save")||"").toString().encodeHTML()+'</a> <a id="cancel-further-reading" class="btn-link">'+(I18n.t("reading.further_reading.button.cancel")||"").toString().encodeHTML()+"</a></div>";return e}}.call(this),function(){this.JST||(this.JST={}),this.JST["reading/templates/note/further_reading_item"]=function(t){var e='<li id="further_reading_'+(t.id||"").toString().encodeHTML()+'" data-can-be-dismissed="'+(t.can_be_dismissed||"").toString().encodeHTML()+'"> <a class="reading-title" href="'+(t.url||"").toString().encodeHTML()+'"> <h6>'+(t.title||"").toString().encodeHTML()+"</h6> ";return t.description&&(e+=" \u2014 "+(t.description||"").toString().encodeHTML()+" "),e+=' </a> <div class="article-origin"> <a href="'+(Routes.user_path(t.user_slug)||"").toString().encodeHTML()+'">'+(t.user_name||"").toString().encodeHTML()+'</a>\u30fb <a href="'+(t.url||"").toString().encodeHTML()+'"> ',e+=t.fr_author?" "+(t.host||"").toString().encodeHTML()+" ":" "+(t.host||"").toString().encodeHTML()+" \u2192 ",e+=" </a> ",t.fr_author&&(e+=' \u30fb <a id="delete-further-reading" data-further-reading-id="'+(t.id||"").toString().encodeHTML()+'" href="javascript:void(null)"> '+(I18n.t("reading.further_reading.button.delete")||"").toString().encodeHTML()+" </a> "),e+=" ",t.note_author?e+=" "+JST.render("note/further_reading_states",{id:t.id,state:t.state,can_be_dismissed:t.can_be_dismissed})+" ":"private"==t.state&&(e+=' <a href="javascript:void(null)" class="reading-states"><i class="icon-eye-close"></i>'+(I18n.t("reading.further_reading.states.private")||"").toString().encodeHTML()+"</a> "),e+=" </div></li>"}}.call(this),function(){this.JST||(this.JST={}),this.JST["reading/templates/note/further_reading_link"]=function(){var t='<div id="further-reading-form" class="active"> <i class="icon-plus-sign"></i> <span id="further-reading-link-text" class="reading-link-text" contenteditable="true" placeholder="'+(I18n.t("reading.further_reading.link_text_placeholder")||"").toString().encodeHTML()+'"></span> <img alt="Loader-tiny" class="hide loader-tiny" id="loader" src="/assets/loader-tiny.gif"> <br> <a id="load-further-reading" class="btn-link">'+(I18n.t("reading.further_reading.button.load")||"").toString().encodeHTML()+'</a> <a id="cancel-further-reading" class="btn-link">'+(I18n.t("reading.further_reading.button.cancel")||"").toString().encodeHTML()+"</a></div>";return t}}.call(this),function(){this.JST||(this.JST={}),this.JST["reading/templates/note/further_reading_states"]=function(t){var e='<ul class="unstyled edit further-reading-states" data-origin-state="'+(t.state||"").toString().encodeHTML()+'" data-further-reading-id="'+(t.id||"").toString().encodeHTML()+'"> ';return"private"==t.state?(e+=' <li><a href="javascript:void(null)"><i class="icon-eye-close"></i>'+(I18n.t("reading.further_reading.states.private")||"").toString().encodeHTML()+'</a></li> <li class="hide state-item" data-state="public"> <a href="javascript:void(null)"><i class="icon-group"></i>'+(I18n.t("reading.further_reading.states.public")||"").toString().encodeHTML()+"</a> </li> ",t.can_be_dismissed&&(e+=' <li class="hide state-item" data-state="dismiss"> <a href="javascript:void(null)"><i class="icon-remove"></i>'+(I18n.t("reading.further_reading.states.dismiss")||"").toString().encodeHTML()+"</a> </li> "),e+=" "):"public"==t.state?(e+=' <li><a href="javascript:void(null)"><i class="icon-group"></i>'+(I18n.t("reading.further_reading.states.public")||"").toString().encodeHTML()+'</a></li> <li class="hide state-item" data-state="private"> <a href="javascript:void(null)"><i class="icon-eye-close"></i> '+(I18n.t("reading.further_reading.states.private")||"").toString().encodeHTML()+"</a> </li> ",t.can_be_dismissed&&(e+=' <li class="hide state-item" data-state="dismiss"> <a href="javascript:void(null)"><i class="icon-remove"></i>'+(I18n.t("reading.further_reading.states.dismiss")||"").toString().encodeHTML()+"</a> </li> "),e+=" "):e+=' <li><a href="javascript:void(null)"><i class="icon-remove"></i>'+(I18n.t("reading.further_reading.states.dismiss")||"").toString().encodeHTML()+'</a></li> <li class="hide state-item" data-state="private"> <a href="javascript:void(null)"><i class="icon-eye-close"></i> '+(I18n.t("reading.further_reading.states.private")||"").toString().encodeHTML()+'</a> </li> <li class="hide state-item" data-state="public"> <a href="javascript:void(null)"><i class="icon-group"></i>'+(I18n.t("reading.further_reading.states.public")||"").toString().encodeHTML()+"</a> </li> ",e+="</ul>"}}.call(this),function(){this.JST||(this.JST={}),this.JST["reading/templates/social/share_buttons"]=function(t){var e="<h1>"+(t.title||"").toString().encodeHTML()+"</h1>";return e}}.call(this),function(){this.JST||(this.JST={}),this.JST["reading/templates/social/timeline_comments"]=function(){var t="";return t}}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};Maleskine.TimelineLatest=function(t){function n(){n.__super__.constructor.apply(this,arguments),this.infiniteScroll()}return e(n,t),n}(Maleskine.BaseModule)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};Maleskine.Timeline=function(t){function n(){n.__super__.constructor.apply(this,arguments),$(".timeline").on("ajax:success",".like-icon-button",function(t,e){return $(t.currentTarget).html("<i class='"+(e.liked?"icon-heart":"icon-heart-empty")+"'></i>"+e.liked_count)}),$("div.timeline").on("click","div.comments > div.comments-items a.reply",function(){var t,e;return e=$(this).parent().parent().parent().find("div.comment-form input"),e.focus(),t=e.val(),t.length>1&&" "!==t[t.length-1]&&(t+=" "),e.val(t+("@"+$(this).data("nickname")+" "))}),$("div.timeline").on("click","div.comments > div.comments-items a.delete",function(){var t,e;return confirm("Sure?")?(e=$(this).data("destroy-url"),t=$(this).parent(),$.ajax({url:e,type:"DELETE",async:!0,complete:function(e,n){return"success"===n?t.hide("slow",function(){return t.remove()}):void 0}})):void 0}),$("div.timeline").on("click",".comment-form > a.btn",function(){var t,e,n,i,o,r;return e=$(this).parent().parent(),n=e.find(".comments-items"),t=$(this).data("comment-note-url"),o=$(this).parent().find("input"),i=o.val(),r=$("span.warning"),$.post(t,{content:i,format:"json"},function(t){var e;return t.error?(r.find("span.warning-text").text(t.error),r.show()):(r.hide(),e=JST.render("comment/timeline_comments_item",t),n.prepend(e),o.val(""))})}),$("div.timeline").on("click","div.pagination ul > li > a",function(){var t,e;return t=$(this).parent().parent().parent().parent().attr("id"),(e=$(this).data("page"))?Maleskine.Timeline.paginate(t,e):void 0})}return e(n,t),n.prototype.events={"click .toggle-comments-display":"toggleCommentsDisplay"},n.prototype.toggleCommentsDisplay=function(t){var e,n,i,o,r;return n=$(t.target),o=n.data("comments-id"),e=$("#"+o),i=e.find("input[type=text]"),i.data("atwho")||(i.atwho({at:":",limit:10,tpl:"<li data-value='${name}:'><img src='"+Maleskine.Settings.emoji_host+"/assets/emojis/${name}.png' height='20' width='20'/> ${name} </li>",data:Maleskine.Emoji}),i.data("atwho",!0)),r=e.is(":hidden")?(Maleskine.Timeline.paginate(o,1),n.data("original-text",n.html()),I18n.t("reading.timeline.collapse_comments")):n.data("original-text"),e.toggle("fast"),n.text(r)},n.get_comments=function(t,e,n){return $.get(t,{page:e,format:"json"},n)},n.paginate=function(t,e){var n,i,o,r;return n=$("#"+t),i=n.find(".comments-items"),o=n.data("comments-url"),r=n.find("img.loading-anime"),r.show(),Maleskine.Timeline.get_comments(o,e,function(t){var e;return e="",$(t.comments).each(function(o,r){var s;return e+=JST.render("comment/timeline_comments_item",r),s=$(JST.render("comment/paginator",t)),n.find("div.pagination").size()>0?n.find("div.pagination").replaceWith(s):s.insertAfter(i)}),r.hide(),i.html(e),i.find("p > a[data-toggle=tooltip]").tooltip()})},n}(Maleskine.BaseModule)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};Maleskine.TimelineNavbar=function(e){function i(){this.setInfiniteScroll=t(this.setInfiniteScroll,this),this.clickNavItems=t(this.clickNavItems,this),i.__super__.constructor.apply(this,arguments),this.setInfiniteScroll(),this.el.pjax("a[data-pjax]","#timeline-container"),$("#timeline-container").on("pjax:beforeSend",function(t){return function(){return t.loader.show()}}(this)),$("#timeline-container").on("pjax:success",function(t){return function(){return t.setInfiniteScroll()}}(this)),$("#timeline-container").on("pjax:complete",function(t){return function(){return t.loader.hide()}}(this))}return n(i,e),i.prototype.elements={"a[data-pjax]":"navLinks",li:"navItems","#loader":"loader"},i.prototype.events={"click li":"clickNavItems"},i.prototype.clickNavItems=function(t){var e;return e=$(t.currentTarget),this.navItems.removeClass("active"),e.addClass("active"),e.find('a[href="/bookmarks"]').length>0?$("div.nav-user i.icon-bookmark").parent().addClass("active"):$("div.nav-user i.icon-bookmark").parent().removeClass("active")},i.prototype.setInfiniteScroll=function(){return $("#timeline-container .new-article").length>0?($(window).off("scroll"),this.infiniteScroll()):$(window).off("scroll")},i}(Maleskine.BaseModule)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};Maleskine.TopNote=function(e){function i(){this.likeNote=t(this.likeNote,this),i.__super__.constructor.apply(this,arguments),this.el.pjax("a[data-pjax]","#list-container"),this.writeButton.on("click",function(t){return function(){return t.setCookie("signin_redirect",Routes.writer_path())}}(this)),this.loginModal.on("hidden",function(t){return function(){return t.setCookie("signin_redirect",window.location.pathname)}}(this)),$("#list-container").on("pjax:success",function(){return function(t){var e;return $("ul.ranking-nav li").removeClass("active"),e=$(t.relatedTarget),e.parent().addClass("active"),$("#list-container").removeClass("weeks author"),$("#list-container").addClass("author"===e.data("type")?"author":"weeks"),$(window).scroll()}}(this)),this.infiniteScroll()}return n(i,e),i.prototype.elements={"#write-button":"writeButton","#login-modal":"loginModal"},i.prototype.events={"ajax:success .like-icon-button":"likeNote"},i.prototype.likeNote=function(t,e){return $(t.currentTarget).html("<i class='"+(e.liked?"icon-heart":"icon-heart-empty")+"'></i>"+e.liked_count)},i}(Maleskine.BaseModule)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,n){function i(){this.constructor=e}for(var o in n)t.call(n,o)&&(e[o]=n[o]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e};Maleskine.UserSettings=function(t){function n(){n.__super__.constructor.apply(this,arguments),this.tab.find("a[href="+window.location.hash+"]").tab("show"),"#destroy"===this.tab.find("li.active a").attr("href")?this.submitButton.hide():this.submitButton.show(),this.tab.find('a[data-toggle="tab"]').on("shown",function(t){return function(e){return"#destroy"===$(e.target).attr("href")?t.submitButton.hide():t.submitButton.show()}}(this)),this.submitButton.click(function(){return function(){return $(".tab-pane.active form").trigger("submit.rails")}}(this)),this.passwordInputs.on("keypress",function(t){return function(e){return 13===e.which?t.$("#pass form").submit():void 0}}(this)),this.resetPasswordLink.on("ajax:success",function(t){return function(e,n){return e.stopPropagation(),t.notyInfo(n.message)}}(this)),this.removeSNSLinks.on("ajax:beforeSend",function(t){return function(){return t.snsLoader.show()}}(this)),this.forms.on("ajax:beforeSend",function(t){return function(){return Ladda.create(t.submitButton[0]).start()}}(this)),this.forms.on("ajax:complete",function(t){return function(){return Ladda.create(t.submitButton[0]).stop()}}(this)),this.forms.on("ajax:success",function(t){return function(e,n){return null!=n.message&&n.message.length>0&&t.notyInfo(n.message),n.refresh&&setTimeout(function(){return window.location.reload()},1200),$("#pass.active form").length>0?$("#pass.active form").find("input[type=password]").val(""):void 0}}(this)),this.forms.on("ajax:error",function(t){return function(e,n){var i,o,r,s,a;for(o="",a=$.parseJSON(n.responseText).errors,r=0,s=a.length;s>r;r++)i=a[r],o=""+o+"<span>"+i+"</span>";return t.notyError(o),$("#pass.active form").length>0?$("#pass.active form").find("input[type=password]").val(""):void 0}}(this)),this.localeSelect.select2({minimumResultsForSearch:99}),this.nicknameInput.blur(function(t){return function(){return $.post("/users/check_nickname.json",{nickname:t.nicknameInput.val()},function(e){return t.nicknameAvailability.text(e.msg)})}}(this)),this.sendEmailCheckButton.length>0&&this.sendEmailCheckButton.click(function(t){return function(){var e;return e=t.emailInput.val(),$.ajax({url:"/users/send_confirm_email",type:"post",data:{email:e},dataType:"json",beforeSend:function(){return t.emailLoader.show()},success:function(e){var n;return t.emailNotice.fadeOut("fast"),n="<i class='icon-ok'></i>"+e.message,t.emailNotice.html(n),t.emailNotice.fadeIn("fast")},error:function(e){var n,i;return i=JSON.parse(e.responseText).message,t.emailNotice.fadeOut("fast"),n="<i class='icon-info-sign'></i>"+i,t.emailNotice.html(n),t.emailNotice.fadeIn("fast")},complete:function(){return t.emailLoader.hide()}})}}(this)),this.selfDestructionButton.length>0&&this.selfDestructionButton.click(function(){return function(t){var e;return e=confirm(I18n.t("reading.self_destruction_confirm")),e?void 0:(t.preventDefault(),t.stopPropagation())}}(this)),0===this.initialSetup.length&&(this.clearQRcodeButton.on("ajax:beforeSend",function(t){return function(){return t.qrcodeLoader.show()}}(this)),this.clearQRcodeButton.on("ajax:complete",function(t){return function(){return t.qrcodeLoader.hide()}}(this)),this.clearQRcodeButton.on("ajax:success",function(t){return function(e){return e.stopPropagation(),t.qrcodeArea.html('<i class="icon-qrcode"></i>')}}(this)),this.qrcodeUpload.fileupload({url:"/users/upload_image",dataType:"json",maxFileSize:5e6,minFileSize:1,acceptFileTypes:/(\.|\/)(jpe?g|png)$/i,singleFileUploads:!0,add:function(t){return function(e,n){var i;return t.qrcodeLoader.show(),i=n.submit(),i.complete(function(){return t.qrcodeLoader.hide()}),i.success(function(e){var n,i,o,r,s;if($.isArray(e)){for(s=[],o=0,r=e.length;r>o;o++)n=e[o],s.push(noty({text:n,layout:"topCenter",type:"error",timeout:"3000",theme:"maleskineTheme"}));return s}return i=e.qrcode_url,0===t.qrcodeImage.length?(t.qrcodeArea.html("<img src='"+i+"' />"),t.refreshElements()):t.qrcodeImage.attr("src",i)}),i.error(function(t){var e,n,i,o,r;for(n=$.parseJSON(t.responseText),r=[],i=0,o=n.length;o>i;i++)e=n[i],r.push(noty({text:e,layout:"topCenter",type:"error",timeout:"3000",theme:"maleskineTheme"}));return r})}}(this)}),this.avatarSet.on("ajax:beforeSend",function(t){return function(){return t.avatarUploadLoader.show()}}(this)),this.avatarSet.on("ajax:complete",function(t){return function(){return t.avatarUploadLoader.hide()}}(this)),this.avatarSet.on("ajax:success",function(t){return function(e,n){return t.avatarImage.attr("src",n[0])}}(this)),this.avatarUpload.fileupload({url:"/users/upload_image",dataType:"json",maxFileSize:5e6,minFileSize:1,acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i,singleFileUploads:!0,add:function(t){return function(e,n){var i;return t.avatarUploadLoader.show(),i=n.submit(),i.complete(function(){return t.avatarUploadLoader.hide()}),i.success(function(e){var n,i,o,r,s;if($.isArray(e)){for(s=[],o=0,r=e.length;r>o;o++)n=e[o],s.push(noty({text:n,layout:"topCenter",type:"error",timeout:"3000",theme:"maleskineTheme"}));return s}return i=e.avatar_url,t.avatarImage.attr("src",i)}),i.error(function(t){var e,n,i,o,r;for(n=$.parseJSON(t.responseText),r=[],i=0,o=n.length;o>i;i++)e=n[i],r.push(noty({text:e,layout:"topCenter",type:"error",timeout:"3000",theme:"maleskineTheme"}));return r})}}(this)}))}return e(n,t),n.prototype.elements={".nav-tabs":"tab",".tab-content":"tabContent",form:"forms","div.avatar img":"avatarImage","div.micro-code img":"qrcodeImage","div.micro-code":"qrcodeArea",".qrcode-loader":"qrcodeLoader","#initial_setup":"initialSetup","#user_upload_avatar":"avatarUpload","#user_qrcode":"qrcodeUpload",".clear-qrcode":"clearQRcodeButton","#upload-loader":"avatarUploadLoader","a.set-avatar":"avatarSet","#user_locale":"localeSelect","#user_nickname":"nicknameInput",".nickname-availability":"nicknameAvailability","#settings-account":"accountForm",".submit-button":"submitButton",".reset-password-link":"resetPasswordLink","#sns table a[data-method=delete]":"removeSNSLinks",".sns-loader":"snsLoader","#pass input":"passwordInputs",".social-network":"sns","a.delete.btn-danger":"selfDestructionButton",".email-confirmation":"sendEmailCheckButton","#user_email":"emailInput",".email-notice":"emailNotice",".email-loader":"emailLoader"},n}(Maleskine.BaseModule)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,n=function(t,n){function i(){this.constructor=t}for(var o in n)e.call(n,o)&&(t[o]=n[o]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};Maleskine.UserShow=function(e){function i(){this.likeNote=t(this.likeNote,this),this.startEditIntro=t(this.startEditIntro,this),this.cancelEditIntro=t(this.cancelEditIntro,this),i.__super__.constructor.apply(this,arguments),$("div.timeline").on("click","div.comments > div.comments-items a.reply",function(){var t,e;return e=$(this).parent().parent().parent().find("div.comment-form input"),e.focus(),t=e.val(),t.length>1&&" "!==t[t.length-1]&&(t+=" "),e.val(t+("@"+$(this).data("nickname")+" "))}),$("div.timeline").on("click","div.comments > div.comments-items a.delete",function(){var t,e;return confirm("Sure?")?(e=$(this).data("destroy-url"),t=$(this).parent(),$.ajax({url:e,type:"DELETE",async:!0,complete:function(e,n){return"success"===n?t.hide("slow",function(){return t.remove()}):void 0}})):void 0}),$("div.timeline").on("click",".comment-form > a.btn",function(){var t,e,n,i,o,r;return e=$(this).parent().parent(),n=e.find(".comments-items"),t=$(this).data("comment-note-url"),o=$(this).parent().find("input"),i=o.val(),r=$("span.warning"),$.post(t,{content:i,format:"json"},function(t){var e;return t.error?(r.find("span.warning-text").text(t.error),r.show()):(r.hide(),e=JST.render("comment/timeline_comments_item",t),n.prepend(e),o.val(""))})}),this.introForm.on("ajax:success",function(t){return function(e,n){var i;return i=n.user,t.intro.html(i.intro_compiled),t.name.text(i.nickname),t.errorMessage.hide(),t.cancelEditIntro()}}(this)),this.introForm.on("ajax:error",function(t){return function(e,n){return t.errorMessage.html($.parseJSON(n.responseText).errors[0]),t.errorMessage.fadeIn("fast")}}(this)),this.initFollowingState(),this.infiniteScroll(),this.recommendUser.length>0&&this.recommendUser.on("ajax:success",function(t){return function(e,n){return t.recommendUser.find("span").html(n["is_recommended?"]?"Unrecommend":"Recommend")}}(this)),this.el.pjax("a[data-pjax]","#list-container"),$("#list-container").on("pjax:success",function(){return function(t){var e;return $("ul.nav-relationships li").removeClass("active"),e=$(t.relatedTarget),e.parent().addClass("active"),$(window).scroll()}}(this)),$("#list-container").on("pjax:success",function(){return function(t){var e;return $("ul.nav-articles li").removeClass("active"),e=$(t.relatedTarget),e.parent().addClass("active"),$(window).scroll()}}(this))}return n(i,e),i.prototype.elements={".edit-intro":"editIntro",".intro-form":"introForm",".intro":"intro","h3.name":"name","#recommend-user":"recommendUser",".form-error-message":"errorMessage"},i.prototype.events={"click .cancel":"cancelEditIntro","click .edit-intro":"startEditIntro","ajax:success .like-icon-button":"likeNote","click .toggle-comments-display":"toggleCommentsDisplay"},i.prototype.toggleCommentsDisplay=function(t){var e,n,i,o,r;return n=$(t.target),o=n.data("comments-id"),e=$("#"+o),i=e.find("input[type=text]"),i.data("atwho")||(i.atwho({at:":",limit:10,tpl:"<li data-value='${name}:'><img src='"+Maleskine.Settings.emoji_host+"/assets/emojis/${name}.png' height='20' width='20'/> ${name} </li>",data:Maleskine.Emoji}),i.data("atwho",!0)),r=e.is(":hidden")?(Maleskine.Timeline.paginate(o,1),n.data("original-text",n.html()),I18n.t("reading.timeline.collapse_comments")):n.data("original-text"),e.toggle("fast"),n.text(r)},i.prototype.initFollowingState=function(){return $("body").on("mouseenter",".following",function(){return $(this).addClass("unfollow").html("<i class='icon-plus icon-ok'></i>"+I18n.t("reading.unfollow"))}),$("body").on("mouseleave",".following",function(){return $(this).removeClass("unfollow").html("<i class='icon-ok'></i>"+I18n.t("reading.following"))})},i.prototype.cancelEditIntro=function(){return this.introForm.hide(),this.name.show(),this.editIntro.show(),this.intro.show()},i.prototype.startEditIntro=function(){return this.introForm.show(),this.name.hide(),this.editIntro.hide(),this.intro.hide()},i.prototype.likeNote=function(t,e){return $(t.currentTarget).html("<i class='"+(e.liked?"icon-heart":"icon-heart-empty")+"'></i>"+e.liked_count)},i}(Maleskine.BaseModule)}.call(this),!function(t){"use strict";var e='[data-dismiss="alert"]',n=function(n){t(n).on("click",e,this.close)};n.prototype.close=function(e){function n(){i.trigger("closed").remove()}var i,o=t(this),r=o.attr("data-target");r||(r=o.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),i=t(r),e&&e.preventDefault(),i.length||(i=o.hasClass("alert")?o:o.parent()),i.trigger(e=t.Event("close")),e.isDefaultPrevented()||(i.removeClass("in"),t.support.transition&&i.hasClass("fade")?i.on(t.support.transition.end,n):n())};var i=t.fn.alert;t.fn.alert=function(e){return this.each(function(){var i=t(this),o=i.data("alert");o||i.data("alert",o=new n(this)),"string"==typeof e&&o[e].call(i)})},t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=i,this},t(document).on("click.alert.data-api",e,n.prototype.close)}(window.jQuery),!function(t){"use strict";var e=function(e,n){this.options=n,this.$element=t(e).delegate('[data-dismiss="modal"]',"click.dismiss.modal",t.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};e.prototype={constructor:e,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var e=this,n=t.Event("show");this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var n=t.support.transition&&e.$element.hasClass("fade");e.$element.parent().length||e.$element.appendTo(document.body),e.$element.show(),n&&e.$element[0].offsetWidth,e.$element.addClass("in").attr("aria-hidden",!1),e.enforceFocus(),n?e.$element.one(t.support.transition.end,function(){e.$element.focus().trigger("shown")}):e.$element.focus().trigger("shown")}))},hide:function(e){e&&e.preventDefault();e=t.Event("hide"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),t.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var e=this;t(document).on("focusin.modal",function(t){e.$element[0]===t.target||e.$element.has(t.target).length||e.$element.focus()})},escape:function(){var t=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(e){27==e.which&&t.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var e=this,n=setTimeout(function(){e.$element.off(t.support.transition.end),e.hideModal()},500);this.$element.one(t.support.transition.end,function(){clearTimeout(n),e.hideModal()})},hideModal:function(){var t=this;this.$element.hide(),this.backdrop(function(){t.removeBackdrop(),t.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(e){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=t.support.transition&&n;if(this.$backdrop=t('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?t.proxy(this.$element[0].focus,this.$element[0]):t.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;i?this.$backdrop.one(t.support.transition.end,e):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t.support.transition.end,e):e()):e&&e()}};var n=t.fn.modal;t.fn.modal=function(n){return this.each(function(){var i=t(this),o=i.data("modal"),r=t.extend({},t.fn.modal.defaults,i.data(),"object"==typeof n&&n);o||i.data("modal",o=new e(this,r)),"string"==typeof n?o[n]():r.show&&o.show()})},t.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.modal.data-api",'[data-toggle="modal"]',function(e){var n=t(this),i=n.attr("href"),o=t(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),r=o.data("modal")?"toggle":t.extend({remote:!/#/.test(i)&&i},o.data(),n.data());e.preventDefault(),o.modal(r).one("hide",function(){n.focus()})})}(window.jQuery),!function(t){"use strict";function e(){t(i).each(function(){n(t(this)).removeClass("open")})}function n(e){var n,i=e.attr("data-target");return i||(i=e.attr("href"),i=i&&/#/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),n=i&&t(i),n&&n.length||(n=e.parent()),n}var i="[data-toggle=dropdown]",o=function(e){var n=t(e).on("click.dropdown.data-api",this.toggle);t("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};o.prototype={constructor:o,toggle:function(){var i,o,r=t(this);if(!r.is(".disabled, :disabled"))return i=n(r),o=i.hasClass("open"),e(),o||i.toggleClass("open"),r.focus(),!1},keydown:function(e){var o,r,s,a,l;if(/(38|40|27)/.test(e.keyCode)&&(o=t(this),e.preventDefault(),e.stopPropagation(),!o.is(".disabled, :disabled"))){if(s=n(o),a=s.hasClass("open"),!a||a&&27==e.keyCode)return 27==e.which&&s.find(i).focus(),o.click();r=t("[role=menu] li:not(.divider):visible a",s),r.length&&(l=r.index(r.filter(":focus")),38==e.keyCode&&l>0&&l--,40==e.keyCode&&l<r.length-1&&l++,~l||(l=0),r.eq(l).focus())}}};var r=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var n=t(this),i=n.data("dropdown");i||n.data("dropdown",i=new o(this)),"string"==typeof e&&i[e].call(n)})},t.fn.dropdown.Constructor=o,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=r,this},t(document).on("click.dropdown.data-api",e).on("click.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.dropdown-menu",function(t){t.stopPropagation()}).on("click.dropdown.data-api",i,o.prototype.toggle).on("keydown.dropdown.data-api",i+", [role=menu]",o.prototype.keydown)}(window.jQuery),!function(t){"use strict";var e=function(t,e){this.init("tooltip",t,e)};e.prototype={constructor:e,init:function(e,n,i){var o,r,s,a,l;for(this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.enabled=!0,s=this.options.trigger.split(" "),l=s.length;l--;)a=s[l],"click"==a?this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this)):"manual"!=a&&(o="hover"==a?"mouseenter":"focus",r="hover"==a?"mouseleave":"blur",this.$element.on(o+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.leave,this)));this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(e){return e=t.extend({},t.fn[this.type].defaults,this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e
},enter:function(e){var n,i=t.fn[this.type].defaults,o={};return this._options&&t.each(this._options,function(t,e){i[t]!=e&&(o[t]=e)},this),n=t(e.currentTarget)[this.type](o).data(this.type),n.options.delay&&n.options.delay.show?(clearTimeout(this.timeout),n.hoverState="in",void(this.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show))):n.show()},leave:function(e){var n=t(e.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),n.options.delay&&n.options.delay.hide?(n.hoverState="out",void(this.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide))):n.hide()},show:function(){var e,n,i,o,r,s,a=t.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(a),a.isDefaultPrevented())return;switch(e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),r="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,e.detach().css({top:0,left:0,display:"block"}),this.options.container?e.appendTo(this.options.container):e.insertAfter(this.$element),n=this.getPosition(),i=e[0].offsetWidth,o=e[0].offsetHeight,r){case"bottom":s={top:n.top+n.height,left:n.left+n.width/2-i/2};break;case"top":s={top:n.top-o,left:n.left+n.width/2-i/2};break;case"left":s={top:n.top+n.height/2-o/2,left:n.left-i};break;case"right":s={top:n.top+n.height/2-o/2,left:n.left+n.width}}this.applyPlacement(s,r),this.$element.trigger("shown")}},applyPlacement:function(t,e){var n,i,o,r,s=this.tip(),a=s[0].offsetWidth,l=s[0].offsetHeight;s.offset(t).addClass(e).addClass("in"),n=s[0].offsetWidth,i=s[0].offsetHeight,"top"==e&&i!=l&&(t.top=t.top+l-i,r=!0),"bottom"==e||"top"==e?(o=0,t.left<0&&(o=-2*t.left,t.left=0,s.offset(t),n=s[0].offsetWidth,i=s[0].offsetHeight),this.replaceArrow(o-a+n,n,"left")):this.replaceArrow(i-l,i,"top"),r&&s.offset(t)},replaceArrow:function(t,e,n){this.arrow().css(n,t?50*(1-t/e)+"%":"")},setContent:function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},hide:function(){function e(){var e=setTimeout(function(){n.off(t.support.transition.end).detach()},500);n.one(t.support.transition.end,function(){clearTimeout(e),n.detach()})}var n=this.tip(),i=t.Event("hide");return this.$element.trigger(i),i.isDefaultPrevented()?void 0:(n.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?e():n.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var e=this.$element[0];return t.extend({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},this.$element.offset())},getTitle:function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},tip:function(){return this.$tip=this.$tip||t(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(e){var n=e?t(e.currentTarget)[this.type](this._options).data(this.type):this;n.tip().hasClass("in")?n.hide():n.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var n=t.fn.tooltip;t.fn.tooltip=function(n){return this.each(function(){var i=t(this),o=i.data("tooltip"),r="object"==typeof n&&n;o||i.data("tooltip",o=new e(this,r)),"string"==typeof n&&o[n]()})},t.fn.tooltip.Constructor=e,t.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(window.jQuery),!function(t){"use strict";var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.button.defaults,n)};e.prototype.setState=function(t){var e="disabled",n=this.$element,i=n.data(),o=n.is("input")?"val":"html";t+="Text",i.resetText||n.data("resetText",n[o]()),n[o](i[t]||this.options[t]),setTimeout(function(){"loadingText"==t?n.addClass(e).attr(e,e):n.removeClass(e).removeAttr(e)},0)},e.prototype.toggle=function(){var t=this.$element.closest('[data-toggle="buttons-radio"]');t&&t.find(".active").removeClass("active"),this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=function(n){return this.each(function(){var i=t(this),o=i.data("button"),r="object"==typeof n&&n;o||i.data("button",o=new e(this,r)),"toggle"==n?o.toggle():n&&o.setState(n)})},t.fn.button.defaults={loadingText:"loading..."},t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.button.data-api","[data-toggle^=button]",function(e){var n=t(e.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})}(window.jQuery),!function(t){"use strict";var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.collapse.defaults,n),this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};e.prototype={constructor:e,dimension:function(){var t=this.$element.hasClass("width");return t?"width":"height"},show:function(){var e,n,i,o;if(!this.transitioning&&!this.$element.hasClass("in")){if(e=this.dimension(),n=t.camelCase(["scroll",e].join("-")),i=this.$parent&&this.$parent.find("> .accordion-group > .in"),i&&i.length){if(o=i.data("collapse"),o&&o.transitioning)return;i.collapse("hide"),o||i.data("collapse",null)}this.$element[e](0),this.transition("addClass",t.Event("show"),"shown"),t.support.transition&&this.$element[e](this.$element[0][n])}},hide:function(){var e;!this.transitioning&&this.$element.hasClass("in")&&(e=this.dimension(),this.reset(this.$element[e]()),this.transition("removeClass",t.Event("hide"),"hidden"),this.$element[e](0))},reset:function(t){var e=this.dimension();return this.$element.removeClass("collapse")[e](t||"auto")[0].offsetWidth,this.$element[null!==t?"addClass":"removeClass"]("collapse"),this},transition:function(e,n,i){var o=this,r=function(){"show"==n.type&&o.reset(),o.transitioning=0,o.$element.trigger(i)};this.$element.trigger(n),n.isDefaultPrevented()||(this.transitioning=1,this.$element[e]("in"),t.support.transition&&this.$element.hasClass("collapse")?this.$element.one(t.support.transition.end,r):r())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var n=t.fn.collapse;t.fn.collapse=function(n){return this.each(function(){var i=t(this),o=i.data("collapse"),r=t.extend({},t.fn.collapse.defaults,i.data(),"object"==typeof n&&n);o||i.data("collapse",o=new e(this,r)),"string"==typeof n&&o[n]()})},t.fn.collapse.defaults={toggle:!0},t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=n,this},t(document).on("click.collapse.data-api","[data-toggle=collapse]",function(e){var n,i=t(this),o=i.attr("data-target")||e.preventDefault()||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),r=t(o).data("collapse")?"toggle":i.data();i[t(o).hasClass("in")?"addClass":"removeClass"]("collapsed"),t(o).collapse(r)})}(window.jQuery),!function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype,{constructor:e,setContent:function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content")[this.options.html?"html":"text"](n),t.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var t,e=this.$element,n=this.options;return t=("function"==typeof n.content?n.content.call(e[0]):n.content)||e.attr("data-content")},tip:function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var n=t.fn.popover;t.fn.popover=function(n){return this.each(function(){var i=t(this),o=i.data("popover"),r="object"==typeof n&&n;o||i.data("popover",o=new e(this,r)),"string"==typeof n&&o[n]()})},t.fn.popover.Constructor=e,t.fn.popover.defaults=t.extend({},t.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(window.jQuery),!function(t){"use strict";var e=function(e){this.element=t(e)};e.prototype={constructor:e,show:function(){var e,n,i,o=this.element,r=o.closest("ul:not(.dropdown-menu)"),s=o.attr("data-target");s||(s=o.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,"")),o.parent("li").hasClass("active")||(e=r.find(".active:last a")[0],i=t.Event("show",{relatedTarget:e}),o.trigger(i),i.isDefaultPrevented()||(n=t(s),this.activate(o.parent("li"),r),this.activate(n,n.parent(),function(){o.trigger({type:"shown",relatedTarget:e})})))},activate:function(e,n,i){function o(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),s?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),i&&i()}var r=n.find("> .active"),s=i&&t.support.transition&&r.hasClass("fade");s?r.one(t.support.transition.end,o):o(),r.removeClass("in")}};var n=t.fn.tab;t.fn.tab=function(n){return this.each(function(){var i=t(this),o=i.data("tab");o||i.data("tab",o=new e(this)),"string"==typeof n&&o[n]()})},t.fn.tab.Constructor=e,t.fn.tab.noConflict=function(){return t.fn.tab=n,this},t(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),t(this).tab("show")})}(window.jQuery),function(){!function(){var t;return t=$.fn.popover.Constructor.prototype.setContent,$.fn.popover.Constructor.prototype.setContent=function(){return t.call(this),this.options.onShown?this.options.onShown(this):void 0}}(jQuery)}.call(this),!function(t){function e(){return new Date(Date.UTC.apply(Date,arguments))}var n=function(e,n){var r=this;this.element=t(e),this.language=n.language||this.element.data("date-language")||"en",this.language=this.language in i?this.language:"en",this.isRTL=i[this.language].rtl||!1,this.formatType=n.formatType||this.element.data("format-type")||"standard",this.format=o.parseFormat(n.format||this.element.data("date-format")||i[this.language].format||o.getDefaultFormat(this.formatType,"input"),this.formatType),this.isInline=!1,this.isVisible=!1,this.isInput=this.element.is("input"),this.bootcssVer=this.isInput?this.element.is(".form-control")?3:2:this.bootcssVer=this.element.is(".input-group")?3:2,this.component=this.element.is(".date")?3==this.bootcssVer?this.element.find(".input-group-addon .glyphicon-th, .input-group-addon .glyphicon-time, .input-group-addon .glyphicon-calendar").parent():this.element.find(".add-on .icon-th, .add-on .icon-time, .add-on .icon-calendar").parent():!1,this.componentReset=this.element.is(".date")?3==this.bootcssVer?this.element.find(".input-group-addon .glyphicon-remove").parent():this.element.find(".add-on .icon-remove").parent():!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.linkField=n.linkField||this.element.data("link-field")||!1,this.linkFormat=o.parseFormat(n.linkFormat||this.element.data("link-format")||o.getDefaultFormat(this.formatType,"link"),this.formatType),this.minuteStep=n.minuteStep||this.element.data("minute-step")||5,this.pickerPosition=n.pickerPosition||this.element.data("picker-position")||"bottom-right",this.showMeridian=n.showMeridian||this.element.data("show-meridian")||!1,this.initialDate=n.initialDate||new Date,this._attachEvents(),this.formatViewType="datetime","formatViewType"in n?this.formatViewType=n.formatViewType:"formatViewType"in this.element.data()&&(this.formatViewType=this.element.data("formatViewType")),this.minView=0,"minView"in n?this.minView=n.minView:"minView"in this.element.data()&&(this.minView=this.element.data("min-view")),this.minView=o.convertViewMode(this.minView),this.maxView=o.modes.length-1,"maxView"in n?this.maxView=n.maxView:"maxView"in this.element.data()&&(this.maxView=this.element.data("max-view")),this.maxView=o.convertViewMode(this.maxView),this.wheelViewModeNavigation=!1,"wheelViewModeNavigation"in n?this.wheelViewModeNavigation=n.wheelViewModeNavigation:"wheelViewModeNavigation"in this.element.data()&&(this.wheelViewModeNavigation=this.element.data("view-mode-wheel-navigation")),this.wheelViewModeNavigationInverseDirection=!1,"wheelViewModeNavigationInverseDirection"in n?this.wheelViewModeNavigationInverseDirection=n.wheelViewModeNavigationInverseDirection:"wheelViewModeNavigationInverseDirection"in this.element.data()&&(this.wheelViewModeNavigationInverseDirection=this.element.data("view-mode-wheel-navigation-inverse-dir")),this.wheelViewModeNavigationDelay=100,"wheelViewModeNavigationDelay"in n?this.wheelViewModeNavigationDelay=n.wheelViewModeNavigationDelay:"wheelViewModeNavigationDelay"in this.element.data()&&(this.wheelViewModeNavigationDelay=this.element.data("view-mode-wheel-navigation-delay")),this.startViewMode=2,"startView"in n?this.startViewMode=n.startView:"startView"in this.element.data()&&(this.startViewMode=this.element.data("start-view")),this.startViewMode=o.convertViewMode(this.startViewMode),this.viewMode=this.startViewMode,this.viewSelect=this.minView,"viewSelect"in n?this.viewSelect=n.viewSelect:"viewSelect"in this.element.data()&&(this.viewSelect=this.element.data("view-select")),this.viewSelect=o.convertViewMode(this.viewSelect),this.forceParse=!0,"forceParse"in n?this.forceParse=n.forceParse:"dateForceParse"in this.element.data()&&(this.forceParse=this.element.data("date-force-parse")),this.picker=t(3==this.bootcssVer?o.templateV3:o.template).appendTo(this.isInline?this.element:"body").on({click:t.proxy(this.click,this),mousedown:t.proxy(this.mousedown,this)}),this.wheelViewModeNavigation&&(t.fn.mousewheel?this.picker.on({mousewheel:t.proxy(this.mousewheel,this)}):console.log("Mouse Wheel event is not supported. Please include the jQuery Mouse Wheel plugin before enabling this option")),this.picker.addClass(this.isInline?"datetimepicker-inline":"datetimepicker-dropdown-"+this.pickerPosition+" dropdown-menu"),this.isRTL&&(this.picker.addClass("datetimepicker-rtl"),3==this.bootcssVer?this.picker.find(".prev span, .next span").toggleClass("glyphicon-arrow-left glyphicon-arrow-right"):this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")),t(document).on("mousedown",function(e){0===t(e.target).closest(".datetimepicker").length&&r.hide()}),this.autoclose=!1,"autoclose"in n?this.autoclose=n.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose")),this.keyboardNavigation=!0,"keyboardNavigation"in n?this.keyboardNavigation=n.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation")),this.todayBtn=n.todayBtn||this.element.data("date-today-btn")||!1,this.todayHighlight=n.todayHighlight||this.element.data("date-today-highlight")||!1,this.weekStart=(n.weekStart||this.element.data("date-weekstart")||i[this.language].weekStart||0)%7,this.weekEnd=(this.weekStart+6)%7,this.startDate=-1/0,this.endDate=1/0,this.daysOfWeekDisabled=[],this.setStartDate(n.startDate||this.element.data("date-startdate")),this.setEndDate(n.endDate||this.element.data("date-enddate")),this.setDaysOfWeekDisabled(n.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled")),this.fillDow(),this.fillMonths(),this.update(),this.showMode(),this.isInline&&this.show()};n.prototype={constructor:n,_events:[],_attachEvents:function(){this._detachEvents(),this.isInput?this._events=[[this.element,{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}]]:this.component&&this.hasInput?(this._events=[[this.element.find("input"),{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}],[this.component,{click:t.proxy(this.show,this)}]],this.componentReset&&this._events.push([this.componentReset,{click:t.proxy(this.reset,this)}])):this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:t.proxy(this.show,this)}]];for(var e,n,i=0;i<this._events.length;i++)e=this._events[i][0],n=this._events[i][1],e.on(n)},_detachEvents:function(){for(var t,e,n=0;n<this._events.length;n++)t=this._events[n][0],e=this._events[n][1],t.off(e);this._events=[]},show:function(e){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.forceParse&&this.update(),this.place(),t(window).on("resize",t.proxy(this.place,this)),e&&(e.stopPropagation(),e.preventDefault()),this.isVisible=!0,this.element.trigger({type:"show",date:this.date})},hide:function(){this.isVisible&&(this.isInline||(this.picker.hide(),t(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||t(document).off("mousedown",this.hide),this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this.isVisible=!1,this.element.trigger({type:"hide",date:this.date})))},remove:function(){this._detachEvents(),this.picker.remove(),delete this.picker,delete this.element.data().datetimepicker},getDate:function(){var t=this.getUTCDate();return new Date(t.getTime()+6e4*t.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(t){this.setUTCDate(new Date(t.getTime()-6e4*t.getTimezoneOffset()))},setUTCDate:function(t){t>=this.startDate&&t<=this.endDate?(this.date=t,this.setValue(),this.viewDate=this.date,this.fill()):this.element.trigger({type:"outOfRange",date:t,startDate:this.startDate,endDate:this.endDate})},setFormat:function(t){this.format=o.parseFormat(t,this.formatType);var e;this.isInput?e=this.element:this.component&&(e=this.element.find("input")),e&&e.val()&&this.setValue()},setValue:function(){var e=this.getFormattedDate();this.isInput?this.element.val(e):(this.component&&this.element.find("input").val(e),this.element.data("date",e)),this.linkField&&t("#"+this.linkField).val(this.getFormattedDate(this.linkFormat))},getFormattedDate:function(t){return void 0==t&&(t=this.format),o.formatDate(this.date,t,this.language,this.formatType)},setStartDate:function(t){this.startDate=t||-1/0,this.startDate!==-1/0&&(this.startDate=o.parseDate(this.startDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()},setEndDate:function(t){this.endDate=t||1/0,1/0!==this.endDate&&(this.endDate=o.parseDate(this.endDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(e){this.daysOfWeekDisabled=e||[],t.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)),this.daysOfWeekDisabled=t.map(this.daysOfWeekDisabled,function(t){return parseInt(t,10)}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var e=0;t("div").each(function(){var n=parseInt(t(this).css("zIndex"),10);n>e&&(e=n)});var n,i,o,r=e+10;this.component?(n=this.component.offset(),o=n.left,("bottom-left"==this.pickerPosition||"top-left"==this.pickerPosition)&&(o+=this.component.outerWidth()-this.picker.outerWidth())):(n=this.element.offset(),o=n.left),i="top-left"==this.pickerPosition||"top-right"==this.pickerPosition?n.top-this.picker.outerHeight():n.top+this.height,this.picker.css({top:i,left:o,zIndex:r})}},update:function(){var t,e=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(t=arguments[0],e=!0):t=this.element.data("date")||(this.isInput?this.element.val():this.element.find("input").val())||this.initialDate,t||(t=new Date,e=!1),this.date=o.parseDate(t,this.format,this.language,this.formatType),e&&this.setValue(),this.viewDate=new Date(this.date<this.startDate?this.startDate:this.date>this.endDate?this.endDate:this.date),this.fill()},fillDow:function(){for(var t=this.weekStart,e="<tr>";t<this.weekStart+7;)e+='<th class="dow">'+i[this.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datetimepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;12>e;)t+='<span class="month">'+i[this.language].monthsShort[e++]+"</span>";this.picker.find(".datetimepicker-months td").html(t)},fill:function(){if(null!=this.date&&null!=this.viewDate){var n=new Date(this.viewDate),r=n.getUTCFullYear(),s=n.getUTCMonth(),a=n.getUTCDate(),l=n.getUTCHours(),c=n.getUTCMinutes(),u=this.startDate!==-1/0?this.startDate.getUTCFullYear():-1/0,h=this.startDate!==-1/0?this.startDate.getUTCMonth():-1/0,d=1/0!==this.endDate?this.endDate.getUTCFullYear():1/0,p=1/0!==this.endDate?this.endDate.getUTCMonth():1/0,f=new e(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate()).valueOf(),m=new Date;if(this.picker.find(".datetimepicker-days thead th:eq(1)").text(i[this.language].months[s]+" "+r),"time"==this.formatViewType){var g=l%12?l%12:12,v=(10>g?"0":"")+g,y=(10>c?"0":"")+c,b=i[this.language].meridiem[12>l?0:1];this.picker.find(".datetimepicker-hours thead th:eq(1)").text(v+":"+y+" "+b.toUpperCase()),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(v+":"+y+" "+b.toUpperCase())}else this.picker.find(".datetimepicker-hours thead th:eq(1)").text(a+" "+i[this.language].months[s]+" "+r),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(a+" "+i[this.language].months[s]+" "+r);this.picker.find("tfoot th.today").text(i[this.language].today).toggle(this.todayBtn!==!1),this.updateNavArrows(),this.fillMonths();var _=e(r,s-1,28,0,0,0,0),w=o.getDaysInMonth(_.getUTCFullYear(),_.getUTCMonth());_.setUTCDate(w),_.setUTCDate(w-(_.getUTCDay()-this.weekStart+7)%7);var k=new Date(_);k.setUTCDate(k.getUTCDate()+42),k=k.valueOf();for(var C,x=[];_.valueOf()<k;)_.getUTCDay()==this.weekStart&&x.push("<tr>"),C="",_.getUTCFullYear()<r||_.getUTCFullYear()==r&&_.getUTCMonth()<s?C+=" old":(_.getUTCFullYear()>r||_.getUTCFullYear()==r&&_.getUTCMonth()>s)&&(C+=" new"),this.todayHighlight&&_.getUTCFullYear()==m.getFullYear()&&_.getUTCMonth()==m.getMonth()&&_.getUTCDate()==m.getDate()&&(C+=" today"),_.valueOf()==f&&(C+=" active"),(_.valueOf()+864e5<=this.startDate||_.valueOf()>this.endDate||-1!==t.inArray(_.getUTCDay(),this.daysOfWeekDisabled))&&(C+=" disabled"),x.push('<td class="day'+C+'">'+_.getUTCDate()+"</td>"),_.getUTCDay()==this.weekEnd&&x.push("</tr>"),_.setUTCDate(_.getUTCDate()+1);this.picker.find(".datetimepicker-days tbody").empty().append(x.join("")),x=[];for(var S="",T="",$="",E=0;24>E;E++){var I=e(r,s,a,E);C="",I.valueOf()+36e5<=this.startDate||I.valueOf()>this.endDate?C+=" disabled":l==E&&(C+=" active"),this.showMeridian&&2==i[this.language].meridiem.length?(T=12>E?i[this.language].meridiem[0]:i[this.language].meridiem[1],T!=$&&(""!=$&&x.push("</fieldset>"),x.push('<fieldset class="hour"><legend>'+T.toUpperCase()+"</legend>")),$=T,S=E%12?E%12:12,x.push('<span class="hour'+C+" hour_"+(12>E?"am":"pm")+'">'+S+"</span>"),23==E&&x.push("</fieldset>")):(S=E+":00",x.push('<span class="hour'+C+'">'+S+"</span>"))}this.picker.find(".datetimepicker-hours td").html(x.join("")),x=[],S="",T="",$="";for(var E=0;60>E;E+=this.minuteStep){var I=e(r,s,a,l,E,0);C="",I.valueOf()<this.startDate||I.valueOf()>this.endDate?C+=" disabled":Math.floor(c/this.minuteStep)==Math.floor(E/this.minuteStep)&&(C+=" active"),this.showMeridian&&2==i[this.language].meridiem.length?(T=12>l?i[this.language].meridiem[0]:i[this.language].meridiem[1],T!=$&&(""!=$&&x.push("</fieldset>"),x.push('<fieldset class="minute"><legend>'+T.toUpperCase()+"</legend>")),$=T,S=l%12?l%12:12,x.push('<span class="minute'+C+'">'+S+":"+(10>E?"0"+E:E)+"</span>"),59==E&&x.push("</fieldset>")):(S=E+":00",x.push('<span class="minute'+C+'">'+l+":"+(10>E?"0"+E:E)+"</span>"))}this.picker.find(".datetimepicker-minutes td").html(x.join(""));var A=this.date.getUTCFullYear(),D=this.picker.find(".datetimepicker-months").find("th:eq(1)").text(r).end().find("span").removeClass("active");A==r&&D.eq(this.date.getUTCMonth()).addClass("active"),(u>r||r>d)&&D.addClass("disabled"),r==u&&D.slice(0,h).addClass("disabled"),r==d&&D.slice(p+1).addClass("disabled"),x="",r=10*parseInt(r/10,10);var F=this.picker.find(".datetimepicker-years").find("th:eq(1)").text(r+"-"+(r+9)).end().find("td");r-=1;for(var E=-1;11>E;E++)x+='<span class="year'+(-1==E||10==E?" old":"")+(A==r?" active":"")+(u>r||r>d?" disabled":"")+'">'+r+"</span>",r+=1;F.html(x),this.place()}},updateNavArrows:function(){var t=new Date(this.viewDate),e=t.getUTCFullYear(),n=t.getUTCMonth(),i=t.getUTCDate(),o=t.getUTCHours();switch(this.viewMode){case 0:this.picker.find(".prev").css(this.startDate!==-1/0&&e<=this.startDate.getUTCFullYear()&&n<=this.startDate.getUTCMonth()&&i<=this.startDate.getUTCDate()&&o<=this.startDate.getUTCHours()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(1/0!==this.endDate&&e>=this.endDate.getUTCFullYear()&&n>=this.endDate.getUTCMonth()&&i>=this.endDate.getUTCDate()&&o>=this.endDate.getUTCHours()?{visibility:"hidden"}:{visibility:"visible"});break;case 1:this.picker.find(".prev").css(this.startDate!==-1/0&&e<=this.startDate.getUTCFullYear()&&n<=this.startDate.getUTCMonth()&&i<=this.startDate.getUTCDate()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(1/0!==this.endDate&&e>=this.endDate.getUTCFullYear()&&n>=this.endDate.getUTCMonth()&&i>=this.endDate.getUTCDate()?{visibility:"hidden"}:{visibility:"visible"});break;case 2:this.picker.find(".prev").css(this.startDate!==-1/0&&e<=this.startDate.getUTCFullYear()&&n<=this.startDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(1/0!==this.endDate&&e>=this.endDate.getUTCFullYear()&&n>=this.endDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"});break;case 3:case 4:this.picker.find(".prev").css(this.startDate!==-1/0&&e<=this.startDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(1/0!==this.endDate&&e>=this.endDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"})}},mousewheel:function(e){if(e.preventDefault(),e.stopPropagation(),!this.wheelPause){this.wheelPause=!0;var n=e.originalEvent,i=n.wheelDelta,o=i>0?1:0===i?0:-1;this.wheelViewModeNavigationInverseDirection&&(o=-o),this.showMode(o),setTimeout(t.proxy(function(){this.wheelPause=!1},this),this.wheelViewModeNavigationDelay)}},click:function(n){n.stopPropagation(),n.preventDefault();var i=t(n.target).closest("span, td, th, legend");if(1==i.length){if(i.is(".disabled"))return void this.element.trigger({type:"outOfRange",date:this.viewDate,startDate:this.startDate,endDate:this.endDate});switch(i[0].nodeName.toLowerCase()){case"th":switch(i[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var r=o.modes[this.viewMode].navStep*("prev"==i[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,r);break;case 1:this.viewDate=this.moveDate(this.viewDate,r);break;case 2:this.viewDate=this.moveMonth(this.viewDate,r);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,r)}this.fill();break;case"today":var s=new Date;s=e(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),0),s<this.startDate?s=this.startDate:s>this.endDate&&(s=this.endDate),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(s),this.fill(),this.autoclose&&this.hide()}break;case"span":if(!i.is(".disabled")){var a=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth(),c=this.viewDate.getUTCDate(),u=this.viewDate.getUTCHours(),h=this.viewDate.getUTCMinutes(),d=this.viewDate.getUTCSeconds();if(i.is(".month")?(this.viewDate.setUTCDate(1),l=i.parent().find("span").index(i),c=this.viewDate.getUTCDate(),this.viewDate.setUTCMonth(l),this.element.trigger({type:"changeMonth",date:this.viewDate}),this.viewSelect>=3&&this._setDate(e(a,l,c,u,h,d,0))):i.is(".year")?(this.viewDate.setUTCDate(1),a=parseInt(i.text(),10)||0,this.viewDate.setUTCFullYear(a),this.element.trigger({type:"changeYear",date:this.viewDate}),this.viewSelect>=4&&this._setDate(e(a,l,c,u,h,d,0))):i.is(".hour")?(u=parseInt(i.text(),10)||0,(i.hasClass("hour_am")||i.hasClass("hour_pm"))&&(12==u&&i.hasClass("hour_am")?u=0:12!=u&&i.hasClass("hour_pm")&&(u+=12)),this.viewDate.setUTCHours(u),this.element.trigger({type:"changeHour",date:this.viewDate}),this.viewSelect>=1&&this._setDate(e(a,l,c,u,h,d,0))):i.is(".minute")&&(h=parseInt(i.text().substr(i.text().indexOf(":")+1),10)||0,this.viewDate.setUTCMinutes(h),this.element.trigger({type:"changeMinute",date:this.viewDate}),this.viewSelect>=0&&this._setDate(e(a,l,c,u,h,d,0))),0!=this.viewMode){var p=this.viewMode;this.showMode(-1),this.fill(),p==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide()}break;case"td":if(i.is(".day")&&!i.is(".disabled")){var c=parseInt(i.text(),10)||1,a=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth(),u=this.viewDate.getUTCHours(),h=this.viewDate.getUTCMinutes(),d=this.viewDate.getUTCSeconds();i.is(".old")?0===l?(l=11,a-=1):l-=1:i.is(".new")&&(11==l?(l=0,a+=1):l+=1),this.viewDate.setUTCFullYear(a),this.viewDate.setUTCMonth(l),this.viewDate.setUTCDate(c),this.element.trigger({type:"changeDay",date:this.viewDate}),this.viewSelect>=2&&this._setDate(e(a,l,c,u,h,d,0))}var p=this.viewMode;this.showMode(-1),this.fill(),p==this.viewMode&&this.autoclose&&this.hide()}}},_setDate:function(t,e){e&&"date"!=e||(this.date=t),e&&"view"!=e||(this.viewDate=t),this.fill(),this.setValue();var n;this.isInput?n=this.element:this.component&&(n=this.element.find("input")),n&&(n.change(),this.autoclose&&(!e||"date"==e)),this.element.trigger({type:"changeDate",date:this.date})},moveMinute:function(t,e){if(!e)return t;var n=new Date(t.valueOf());return n.setUTCMinutes(n.getUTCMinutes()+e*this.minuteStep),n},moveHour:function(t,e){if(!e)return t;var n=new Date(t.valueOf());return n.setUTCHours(n.getUTCHours()+e),n},moveDate:function(t,e){if(!e)return t;var n=new Date(t.valueOf());return n.setUTCDate(n.getUTCDate()+e),n},moveMonth:function(t,e){if(!e)return t;var n,i,o=new Date(t.valueOf()),r=o.getUTCDate(),s=o.getUTCMonth(),a=Math.abs(e);if(e=e>0?1:-1,1==a)i=-1==e?function(){return o.getUTCMonth()==s}:function(){return o.getUTCMonth()!=n},n=s+e,o.setUTCMonth(n),(0>n||n>11)&&(n=(n+12)%12);else{for(var l=0;a>l;l++)o=this.moveMonth(o,e);n=o.getUTCMonth(),o.setUTCDate(r),i=function(){return n!=o.getUTCMonth()}}for(;i();)o.setUTCDate(--r),o.setUTCMonth(n);return o},moveYear:function(t,e){return this.moveMonth(t,12*e)},dateWithinRange:function(t){return t>=this.startDate&&t<=this.endDate},keydown:function(t){if(this.picker.is(":not(:visible)"))return void(27==t.keyCode&&this.show());var e,n,i,o=!1;switch(t.keyCode){case 27:this.hide(),t.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;e=37==t.keyCode?-1:1,viewMode=this.viewMode,t.ctrlKey?viewMode+=2:t.shiftKey&&(viewMode+=1),4==viewMode?(n=this.moveYear(this.date,e),i=this.moveYear(this.viewDate,e)):3==viewMode?(n=this.moveMonth(this.date,e),i=this.moveMonth(this.viewDate,e)):2==viewMode?(n=this.moveDate(this.date,e),i=this.moveDate(this.viewDate,e)):1==viewMode?(n=this.moveHour(this.date,e),i=this.moveHour(this.viewDate,e)):0==viewMode&&(n=this.moveMinute(this.date,e),i=this.moveMinute(this.viewDate,e)),this.dateWithinRange(n)&&(this.date=n,this.viewDate=i,this.setValue(),this.update(),t.preventDefault(),o=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;e=38==t.keyCode?-1:1,viewMode=this.viewMode,t.ctrlKey?viewMode+=2:t.shiftKey&&(viewMode+=1),4==viewMode?(n=this.moveYear(this.date,e),i=this.moveYear(this.viewDate,e)):3==viewMode?(n=this.moveMonth(this.date,e),i=this.moveMonth(this.viewDate,e)):2==viewMode?(n=this.moveDate(this.date,7*e),i=this.moveDate(this.viewDate,7*e)):1==viewMode?this.showMeridian?(n=this.moveHour(this.date,6*e),i=this.moveHour(this.viewDate,6*e)):(n=this.moveHour(this.date,4*e),i=this.moveHour(this.viewDate,4*e)):0==viewMode&&(n=this.moveMinute(this.date,4*e),i=this.moveMinute(this.viewDate,4*e)),this.dateWithinRange(n)&&(this.date=n,this.viewDate=i,this.setValue(),this.update(),t.preventDefault(),o=!0);
break;case 13:if(0!=this.viewMode){var r=this.viewMode;this.showMode(-1),this.fill(),r==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide();t.preventDefault();break;case 9:this.hide()}if(o){var s;this.isInput?s=this.element:this.component&&(s=this.element.find("input")),s&&s.change(),this.element.trigger({type:"changeDate",date:this.date})}},showMode:function(t){if(t){var e=Math.max(0,Math.min(o.modes.length-1,this.viewMode+t));e>=this.minView&&e<=this.maxView&&(this.element.trigger({type:"changeMode",date:this.viewDate,oldViewMode:this.viewMode,newViewMode:e}),this.viewMode=e)}this.picker.find(">div").hide().filter(".datetimepicker-"+o.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()},reset:function(){this._setDate(null,"date")}},t.fn.datetimepicker=function(e){var i=Array.apply(null,arguments);return i.shift(),this.each(function(){var o=t(this),r=o.data("datetimepicker"),s="object"==typeof e&&e;r||o.data("datetimepicker",r=new n(this,t.extend({},t.fn.datetimepicker.defaults,s))),"string"==typeof e&&"function"==typeof r[e]&&r[e].apply(r,i)})},t.fn.datetimepicker.defaults={},t.fn.datetimepicker.Constructor=n;var i=t.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["am","pm"],suffix:["st","nd","rd","th"],today:"Today"}},o={modes:[{clsName:"minutes",navFnc:"Hours",navStep:1},{clsName:"hours",navFnc:"Date",navStep:1},{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return t%4===0&&t%100!==0||t%400===0},getDaysInMonth:function(t,e){return[31,o.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},getDefaultFormat:function(t,e){if("standard"==t)return"input"==e?"yyyy-mm-dd hh:ii":"yyyy-mm-dd hh:ii:ss";if("php"==t)return"input"==e?"Y-m-d H:i":"Y-m-d H:i:s";throw new Error("Invalid format type.")},validParts:function(t){if("standard"==t)return/hh?|HH?|p|P|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g;if("php"==t)return/[dDjlNwzFmMnStyYaABgGhHis]/g;throw new Error("Invalid format type.")},nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\rTZ]+/g,parseFormat:function(t,e){var n=t.replace(this.validParts(e),"\x00").split("\x00"),i=t.match(this.validParts(e));if(!n||!n.length||!i||0==i.length)throw new Error("Invalid date format.");return{separators:n,parts:i}},parseDate:function(o,r,s,a){if(o instanceof Date){var l=new Date(o.valueOf()-6e4*o.getTimezoneOffset());return l.setMilliseconds(0),l}if(/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(o)&&(r=this.parseFormat("yyyy-mm-dd",a)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(o)&&(r=this.parseFormat("yyyy-mm-dd hh:ii",a)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(o)&&(r=this.parseFormat("yyyy-mm-dd hh:ii:ss",a)),/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(o)){var c,u,h=/([-+]\d+)([dmwy])/,d=o.match(/([-+]\d+)([dmwy])/g);o=new Date;for(var p=0;p<d.length;p++)switch(c=h.exec(d[p]),u=parseInt(c[1]),c[2]){case"d":o.setUTCDate(o.getUTCDate()+u);break;case"m":o=n.prototype.moveMonth.call(n.prototype,o,u);break;case"w":o.setUTCDate(o.getUTCDate()+7*u);break;case"y":o=n.prototype.moveYear.call(n.prototype,o,u)}return e(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate(),o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds(),0)}var f,m,c,d=o&&o.match(this.nonpunctuation)||[],o=new Date(0,0,0,0,0,0,0),g={},v=["hh","h","ii","i","ss","s","yyyy","yy","M","MM","m","mm","D","DD","d","dd","H","HH","p","P"],y={hh:function(t,e){return t.setUTCHours(e)},h:function(t,e){return t.setUTCHours(e)},HH:function(t,e){return t.setUTCHours(12==e?0:e)},H:function(t,e){return t.setUTCHours(12==e?0:e)},ii:function(t,e){return t.setUTCMinutes(e)},i:function(t,e){return t.setUTCMinutes(e)},ss:function(t,e){return t.setUTCSeconds(e)},s:function(t,e){return t.setUTCSeconds(e)},yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){for(e-=1;0>e;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!=e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)},p:function(t,e){return t.setUTCHours(1==e?t.getUTCHours()+12:t.getUTCHours())}};if(y.M=y.MM=y.mm=y.m,y.dd=y.d,y.P=y.p,o=e(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds()),d.length==r.parts.length){for(var p=0,b=r.parts.length;b>p;p++){if(f=parseInt(d[p],10),c=r.parts[p],isNaN(f))switch(c){case"MM":m=t(i[s].months).filter(function(){var t=this.slice(0,d[p].length),e=d[p].slice(0,t.length);return t==e}),f=t.inArray(m[0],i[s].months)+1;break;case"M":m=t(i[s].monthsShort).filter(function(){var t=this.slice(0,d[p].length),e=d[p].slice(0,t.length);return t==e}),f=t.inArray(m[0],i[s].monthsShort)+1;break;case"p":case"P":f=t.inArray(d[p].toLowerCase(),i[s].meridiem)}g[c]=f}for(var _,p=0;p<v.length;p++)_=v[p],_ in g&&!isNaN(g[_])&&y[_](o,g[_])}return o},formatDate:function(e,n,r,s){if(null==e)return"";var a;if("standard"==s)a={yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear(),m:e.getUTCMonth()+1,M:i[r].monthsShort[e.getUTCMonth()],MM:i[r].months[e.getUTCMonth()],d:e.getUTCDate(),D:i[r].daysShort[e.getUTCDay()],DD:i[r].days[e.getUTCDay()],p:2==i[r].meridiem.length?i[r].meridiem[e.getUTCHours()<12?0:1]:"",h:e.getUTCHours(),i:e.getUTCMinutes(),s:e.getUTCSeconds()},a.H=2==i[r].meridiem.length?a.h%12==0?12:a.h%12:a.h,a.HH=(a.H<10?"0":"")+a.H,a.P=a.p.toUpperCase(),a.hh=(a.h<10?"0":"")+a.h,a.ii=(a.i<10?"0":"")+a.i,a.ss=(a.s<10?"0":"")+a.s,a.dd=(a.d<10?"0":"")+a.d,a.mm=(a.m<10?"0":"")+a.m;else{if("php"!=s)throw new Error("Invalid format type.");a={y:e.getUTCFullYear().toString().substring(2),Y:e.getUTCFullYear(),F:i[r].months[e.getUTCMonth()],M:i[r].monthsShort[e.getUTCMonth()],n:e.getUTCMonth()+1,t:o.getDaysInMonth(e.getUTCFullYear(),e.getUTCMonth()),j:e.getUTCDate(),l:i[r].days[e.getUTCDay()],D:i[r].daysShort[e.getUTCDay()],w:e.getUTCDay(),N:0==e.getUTCDay()?7:e.getUTCDay(),S:e.getUTCDate()%10<=i[r].suffix.length?i[r].suffix[e.getUTCDate()%10-1]:"",a:2==i[r].meridiem.length?i[r].meridiem[e.getUTCHours()<12?0:1]:"",g:e.getUTCHours()%12==0?12:e.getUTCHours()%12,G:e.getUTCHours(),i:e.getUTCMinutes(),s:e.getUTCSeconds()},a.m=(a.n<10?"0":"")+a.n,a.d=(a.j<10?"0":"")+a.j,a.A=a.a.toString().toUpperCase(),a.h=(a.g<10?"0":"")+a.g,a.H=(a.G<10?"0":"")+a.G,a.i=(a.i<10?"0":"")+a.i,a.s=(a.s<10?"0":"")+a.s}for(var e=[],l=t.extend([],n.separators),c=0,u=n.parts.length;u>c;c++)l.length&&e.push(l.shift()),e.push(a[n.parts[c]]);return l.length&&e.push(l.shift()),e.join("")},convertViewMode:function(t){switch(t){case 4:case"decade":t=4;break;case 3:case"year":t=3;break;case 2:case"month":t=2;break;case 1:case"day":t=1;break;case 0:case"hour":t=0}return t},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',headTemplateV3:'<thead><tr><th class="prev"><i class="glyphicon glyphicon-arrow-left"></i> </th><th colspan="5" class="switch"></th><th class="next"><i class="glyphicon glyphicon-arrow-right"></i> </th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>'};o.template='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+o.headTemplate+o.contTemplate+o.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+o.headTemplate+o.contTemplate+o.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+o.headTemplate+"<tbody></tbody>"+o.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+o.headTemplate+o.contTemplate+o.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+o.headTemplate+o.contTemplate+o.footTemplate+"</table></div></div>",o.templateV3='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+o.headTemplateV3+o.contTemplate+o.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+o.headTemplateV3+o.contTemplate+o.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+o.headTemplateV3+"<tbody></tbody>"+o.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+o.headTemplateV3+o.contTemplate+o.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+o.headTemplateV3+o.contTemplate+o.footTemplate+"</table></div></div>",t.fn.datetimepicker.DPGlobal=o,t.fn.datetimepicker.noConflict=function(){return t.fn.datetimepicker=old,this},t(document).on("focus.datetimepicker.data-api click.datetimepicker.data-api",'[data-provide="datetimepicker"]',function(e){var n=t(this);n.data("datetimepicker")||(e.preventDefault(),n.datetimepicker("show"))}),t(function(){t('[data-provide="datetimepicker-inline"]').datetimepicker()})}(window.jQuery),!function(t){"use strict";var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=t(this.options.menu),this.shown=!1,this.listen()};e.prototype={constructor:e,select:function(){var t=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(t)).change(),this.hide()},updater:function(t){return t},show:function(){var e=t.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:e.top+e.height,left:e.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var e;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(e=t.isFunction(this.source)?this.source(this.query,t.proxy(this.process,this)):this.source,e?this.process(e):this)},process:function(e){var n=this;return e=t.grep(e,function(t){return n.matcher(t)}),e=this.sorter(e),e.length?this.render(e.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(t){return~t.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(t){for(var e,n=[],i=[],o=[];e=t.shift();)e.toLowerCase().indexOf(this.query.toLowerCase())?~e.indexOf(this.query)?i.push(e):o.push(e):n.push(e);return n.concat(i,o)},highlighter:function(t){var e=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return t.replace(new RegExp("("+e+")","ig"),function(t,e){return"<strong>"+e+"</strong>"})},render:function(e){var n=this;return e=t(e).map(function(e,i){return e=t(n.options.item).attr("data-value",i),e.find("a").html(n.highlighter(i)),e[0]}),e.first().addClass("active"),this.$menu.html(e),this},next:function(){var e=this.$menu.find(".active").removeClass("active"),n=e.next();n.length||(n=t(this.$menu.find("li")[0])),n.addClass("active")},prev:function(){var t=this.$menu.find(".active").removeClass("active"),e=t.prev();e.length||(e=this.$menu.find("li").last()),e.addClass("active")},listen:function(){this.$element.on("focus",t.proxy(this.focus,this)).on("blur",t.proxy(this.blur,this)).on("keypress",t.proxy(this.keypress,this)).on("keyup",t.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",t.proxy(this.keydown,this)),this.$menu.on("click",t.proxy(this.click,this)).on("mouseenter","li",t.proxy(this.mouseenter,this)).on("mouseleave","li",t.proxy(this.mouseleave,this))},eventSupported:function(t){var e=t in this.$element;return e||(this.$element.setAttribute(t,"return;"),e="function"==typeof this.$element[t]),e},move:function(t){if(this.shown){switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:t.preventDefault(),this.prev();break;case 40:t.preventDefault(),this.next()}t.stopPropagation()}},keydown:function(e){this.suppressKeyPressRepeat=~t.inArray(e.keyCode,[40,38,9,13,27]),this.move(e)},keypress:function(t){this.suppressKeyPressRepeat||this.move(t)},keyup:function(t){switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}t.stopPropagation(),t.preventDefault()},focus:function(){this.focused=!0},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(t){t.stopPropagation(),t.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(e){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),t(e.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var n=t.fn.typeahead;t.fn.typeahead=function(n){return this.each(function(){var i=t(this),o=i.data("typeahead"),r="object"==typeof n&&n;o||i.data("typeahead",o=new e(this,r)),"string"==typeof n&&o[n]()})},t.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},t.fn.typeahead.Constructor=e,t.fn.typeahead.noConflict=function(){return t.fn.typeahead=n,this},t(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var e=t(this);e.data("typeahead")||e.typeahead(e.data())})}(window.jQuery),function(t){"use strict";function e(e,n){this.itemsArray=[],this.$element=t(e),this.$element.hide(),this.isSelect="SELECT"===e.tagName,this.multiple=this.isSelect&&e.hasAttribute("multiple"),this.objectItems=n&&n.itemValue,this.placeholderText=e.hasAttribute("placeholder")?this.$element.attr("placeholder"):"",this.inputSize=Math.max(1,this.placeholderText.length),this.$container=t('<div class="bootstrap-tagsinput"></div>'),this.$input=t('<input size="'+this.inputSize+'" type="text" placeholder="'+this.placeholderText+'"/>').appendTo(this.$container),this.$element.after(this.$container),this.build(n)}function n(t,e){if("function"!=typeof t[e]){var n=t[e];t[e]=function(t){return t[n]}}}function i(t,e){if("function"!=typeof t[e]){var n=t[e];t[e]=function(){return n}}}function o(t){return t?a.text(t).html():""}function r(t){var e=0;if(document.selection){t.focus();var n=document.selection.createRange();n.moveStart("character",-t.value.length),e=n.text.length}else(t.selectionStart||"0"==t.selectionStart)&&(e=t.selectionStart);return e}var s={tagClass:function(){return"label label-info"},itemValue:function(t){return t?t.toString():t},itemText:function(t){return this.itemValue(t)},freeInput:!0,maxTags:void 0,confirmKeys:[13],onTagExists:function(t,e){e.hide().fadeIn()}};e.prototype={constructor:e,add:function(e,n){var i=this;if(!(i.options.maxTags&&i.itemsArray.length>=i.options.maxTags||e!==!1&&!e)){if("object"==typeof e&&!i.objectItems)throw"Can't add objects when itemValue option is not set";if(!e.toString().match(/^\s*$/)){if(i.isSelect&&!i.multiple&&i.itemsArray.length>0&&i.remove(i.itemsArray[0]),"string"==typeof e&&"INPUT"===this.$element[0].tagName){var r=e.split(",");if(r.length>1){for(var s=0;s<r.length;s++)this.add(r[s],!0);return void(n||i.pushVal())}}var a=i.options.itemValue(e),l=i.options.itemText(e),c=i.options.tagClass(e),u=t.grep(i.itemsArray,function(t){return i.options.itemValue(t)===a})[0];if(u){if(i.options.onTagExists){var h=t(".tag",i.$container).filter(function(){return t(this).data("item")===u});i.options.onTagExists(e,h)}}else{i.itemsArray.push(e);var d=t('<span class="tag '+o(c)+'">'+o(l)+'<span data-role="remove"></span></span>');if(d.data("item",e),i.findInputWrapper().before(d),d.after(" "),i.isSelect&&!t('option[value="'+escape(a)+'"]',i.$element)[0]){var p=t("<option selected>"+o(l)+"</option>");p.data("item",e),p.attr("value",a),i.$element.append(p)}n||i.pushVal(),i.options.maxTags===i.itemsArray.length&&i.$container.addClass("bootstrap-tagsinput-max"),i.$element.trigger(t.Event("itemAdded",{item:e}))}}}},remove:function(e,n){var i=this;i.objectItems&&(e="object"==typeof e?t.grep(i.itemsArray,function(t){return i.options.itemValue(t)==i.options.itemValue(e)})[0]:t.grep(i.itemsArray,function(t){return i.options.itemValue(t)==e})[0]),e&&(t(".tag",i.$container).filter(function(){return t(this).data("item")===e}).remove(),t("option",i.$element).filter(function(){return t(this).data("item")===e}).remove(),i.itemsArray.splice(t.inArray(e,i.itemsArray),1)),n||i.pushVal(),i.options.maxTags>i.itemsArray.length&&i.$container.removeClass("bootstrap-tagsinput-max"),i.$element.trigger(t.Event("itemRemoved",{item:e}))},removeAll:function(){var e=this;for(t(".tag",e.$container).remove(),t("option",e.$element).remove();e.itemsArray.length>0;)e.itemsArray.pop();e.pushVal(),e.options.maxTags&&!this.isEnabled()&&this.enable()},refresh:function(){var e=this;t(".tag",e.$container).each(function(){var n=t(this),i=n.data("item"),r=e.options.itemValue(i),s=e.options.itemText(i),a=e.options.tagClass(i);if(n.attr("class",null),n.addClass("tag "+o(a)),n.contents().filter(function(){return 3==this.nodeType})[0].nodeValue=o(s),e.isSelect){var l=t("option",e.$element).filter(function(){return t(this).data("item")===i});l.attr("value",r)}})},items:function(){return this.itemsArray},pushVal:function(){var e=this,n=t.map(e.items(),function(t){return e.options.itemValue(t).toString()});e.$element.val(n,!0).trigger("change")},build:function(e){var o=this;o.options=t.extend({},s,e);var a=o.options.typeahead||{};o.objectItems&&(o.options.freeInput=!1),n(o.options,"itemValue"),n(o.options,"itemText"),n(o.options,"tagClass"),o.options.source&&(a.source=o.options.source),o.options.customTypeahead&&t.fn.typeahead&&o.$input.typeahead({source:o.options.source,updater:o.options.updater,matcher:o.options.matcher,sorter:o.options.sorter,highlighter:o.options.highlighter}),a.source&&t.fn.typeahead&&(i(a,"source"),o.$input.typeahead({source:function(e,n){function i(t){for(var e=[],i=0;i<t.length;i++){var s=o.options.itemText(t[i]);r[s]=t[i],e.push(s)}n(e)}this.map={};var r=this.map,s=a.source(e);t.isFunction(s.success)?s.success(i):t.when(s).then(i)},updater:function(t){o.add(this.map[t])},matcher:function(t){return-1!==t.toLowerCase().indexOf(this.query.trim().toLowerCase())},sorter:function(t){return t.sort()},highlighter:function(t){var e=new RegExp("("+this.query+")","gi");return t.replace(e,"<strong>$1</strong>")}})),o.$container.on("click",t.proxy(function(){o.$input.focus()},o)),o.$container.on("keydown","input",t.proxy(function(e){var n=t(e.target),i=o.findInputWrapper();switch(e.which){case 8:if(0===r(n[0])){var s=i.prev();s&&o.remove(s.data("item"))}break;case 46:if(0===r(n[0])){var a=i.next();a&&o.remove(a.data("item"))}break;case 37:var l=i.prev();0===n.val().length&&l[0]&&(l.before(i),n.focus());break;case 39:var c=i.next();0===n.val().length&&c[0]&&(c.after(i),n.focus());break;default:o.options.freeInput&&t.inArray(e.which,o.options.confirmKeys)>=0&&(o.add(n.val()),n.val(""),e.preventDefault())}n.attr("size",Math.max(this.inputSize,n.val().length))},o)),o.$container.on("click","[data-role=remove]",t.proxy(function(e){o.remove(t(e.target).closest(".tag").data("item"))},o)),o.options.itemValue===s.itemValue&&("INPUT"===o.$element[0].tagName?o.add(o.$element.val()):t("option",o.$element).each(function(){o.add(t(this).attr("value"),!0)}))},destroy:function(){var t=this;t.$container.off("keypress","input"),t.$container.off("click","[role=remove]"),t.$container.remove(),t.$element.removeData("tagsinput"),t.$element.show()},focus:function(){this.$input.focus()},input:function(){return this.$input},findInputWrapper:function(){for(var e=this.$input[0],n=this.$container[0];e&&e.parentNode!==n;)e=e.parentNode;return t(e)}},t.fn.tagsinput=function(n,i){var o=[];return this.each(function(){var r=t(this).data("tagsinput");if(r){var s=r[n](i);void 0!==s&&o.push(s)}else r=new e(this,n),t(this).data("tagsinput",r),o.push(r),"SELECT"===this.tagName&&t("option",t(this)).attr("selected","selected"),t(this).val(t(this).val())}),"string"==typeof n?o.length>1?o:o[0]:o},t.fn.tagsinput.Constructor=e;var a=t("<div />");t(function(){t("input[data-role=tagsinput], select[multiple][data-role=tagsinput]").tagsinput()})}(window.jQuery),window.Modernizr=function(t,e,n){function i(t){b.cssText=t}function o(t,e){return i(C.join(t+";")+(e||""))}function r(t,e){return typeof t===e}function s(t,e){return!!~(""+t).indexOf(e)}function a(t,e){for(var i in t){var o=t[i];if(!s(o,"-")&&b[o]!==n)return"pfx"==e?o:!0}return!1}function l(t,e,i){for(var o in t){var s=e[t[o]];if(s!==n)return i===!1?t[o]:r(s,"function")?s.bind(i||e):s}return!1}function c(t,e,n){var i=t.charAt(0).toUpperCase()+t.slice(1),o=(t+" "+S.join(i+" ")+i).split(" ");return r(e,"string")||r(e,"undefined")?a(o,e):(o=(t+" "+T.join(i+" ")+i).split(" "),l(o,e,n))}function u(){f.input=function(n){for(var i=0,o=n.length;o>i;i++)A[n[i]]=!!(n[i]in _);return A.list&&(A.list=!(!e.createElement("datalist")||!t.HTMLDataListElement)),A}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),f.inputtypes=function(t){for(var i,o,r,s=0,a=t.length;a>s;s++)_.setAttribute("type",o=t[s]),i="text"!==_.type,i&&(_.value=w,_.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(o)&&_.style.WebkitAppearance!==n?(g.appendChild(_),r=e.defaultView,i=r.getComputedStyle&&"textfield"!==r.getComputedStyle(_,null).WebkitAppearance&&0!==_.offsetHeight,g.removeChild(_)):/^(search|tel)$/.test(o)||(i=/^(url|email)$/.test(o)?_.checkValidity&&_.checkValidity()===!1:_.value!=w)),I[t[s]]=!!i;return I}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var h,d,p="2.7.1",f={},m=!0,g=e.documentElement,v="modernizr",y=e.createElement(v),b=y.style,_=e.createElement("input"),w=":)",k={}.toString,C=" -webkit- -moz- -o- -ms- ".split(" "),x="Webkit Moz O ms",S=x.split(" "),T=x.toLowerCase().split(" "),$={svg:"http://www.w3.org/2000/svg"},E={},I={},A={},D=[],F=D.slice,M=function(t,n,i,o){var r,s,a,l,c=e.createElement("div"),u=e.body,h=u||e.createElement("body");if(parseInt(i,10))for(;i--;)a=e.createElement("div"),a.id=o?o[i]:v+(i+1),c.appendChild(a);return r=["&#173;",'<style id="s',v,'">',t,"</style>"].join(""),c.id=v,(u?c:h).innerHTML+=r,h.appendChild(c),u||(h.style.background="",h.style.overflow="hidden",l=g.style.overflow,g.style.overflow="hidden",g.appendChild(h)),s=n(c,t),u?c.parentNode.removeChild(c):(h.parentNode.removeChild(h),g.style.overflow=l),!!s},N=function(e){var n=t.matchMedia||t.msMatchMedia;if(n)return n(e).matches;var i;return M("@media "+e+" { #"+v+" { position: absolute; } }",function(e){i="absolute"==(t.getComputedStyle?getComputedStyle(e,null):e.currentStyle).position}),i},j=function(){function t(t,o){o=o||e.createElement(i[t]||"div"),t="on"+t;var s=t in o;return s||(o.setAttribute||(o=e.createElement("div")),o.setAttribute&&o.removeAttribute&&(o.setAttribute(t,""),s=r(o[t],"function"),r(o[t],"undefined")||(o[t]=n),o.removeAttribute(t))),o=null,s}var i={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return t}(),R={}.hasOwnProperty;d=r(R,"undefined")||r(R.call,"undefined")?function(t,e){return e in t&&r(t.constructor.prototype[e],"undefined")}:function(t,e){return R.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError;var n=F.call(arguments,1),i=function(){if(this instanceof i){var o=function(){};o.prototype=e.prototype;var r=new o,s=e.apply(r,n.concat(F.call(arguments)));return Object(s)===s?s:r}return e.apply(t,n.concat(F.call(arguments)))};return i}),E.flexbox=function(){return c("flexWrap")},E.flexboxlegacy=function(){return c("boxDirection")},E.canvas=function(){var t=e.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))},E.canvastext=function(){return!(!f.canvas||!r(e.createElement("canvas").getContext("2d").fillText,"function"))},E.webgl=function(){return!!t.WebGLRenderingContext},E.touch=function(){var n;return"ontouchstart"in t||t.DocumentTouch&&e instanceof DocumentTouch?n=!0:M(["@media (",C.join("touch-enabled),("),v,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(t){n=9===t.offsetTop}),n},E.geolocation=function(){return"geolocation"in navigator},E.postmessage=function(){return!!t.postMessage},E.websqldatabase=function(){return!!t.openDatabase},E.indexedDB=function(){return!!c("indexedDB",t)},E.hashchange=function(){return j("hashchange",t)&&(e.documentMode===n||e.documentMode>7)},E.history=function(){return!(!t.history||!history.pushState)},E.draganddrop=function(){var t=e.createElement("div");return"draggable"in t||"ondragstart"in t&&"ondrop"in t},E.websockets=function(){return"WebSocket"in t||"MozWebSocket"in t},E.rgba=function(){return i("background-color:rgba(150,255,150,.5)"),s(b.backgroundColor,"rgba")},E.hsla=function(){return i("background-color:hsla(120,40%,100%,.5)"),s(b.backgroundColor,"rgba")||s(b.backgroundColor,"hsla")},E.multiplebgs=function(){return i("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(b.background)},E.backgroundsize=function(){return c("backgroundSize")},E.borderimage=function(){return c("borderImage")},E.borderradius=function(){return c("borderRadius")},E.boxshadow=function(){return c("boxShadow")},E.textshadow=function(){return""===e.createElement("div").style.textShadow},E.opacity=function(){return o("opacity:.55"),/^0.55$/.test(b.opacity)},E.cssanimations=function(){return c("animationName")},E.csscolumns=function(){return c("columnCount")},E.cssgradients=function(){var t="background-image:",e="gradient(linear,left top,right bottom,from(#9f9),to(white));",n="linear-gradient(left top,#9f9, white);";return i((t+"-webkit- ".split(" ").join(e+t)+C.join(n+t)).slice(0,-t.length)),s(b.backgroundImage,"gradient")},E.cssreflections=function(){return c("boxReflect")},E.csstransforms=function(){return!!c("transform")},E.csstransforms3d=function(){var t=!!c("perspective");return t&&"webkitPerspective"in g.style&&M("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(e){t=9===e.offsetLeft&&3===e.offsetHeight}),t},E.csstransitions=function(){return c("transition")},E.fontface=function(){var t;return M('@font-face {font-family:"font";src:url("https://")}',function(n,i){var o=e.getElementById("smodernizr"),r=o.sheet||o.styleSheet,s=r?r.cssRules&&r.cssRules[0]?r.cssRules[0].cssText:r.cssText||"":"";t=/src/i.test(s)&&0===s.indexOf(i.split(" ")[0])}),t},E.generatedcontent=function(){var t;return M(["#",v,"{font:0/0 a}#",v,':after{content:"',w,'";visibility:hidden;font:3px/1 a}'].join(""),function(e){t=e.offsetHeight>=3}),t},E.video=function(){var t=e.createElement("video"),n=!1;try{(n=!!t.canPlayType)&&(n=new Boolean(n),n.ogg=t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(i){}return n},E.audio=function(){var t=e.createElement("audio"),n=!1;try{(n=!!t.canPlayType)&&(n=new Boolean(n),n.ogg=t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=t.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(i){}return n},E.localstorage=function(){try{return localStorage.setItem(v,v),localStorage.removeItem(v),!0}catch(t){return!1}},E.sessionstorage=function(){try{return sessionStorage.setItem(v,v),sessionStorage.removeItem(v),!0}catch(t){return!1}},E.webworkers=function(){return!!t.Worker},E.applicationcache=function(){return!!t.applicationCache},E.svg=function(){return!!e.createElementNS&&!!e.createElementNS($.svg,"svg").createSVGRect},E.inlinesvg=function(){var t=e.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==$.svg},E.smil=function(){return!!e.createElementNS&&/SVGAnimate/.test(k.call(e.createElementNS($.svg,"animate")))},E.svgclippaths=function(){return!!e.createElementNS&&/SVGClipPath/.test(k.call(e.createElementNS($.svg,"clipPath")))};for(var U in E)d(E,U)&&(h=U.toLowerCase(),f[h]=E[U](),D.push((f[h]?"":"no-")+h));return f.input||u(),f.addTest=function(t,e){if("object"==typeof t)for(var i in t)d(t,i)&&f.addTest(i,t[i]);else{if(t=t.toLowerCase(),f[t]!==n)return f;e="function"==typeof e?e():e,"undefined"!=typeof m&&m&&(g.className+=" "+(e?"":"no-")+t),f[t]=e}return f},i(""),y=_=null,function(t,e){function n(t,e){var n=t.createElement("p"),i=t.getElementsByTagName("head")[0]||t.documentElement;return n.innerHTML="x<style>"+e+"</style>",i.insertBefore(n.lastChild,i.firstChild)}function i(){var t=y.elements;return"string"==typeof t?t.split(" "):t}function o(t){var e=v[t[m]];return e||(e={},g++,t[m]=g,v[g]=e),e}function r(t,n,i){if(n||(n=e),u)return n.createElement(t);i||(i=o(n));var r;return r=i.cache[t]?i.cache[t].cloneNode():f.test(t)?(i.cache[t]=i.createElem(t)).cloneNode():i.createElem(t),!r.canHaveChildren||p.test(t)||r.tagUrn?r:i.frag.appendChild(r)}function s(t,n){if(t||(t=e),u)return t.createDocumentFragment();n=n||o(t);for(var r=n.frag.cloneNode(),s=0,a=i(),l=a.length;l>s;s++)r.createElement(a[s]);return r}function a(t,e){e.cache||(e.cache={},e.createElem=t.createElement,e.createFrag=t.createDocumentFragment,e.frag=e.createFrag()),t.createElement=function(n){return y.shivMethods?r(n,t,e):e.createElem(n)},t.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+i().join().replace(/[\w\-]+/g,function(t){return e.createElem(t),e.frag.createElement(t),'c("'+t+'")'})+");return n}")(y,e.frag)}function l(t){t||(t=e);var i=o(t);return!y.shivCSS||c||i.hasCSS||(i.hasCSS=!!n(t,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),u||a(t,i),t}var c,u,h="3.7.0",d=t.html5||{},p=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,f=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,m="_html5shiv",g=0,v={};!function(){try{var t=e.createElement("a");t.innerHTML="<xyz></xyz>",c="hidden"in t,u=1==t.childNodes.length||function(){e.createElement("a");var t=e.createDocumentFragment();return"undefined"==typeof t.cloneNode||"undefined"==typeof t.createDocumentFragment||"undefined"==typeof t.createElement}()}catch(n){c=!0,u=!0}}();var y={elements:d.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:h,shivCSS:d.shivCSS!==!1,supportsUnknownElements:u,shivMethods:d.shivMethods!==!1,type:"default",shivDocument:l,createElement:r,createDocumentFragment:s};t.html5=y,l(e)}(this,e),f._version=p,f._prefixes=C,f._domPrefixes=T,f._cssomPrefixes=S,f.mq=N,f.hasEvent=j,f.testProp=function(t){return a([t])},f.testAllProps=c,f.testStyles=M,f.prefixed=function(t,e,n){return e?c(t,e,n):c(t,"pfx")},g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(m?" js "+D.join(" "):""),f}(this,this.document);